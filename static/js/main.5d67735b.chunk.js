(this["webpackJsonpexcalidraw-animate"]=this["webpackJsonpexcalidraw-animate"]||[]).push([[31],{30:function(e){e.exports=JSON.parse('{"labels":{"paste":"Paste","selectAll":"Select all","multiSelect":"Add element to selection","moveCanvas":"Move canvas","cut":"Cut","copy":"Copy","copyAsPng":"Copy to clipboard as PNG","copyAsSvg":"Copy to clipboard as SVG","bringForward":"Bring forward","sendToBack":"Send to back","bringToFront":"Bring to front","sendBackward":"Send backward","delete":"Delete","copyStyles":"Copy styles","pasteStyles":"Paste styles","stroke":"Stroke","background":"Background","fill":"Fill","strokeWidth":"Stroke width","strokeStyle":"Stroke style","strokeStyle_solid":"Solid","strokeStyle_dashed":"Dashed","strokeStyle_dotted":"Dotted","sloppiness":"Sloppiness","opacity":"Opacity","textAlign":"Text align","edges":"Edges","sharp":"Sharp","round":"Round","arrowheads":"Arrowheads","arrowhead_none":"None","arrowhead_arrow":"Arrow","arrowhead_bar":"Bar","arrowhead_dot":"Dot","fontSize":"Font size","fontFamily":"Font family","onlySelected":"Only selected","withBackground":"With Background","exportEmbedScene":"Embed scene into exported file","exportEmbedScene_details":"Scene data will be saved into the exported PNG/SVG file so that the scene can be restored from it.\\nWill increase exported file size.","addWatermark":"Add \\"Made with Excalidraw\\"","handDrawn":"Hand-drawn","normal":"Normal","code":"Code","small":"Small","medium":"Medium","large":"Large","veryLarge":"Very large","solid":"Solid","hachure":"Hachure","crossHatch":"Cross-hatch","thin":"Thin","bold":"Bold","left":"Left","center":"Center","right":"Right","extraBold":"Extra bold","architect":"Architect","artist":"Artist","cartoonist":"Cartoonist","fileTitle":"File title","colorPicker":"Color picker","canvasBackground":"Canvas background","drawingCanvas":"Drawing canvas","layers":"Layers","actions":"Actions","language":"Language","createRoom":"Share a live-collaboration session","duplicateSelection":"Duplicate","untitled":"Untitled","name":"Name","yourName":"Your name","madeWithExcalidraw":"Made with Excalidraw","group":"Group selection","ungroup":"Ungroup selection","collaborators":"Collaborators","toggleGridMode":"Toggle grid mode","toggleStats":"Toggle stats for nerds","addToLibrary":"Add to library","removeFromLibrary":"Remove from library","libraryLoadingMessage":"Loading library...","libraries":"Browse libraries","loadingScene":"Loading scene...","align":"Align","alignTop":"Align top","alignBottom":"Align bottom","alignLeft":"Align left","alignRight":"Align right","centerVertically":"Center vertically","centerHorizontally":"Center horizontally","distributeHorizontally":"Distribute horizontally","distributeVertically":"Distribute vertically"},"buttons":{"clearReset":"Reset the canvas","export":"Export","exportToPng":"Export to PNG","exportToSvg":"Export to SVG","copyToClipboard":"Copy to clipboard","copyPngToClipboard":"Copy PNG to clipboard","scale":"Scale","save":"Save","saveAs":"Save as","load":"Load","getShareableLink":"Get shareable link","close":"Close","selectLanguage":"Select language","scrollBackToContent":"Scroll back to content","zoomIn":"Zoom in","zoomOut":"Zoom out","resetZoom":"Reset zoom","menu":"Menu","done":"Done","edit":"Edit","undo":"Undo","redo":"Redo","roomDialog":"Start live collaboration","createNewRoom":"Create new room","toggleFullScreen":"Toggle full screen","toggleDarkMode":"Toggle dark mode","toggleZenMode":"Toggle zen mode","exitZenMode":"Exit zen mode"},"alerts":{"clearReset":"This will clear the whole canvas. Are you sure?","couldNotCreateShareableLink":"Couldn\'t create shareable link.","couldNotCreateShareableLinkTooBig":"Couldn\'t create shareable link: the scene is too big","couldNotLoadInvalidFile":"Couldn\'t load invalid file","importBackendFailed":"Importing from backend failed.","cannotExportEmptyCanvas":"Cannot export empty canvas.","couldNotCopyToClipboard":"Couldn\'t copy to clipboard. Try using Chrome browser.","decryptFailed":"Couldn\'t decrypt data.","uploadedSecurly":"The upload has been secured with end-to-end encryption, which means that Excalidraw server and third parties can\'t read the content.","loadSceneOverridePrompt":"Loading external drawing will replace your existing content. Do you wish to continue?","errorLoadingLibrary":"There was an error loading the third party library.","confirmAddLibrary":"This will add {{numShapes}} shape(s) to your library. Are you sure?","imageDoesNotContainScene":"Image file doesn\'t contain scene data. Have you enabled this during export?","cannotRestoreFromImage":"Scene couldn\'t be restored from this image file"},"toolBar":{"selection":"Selection","draw":"Free draw","rectangle":"Rectangle","diamond":"Diamond","ellipse":"Ellipse","arrow":"Arrow","line":"Line","text":"Text","library":"Library","lock":"Keep selected tool active after drawing"},"headings":{"canvasActions":"Canvas actions","selectedShapeActions":"Selected shape actions","shapes":"Shapes"},"hints":{"linearElement":"Click to start multiple points, drag for single line","freeDraw":"Click and drag, release when you\'re finished","text":"Tip: you can also add text by double-clicking anywhere with the selection tool","linearElementMulti":"Click on last point or press Escape or Enter to finish","resize":"You can constrain proportions by holding SHIFT while resizing,\\nhold ALT to resize from the center","rotate":"You can constrain angles by holding SHIFT while rotating","lineEditor_info":"Double-click or press Enter to edit points","lineEditor_pointSelected":"Press Delete to remove point, CtrlOrCmd+D to duplicate, or drag to move","lineEditor_nothingSelected":"Select a point to move or remove, or hold Alt and click to add new points"},"canvasError":{"cannotShowPreview":"Cannot show preview","canvasTooBig":"The canvas may be too big.","canvasTooBigTip":"Tip: try moving the farthest elements a bit closer together."},"errorSplash":{"headingMain_pre":"Encountered an error. Try ","headingMain_button":"reloading the page.","clearCanvasMessage":"If reloading doesn\'t work, try ","clearCanvasMessage_button":"clearing the canvas.","clearCanvasCaveat":" This will result in loss of work ","trackedToSentry_pre":"The error with identifier ","trackedToSentry_post":" was tracked on our system.","openIssueMessage_pre":"We were very cautious not to include your scene information on the error. If your scene is not private, please consider following up on our ","openIssueMessage_button":"bug tracker.","openIssueMessage_post":" Please include information below by copying and pasting into the GitHub issue.","sceneContent":"Scene content:"},"roomDialog":{"desc_intro":"You can invite people to your current scene to collaborate with you.","desc_privacy":"Don\'t worry, the session uses end-to-end encryption, so whatever you draw will stay private. Not even our server will be able to see what you come up with.","button_startSession":"Start session","button_stopSession":"Stop session","desc_inProgressIntro":"Live-collaboration session is now in progress.","desc_shareLink":"Share this link with anyone you want to collaborate with:","desc_exitSession":"Stopping the session will disconnect you from the room, but you\'ll be able to continue working with the scene, locally. Note that this won\'t affect other people, and they\'ll still be able to collaborate on their version."},"errorDialog":{"title":"Error"},"shortcutsDialog":{"title":"Keyboard shortcuts","shapes":"Shapes","or":"or","click":"click","drag":"drag","curvedArrow":"Curved arrow","curvedLine":"Curved line","editor":"Editor","view":"View","blog":"Read our blog","howto":"Follow our guides","github":"Found an issue? Submit","textNewLine":"Add new line (text)","textFinish":"Finish editing (text)","zoomToFit":"Zoom to fit all elements","zoomToSelection":"Zoom to selection","preventBinding":"Prevent arrow binding"},"encrypted":{"tooltip":"Your drawings are end-to-end encrypted so Excalidraw\'s servers will never see them."},"stats":{"angle":"Angle","element":"Element","elements":"Elements","height":"Height","scene":"Scene","selected":"Selected","storage":"Storage","title":"Stats for nerds","total":"Total","width":"Width"}}')},31:function(e){e.exports=JSON.parse('{"ar-SA":89,"bg-BG":61,"ca-ES":81,"de-DE":99,"el-GR":93,"en":100,"es-ES":81,"fa-IR":89,"fi-FI":100,"fr-FR":98,"he-IL":69,"hi-IN":82,"hu-HU":44,"id-ID":99,"it-IT":100,"ja-JP":89,"ko-KR":68,"my-MM":96,"nb-NO":100,"nl-NL":80,"nn-NO":80,"pl-PL":79,"pt-PT":83,"ro-RO":100,"ru-RU":77,"sk-SK":99,"sv-SE":100,"tr-TR":81,"uk-UA":98,"zh-CN":95,"zh-TW":99}')},32:function(e,t,n){var r={"./ar-SA.json":[49,0],"./bg-BG.json":[50,1],"./ca-ES.json":[51,2],"./de-DE.json":[52,3],"./el-GR.json":[53,4],"./en.json":[30],"./es-ES.json":[54,5],"./fa-IR.json":[55,6],"./fi-FI.json":[56,7],"./fr-FR.json":[57,8],"./he-IL.json":[58,9],"./hi-IN.json":[59,10],"./hu-HU.json":[60,11],"./id-ID.json":[61,12],"./it-IT.json":[62,13],"./ja-JP.json":[63,14],"./ko-KR.json":[64,15],"./my-MM.json":[65,16],"./nb-NO.json":[66,17],"./nl-NL.json":[67,18],"./nn-NO.json":[68,19],"./percentages.json":[31],"./pl-PL.json":[69,20],"./pt-PT.json":[70,21],"./ro-RO.json":[71,22],"./ru-RU.json":[72,23],"./sk-SK.json":[73,24],"./sv-SE.json":[74,25],"./tr-TR.json":[75,26],"./uk-UA.json":[76,27],"./zh-CN.json":[77,28],"./zh-TW.json":[78,29]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n.t(a,3)}))}a.keys=function(){return Object.keys(r)},a.id=32,e.exports=a},42:function(e,t,n){},43:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var r=n(6),a=n(10),o=n.n(a),i=n(23),c=n.n(i),l=(n(42),n(43),n(2)),s=n.n(l),u=n(4),d=n(0),h=n(13),p=(n(45),n(46),function(e){var t=e.link,n=e.size,a=e.fill,o=e.color;return Object(r.jsx)("a",{href:t,className:"GitHubCorner-container","aria-label":"View source on GitHub",target:"_blank",rel:"noopener noreferrer",children:Object(r.jsxs)("svg",{width:n||80,height:n||80,viewBox:"0 0 250 250",style:{fill:a||"#151513",color:o||"#fff",position:"absolute",top:0,border:0,right:0},"aria-hidden":"true",children:[Object(r.jsx)("path",{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"}),Object(r.jsx)("path",{d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2",fill:"currentColor",style:{transformOrigin:"130px 106px"},className:"GitHubCorner-octo-arm"}),Object(r.jsx)("path",{d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z",fill:"currentColor",className:"GitHubCorner-octo-body"})]})})}),f=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.getCurrentTime(),t.setCurrentTime(0),r=(new XMLSerializer).serializeToString(t),t.setCurrentTime(n),e.next=6,Object(h.b)(new Blob([r],{type:"image/svg+xml"}),{fileName:"excalidraw-animate.svg",extensions:[".svg"]});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.b)(new Blob([t],{type:"video/webm"}),{fileName:"excalidraw-animate.webm",extensions:[".webm"]});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(e){return new Promise(function(){var t=Object(u.a)(s.a.mark((function t(n,r){var a,o,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.mediaDevices.getDisplayMedia({video:{cursor:"never",displaySurface:"browser"}});case 3:a=t.sent,(o=new MediaRecorder(a)).ondataavailable=function(e){n(e.data)},i=0,e.forEach((function(e){var t=e.svg,n=e.finishedMs;i=Math.max(i,n),t.pauseAnimations(),t.setCurrentTime(0)})),o.start(),e.forEach((function(e){e.svg.unpauseAnimations()})),setTimeout((function(){o.stop(),a.getVideoTracks()[0].stop()}),i),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),r(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,n){return t.apply(this,arguments)}}())},m=n(7),v=n(8),w=n(1),y=function(e){return[v.red[e],v.pink[e],v.grape[e],v.violet[e],v.indigo[e],v.blue[e],v.cyan[e],v.teal[e],v.green[e],v.lime[e],v.yellow[e],v.orange[e]]},x=([v.white,v.gray[0],v.gray[1]].concat(Object(w.a)(y(0))),["transparent",v.gray[4],v.gray[6]].concat(Object(w.a)(y(6))),[v.black,v.gray[8],v.gray[7]].concat(Object(w.a)(y(9))),n(5)),S="http://www.w3.org/2000/svg",k=null,j=function(){if(k)return k;var e=new Date,t=e.getFullYear(),n="".concat(e.getMonth()+1).padStart(2,"0"),r="".concat(e.getDate()).padStart(2,"0"),a="".concat(e.getHours()).padStart(2,"0"),o="".concat(e.getMinutes()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(r,"-").concat(a).concat(o)},O=function(e){var t=e.fontFamily;return"".concat(x.g[t],", ").concat(x.l)},E=function(e){var t=e.fontSize,n=e.fontFamily;return"".concat(t,"px ").concat(O({fontFamily:n}))},A=function(e,t){var n=document.createElement("div"),r=document.body;n.style.position="absolute",n.style.whiteSpace="pre",n.style.font=t,r.appendChild(n),n.innerText=e.split("\n").map((function(e){return e||" "})).join("\n");var a=n.offsetWidth,o=n.offsetHeight,i=document.createElement("span");i.style.display="inline-block",i.style.overflow="hidden",i.style.width="1px",i.style.height="1px",n.appendChild(i);var c=i.offsetTop+i.offsetHeight;return document.body.removeChild(n),{width:a,height:o,baseline:c}},M=function(e,t){return Math.abs(e-t)},C=function(e,t){var n=e.clientX,r=e.clientY,a=t.zoom,o=t.offsetLeft,i=t.offsetTop,c=t.scrollX,l=t.scrollY,s=1/a.value;return{x:(n-a.translation.x-o)*s-c,y:(r-a.translation.y-i)*s-l}},I=function(e,t){var n=e.sceneX,r=e.sceneY,a=t.zoom,o=t.offsetLeft,i=t.offsetTop,c=t.scrollX,l=t.scrollY;return{x:(n+c+o)*a.value+a.translation.x,y:(r+l+i)*a.value+a.translation.y}},N=new RegExp("^[^".concat("A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02b8\u0300-\u0590\u0800-\u1fff\u2c00-\ufb1c\ufdfe-\ufe6f\ufefd-\uffff","]*[").concat("\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc","]")),L=function(e){return N.test(e)},T=function(e){var t=Object(d.a)(e,2);return{x:t[0],y:t[1]}},P=n(35),D=window.gtag?function(e,t,n,r){window.gtag("event",t,{event_category:e,event_label:n,value:r})}:function(e,t,n,r){console.info("Track Event",e,t,n,r)},R=n(30),B=n(31),z=[{lng:"en",label:"English"}].concat([{lng:"ar-SA",label:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",rtl:!0},{lng:"bg-BG",label:"\u0411\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438"},{lng:"ca-ES",label:"Catalan"},{lng:"de-DE",label:"Deutsch"},{lng:"el-GR",label:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac"},{lng:"es-ES",label:"Espa\xf1ol"},{lng:"fa-IR",label:"\u0641\u0627\u0631\u0633\u06cc",rtl:!0},{lng:"fi-FI",label:"Suomi"},{lng:"fr-FR",label:"Fran\xe7ais"},{lng:"he-IL",label:"\u05e2\u05d1\u05e8\u05d9\u05ea",rtl:!0},{lng:"hi-IN",label:"\u0939\u093f\u0928\u094d\u0926\u0940"},{lng:"hu-HU",label:"Magyar"},{lng:"id-ID",label:"Bahasa Indonesia"},{lng:"it-IT",label:"Italiano"},{lng:"ja-JP",label:"\u65e5\u672c\u8a9e"},{lng:"ko-KR",label:"\ud55c\uad6d\uc5b4"},{lng:"my-MM",label:"Burmese"},{lng:"nb-NO",label:"Norsk bokm\xe5l"},{lng:"nl-NL",label:"Nederlands"},{lng:"nn-NO",label:"Norsk nynorsk"},{lng:"pl-PL",label:"Polski"},{lng:"pt-PT",label:"Portugu\xeas"},{lng:"ro-RO",label:"Rom\xe2n\u0103"},{lng:"ru-RU",label:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439"},{lng:"sk-SK",label:"Sloven\u010dina"},{lng:"sv-SE",label:"Svenska"},{lng:"tr-TR",label:"T\xfcrk\xe7e"},{lng:"uk-UA",label:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430"},{lng:"zh-CN",label:"\u7b80\u4f53\u4e2d\u6587"},{lng:"zh-TW",label:"\u7e41\u9ad4\u4e2d\u6587"}].sort((function(e,t){return e.label>t.label?1:-1}))).filter((function(e){return B[e.lng]>85})),_=(z[0],{}),F=(z[0],function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(void 0===e[r])return;e=e[r]}if("string"===typeof e)return e}),Y=function(e,t){var n=e.split("."),r=F(_,n)||F(R,n);if(void 0===r)throw new Error("Can't find translation for ".concat(e));if(t)for(var a in t)r=r.replace("{{".concat(a,"}}"),t[a]);return r},G=new P.a;G.init({languageUtils:{formatLanguageCode:function(e){return e},isWhitelisted:function(){return!0}},checkWhitelist:!1});var U=function(){return{appearance:"light",isLoading:!1,errorMessage:null,draggingElement:null,resizingElement:null,multiElement:null,editingElement:null,startBoundElement:null,editingLinearElement:null,elementType:"selection",elementLocked:!1,exportBackground:!0,exportEmbedScene:!1,shouldAddWatermark:!1,currentItemStrokeColor:v.black,currentItemBackgroundColor:"transparent",currentItemFillStyle:"hachure",currentItemStrokeWidth:1,currentItemStrokeStyle:"solid",currentItemRoughness:1,currentItemOpacity:100,currentItemFontSize:x.d,currentItemFontFamily:x.c,currentItemTextAlign:x.e,currentItemStrokeSharpness:"sharp",currentItemLinearStrokeSharpness:"round",currentItemStartArrowhead:null,currentItemEndArrowhead:"arrow",viewBackgroundColor:v.white,scrollX:0,scrollY:0,cursorX:0,cursorY:0,cursorButton:"up",scrolledOutside:!1,name:"".concat(Y("labels.untitled"),"-").concat(j()),isBindingEnabled:!0,isResizing:!1,isRotating:!1,selectionElement:null,zoom:{value:1,translation:{x:0,y:0}},openMenu:null,lastPointerDownWith:"mouse",selectedElementIds:{},previousSelectedElementIds:{},shouldCacheIgnoreZoom:!1,showShortcutsDialog:!1,suggestedBindings:[],zenModeEnabled:!1,gridSize:null,editingGroupId:null,selectedGroupIds:{},width:window.innerWidth,height:window.innerHeight,isLibraryOpen:!1,fileHandle:null,collaborators:new Map,showStats:!1}},W={appearance:{browser:!0,export:!1},currentItemBackgroundColor:{browser:!0,export:!1},currentItemFillStyle:{browser:!0,export:!1},currentItemFontFamily:{browser:!0,export:!1},currentItemFontSize:{browser:!0,export:!1},currentItemOpacity:{browser:!0,export:!1},currentItemRoughness:{browser:!0,export:!1},currentItemStrokeColor:{browser:!0,export:!1},currentItemStrokeStyle:{browser:!0,export:!1},currentItemStrokeWidth:{browser:!0,export:!1},currentItemTextAlign:{browser:!0,export:!1},currentItemStrokeSharpness:{browser:!0,export:!1},currentItemLinearStrokeSharpness:{browser:!0,export:!1},currentItemStartArrowhead:{browser:!0,export:!1},currentItemEndArrowhead:{browser:!0,export:!1},cursorButton:{browser:!0,export:!1},cursorX:{browser:!0,export:!1},cursorY:{browser:!0,export:!1},draggingElement:{browser:!1,export:!1},editingElement:{browser:!1,export:!1},startBoundElement:{browser:!1,export:!1},editingGroupId:{browser:!0,export:!1},editingLinearElement:{browser:!1,export:!1},elementLocked:{browser:!0,export:!1},elementType:{browser:!0,export:!1},errorMessage:{browser:!1,export:!1},exportBackground:{browser:!0,export:!1},exportEmbedScene:{browser:!0,export:!1},gridSize:{browser:!0,export:!0},height:{browser:!1,export:!1},isBindingEnabled:{browser:!1,export:!1},isLibraryOpen:{browser:!1,export:!1},isLoading:{browser:!1,export:!1},isResizing:{browser:!1,export:!1},isRotating:{browser:!1,export:!1},lastPointerDownWith:{browser:!0,export:!1},multiElement:{browser:!1,export:!1},name:{browser:!0,export:!1},openMenu:{browser:!0,export:!1},previousSelectedElementIds:{browser:!0,export:!1},resizingElement:{browser:!1,export:!1},scrolledOutside:{browser:!0,export:!1},scrollX:{browser:!0,export:!1},scrollY:{browser:!0,export:!1},selectedElementIds:{browser:!0,export:!1},selectedGroupIds:{browser:!0,export:!1},selectionElement:{browser:!1,export:!1},shouldAddWatermark:{browser:!0,export:!1},shouldCacheIgnoreZoom:{browser:!0,export:!1},showShortcutsDialog:{browser:!1,export:!1},suggestedBindings:{browser:!1,export:!1},viewBackgroundColor:{browser:!0,export:!0},width:{browser:!1,export:!1},zenModeEnabled:{browser:!0,export:!1},zoom:{browser:!0,export:!1},offsetTop:{browser:!1,export:!1},offsetLeft:{browser:!1,export:!1},fileHandle:{browser:!1,export:!1},collaborators:{browser:!1,export:!1},showStats:{browser:!0,export:!1}},X=function(e,t){var n,r={},a=Object(m.a)(Object.keys(e));try{for(a.s();!(n=a.n()).done;){var o=n.value,i=W[o];i||console.error('_clearAppStateForStorage: appState key "'.concat(o,'" config doesn\'t exist for "').concat(t,'" export type')),(null===i||void 0===i?void 0:i[t])&&(r[o]=e[o])}}catch(c){a.e(c)}finally{a.f()}return r},H=function(e){return X(e,"export")},V=n(3),J=function(e){return null!=e&&"text"===e.type},Z=function(e){return null!=e&&K(e.type)},K=function(e){return"arrow"===e||"line"===e||"draw"===e},$=function(e){return null!=e&&q(e.type)},q=function(e){return"arrow"===e},Q=function(e){return null!=e&&("rectangle"===e.type||"diamond"===e.type||"ellipse"===e.type||"text"===e.type)},ee=(n(33),function(e,t,n,r,a){return[(e-n)*Math.cos(a)-(t-r)*Math.sin(a)+n,(e-n)*Math.sin(a)+(t-r)*Math.cos(a)+r]}),te=function(e,t,n,r){var a=n-e,o=r-t;return Math.hypot(a,o)},ne=function(e){if(e.length>=3){var t=[e[0],e[e.length-1]],n=t[0],r=t[1];return te(n[0],n[1],r[0],r[1])<=x.h}return!1},re=function(e,t,n){var r=e.length;if(r<3)return!1;for(var a=[Number.MAX_SAFE_INTEGER,n],o=[t,n],i=0,c=0;c<r;c++){var l=e[c],s=e[(c+1)%r];if(ie(l,s,o,a)){if(0===oe(l,o,s))return ae(l,o,s);i++}}return i%2===1},ae=function(e,t,n){return t[0]<=Math.max(e[0],n[0])&&t[0]>=Math.min(e[0],n[0])&&t[1]<=Math.max(e[1],n[1])&&t[1]>=Math.min(e[1],n[1])},oe=function(e,t,n){var r=(t[1]-e[1])*(n[0]-t[0])-(t[0]-e[0])*(n[1]-t[1]);return 0===r?0:r>0?1:2},ie=function(e,t,n,r){var a=oe(e,t,n),o=oe(e,t,r),i=oe(n,r,e),c=oe(n,r,t);return a!==o&&i!==c||(!(0!==a||!ae(e,n,t))||(!(0!==o||!ae(e,r,t))||(!(0!==i||!ae(n,e,r))||!(0!==c||!ae(n,t,r)))))},ce=n(15),le=function(e){return Z(e)?de(e):[e.x,e.y,e.x+e.width,e.y+e.height]},se=function(e){var t,n=Object(m.a)(e.sets);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("path"===r.type)return r.ops}}catch(a){n.e(a)}finally{n.f()}return e.sets[0].ops},ue=function(e,t){var n=[0,0],r=e.reduce((function(e,r){var a=r.op,o=r.data;if("move"===a)n=o;else if("bcurveTo"===a){var i=[o[0],o[1]],c=[o[2],o[3]],l=[o[4],o[5]],s=n;n=l;for(var u=function(e,t){return Math.pow(1-e,3)*l[t]+3*e*Math.pow(1-e,2)*c[t]+3*Math.pow(e,2)*(1-e)*i[t]+s[t]*Math.pow(e,3)},h=0;h<=1;){var p=u(h,0),f=u(h,1);if(t){var b=t(p,f),g=Object(d.a)(b,2);p=g[0],f=g[1]}e.minY=Math.min(e.minY,f),e.minX=Math.min(e.minX,p),e.maxX=Math.max(e.maxX,p),e.maxY=Math.max(e.maxY,f),h+=.1}}return e}),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});return[r.minX,r.minY,r.maxX,r.maxY]},de=function(e){if(e.points.length<2||!we(e)){var t=e.points.reduce((function(e,t){var n=Object(d.a)(t,2),r=n[0],a=n[1];return e.minY=Math.min(e.minY,a),e.minX=Math.min(e.minX,r),e.maxX=Math.max(e.maxX,r),e.maxY=Math.max(e.maxY,a),e}),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}),n=t.minX,r=t.minY,a=t.maxX,o=t.maxY;return[n+e.x,r+e.y,a+e.x,o+e.y]}var i=we(e),c=se(i[0]),l=ue(c),s=Object(d.a)(l,4),u=s[0],h=s[1],p=s[2],f=s[3];return[u+e.x,h+e.y,p+e.x,f+e.y]},he=function(e){var t=le(e),n=Object(d.a)(t,4),r=n[0],a=n[1],o=n[2],i=n[3],c=(r+o)/2,l=(a+i)/2;if(Z(e))return function(e,t,n){if(e.points.length<2||!we(e)){var r=e.points.reduce((function(r,a){var o=Object(d.a)(a,2),i=o[0],c=o[1],l=ee(e.x+i,e.y+c,t,n,e.angle),s=Object(d.a)(l,2);return i=s[0],c=s[1],r.minY=Math.min(r.minY,c),r.minX=Math.min(r.minX,i),r.maxX=Math.max(r.maxX,i),r.maxY=Math.max(r.maxY,c),r}),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});return[r.minX,r.minY,r.maxX,r.maxY]}var a=we(e),o=se(a[0]);return ue(o,(function(r,a){return ee(e.x+r,e.y+a,t,n,e.angle)}))}(e,c,l);if("diamond"===e.type){var s=ee(c,a,c,l,e.angle),u=Object(d.a)(s,2),h=u[0],p=u[1],f=ee(c,i,c,l,e.angle),b=Object(d.a)(f,2),g=b[0],m=b[1],v=ee(r,l,c,l,e.angle),w=Object(d.a)(v,2),y=w[0],x=w[1],S=ee(o,l,c,l,e.angle),k=Object(d.a)(S,2),j=k[0],O=k[1];return[Math.min(h,g,y,j),Math.min(p,m,x,O),Math.max(h,g,y,j),Math.max(p,m,x,O)]}if("ellipse"===e.type){var E=(o-r)/2,A=(i-a)/2,M=Math.cos(e.angle),C=Math.sin(e.angle),I=Math.hypot(E*M,A*C),N=Math.hypot(A*M,E*C);return[c-I,l-N,c+I,l+N]}var L=ee(r,a,c,l,e.angle),T=Object(d.a)(L,2),P=T[0],D=T[1],R=ee(r,i,c,l,e.angle),B=Object(d.a)(R,2),z=B[0],_=B[1],F=ee(o,i,c,l,e.angle),Y=Object(d.a)(F,2),G=Y[0],U=Y[1],W=ee(o,a,c,l,e.angle),X=Object(d.a)(W,2),H=X[0],V=X[1];return[Math.min(P,z,G,H),Math.min(D,_,U,V),Math.max(P,z,G,H),Math.max(D,_,U,V)]},pe=function(e){if(!e.length)return[0,0,0,0];var t=1/0,n=-1/0,r=1/0,a=-1/0;return e.forEach((function(e){var o=he(e),i=Object(d.a)(o,4),c=i[0],l=i[1],s=i[2],u=i[3];t=Math.min(t,c),r=Math.min(r,l),n=Math.max(n,s),a=Math.max(a,u)})),[t,r,n,a]},fe=function(e,t,n){var r=ce.a.generator(),a="sharp"===n?r.linearPath(t,ye(e)):r.curve(t,ye(e)),o=se(a),i=ue(o),c=Object(d.a)(i,4),l=c[0],s=c[1],u=c[2],h=c[3];return[l+e.x,s+e.y,u+e.x,h+e.y]},be=(U(),[12,8]),ge=[3,6],me=new WeakMap,ve=new WeakMap,we=function(e){return ve.get(e)},ye=function(e){var t={seed:e.seed,strokeLineDash:"dashed"===e.strokeStyle?be:"dotted"===e.strokeStyle?ge:void 0,disableMultiStroke:"solid"!==e.strokeStyle,strokeWidth:"solid"!==e.strokeStyle?e.strokeWidth+.5:e.strokeWidth,fillWeight:e.strokeWidth/2,hachureGap:4*e.strokeWidth,roughness:e.roughness,stroke:e.strokeColor};switch(e.type){case"rectangle":case"diamond":case"ellipse":return t.fillStyle=e.fillStyle,t.fill="transparent"===e.backgroundColor?void 0:e.backgroundColor,"ellipse"===e.type&&(t.curveFitting=1),t;case"line":case"draw":return ne(e.points)&&(t.fillStyle=e.fillStyle,t.fill="transparent"===e.backgroundColor?void 0:e.backgroundColor),t;case"arrow":return t;default:throw new Error("Unimplemented type ".concat(e.type))}},xe=function(e,t){var n=ve.get(e)||null;if(!n){switch(me.delete(e),e.type){case"rectangle":if("round"===e.strokeSharpness){var r=e.width,a=e.height,o=.25*Math.min(r,a);n=t.path("M ".concat(o," 0 L ").concat(r-o," 0 Q ").concat(r," 0, ").concat(r," ").concat(o," L ").concat(r," ").concat(a-o," Q ").concat(r," ").concat(a,", ").concat(r-o," ").concat(a," L ").concat(o," ").concat(a," Q 0 ").concat(a,", 0 ").concat(a-o," L 0 ").concat(o," Q 0 0, ").concat(o," 0"),ye(e))}else n=t.rectangle(0,0,e.width,e.height,ye(e));break;case"diamond":var i=function(e){var t=Math.floor(e.width/2)+1,n=e.width,r=Math.floor(e.height/2)+1;return[t,0,n,r,t,e.height,0,r]}(e),c=Object(d.a)(i,8),l=c[0],s=c[1],u=c[2],h=c[3],p=c[4],f=c[5],b=c[6],g=c[7];n=t.polygon([[l,s],[u,h],[p,f],[b,g]],ye(e));break;case"ellipse":n=t.ellipse(e.width/2,e.height/2,e.width,e.height,ye(e));break;case"line":case"draw":case"arrow":var m=ye(e),v=e.points.length?e.points:[[0,0]];if(n="sharp"===e.strokeSharpness?m.fill?[t.polygon(v,m)]:[t.linearPath(v,m)]:[t.curve(v,m)],"arrow"===e.type){var y=function(e,n,r,a){var o=function(e,t,n,r){var a=se(t[0]);if(a.length<1)return null;var o="start"===n?1:a.length-1,i=a[o].data,c=[i[4],i[5]],l=[i[2],i[3]],s=[i[0],i[1]],u=a[o-1],h=[0,0];"move"===u.op?h=u.data:"bcurveTo"===u.op&&(h=[u.data[4],u.data[5]]);var p=function(e,t){return Math.pow(1-e,3)*c[t]+3*e*Math.pow(1-e,2)*l[t]+3*Math.pow(e,2)*(1-e)*s[t]+h[t]*Math.pow(e,3)},f="start"===n?h:c,b=Object(d.a)(f,2),g=b[0],m=b[1],v=[p(.3,0),p(.3,1)],w=v[0],y=v[1],x=Math.hypot(g-w,m-y),S=(g-w)/x,k=(m-y)/x,j={arrow:30,bar:15,dot:15}[r],O=e.points.reduce((function(e,t,n,r){var a=Object(d.a)(t,2),o=a[0],i=a[1],c=n>0?r[n-1]:[0,0],l=Object(d.a)(c,2),s=l[0],u=l[1];return e+Math.hypot(o-s,i-u)}),0),E=Math.min(j,O/2),A=g-S*E,M=m-k*E;if("dot"===r)return[g,m,Math.hypot(M-m,A-g)];var C={arrow:20,bar:90}[r],I=ee(A,M,g,m,-C*Math.PI/180),N=Object(d.a)(I,2),L=N[0],T=N[1],P=ee(A,M,g,m,C*Math.PI/180),D=Object(d.a)(P,2);return[g,m,L,T,D[0],D[1]]}(e,n,r,a);if(null===o)return[];if("dot"===a){var i=Object(d.a)(o,3),c=i[0],l=i[1],s=i[2];return[t.circle(c,l,s,Object(V.a)(Object(V.a)({},m),{},{fill:e.strokeColor,fillStyle:"solid"}))]}var u=Object(d.a)(o,6),h=u[0],p=u[1],f=u[2],b=u[3],g=u[4],v=u[5];return"dotted"===e.strokeStyle?m.strokeLineDash=[3,4]:delete m.strokeLineDash,[t.line(f,b,h,p,m),t.line(g,v,h,p,m)]},x=e.startArrowhead,S=void 0===x?null:x,k=e.endArrowhead,j=void 0===k?"arrow":k;if(null!==S){var O,E=y(e,n,"start",S);(O=n).push.apply(O,Object(w.a)(E))}if(null!==j){var A,M=y(e,n,"end",j);(A=n).push.apply(A,Object(w.a)(M))}}break;case"text":n=[]}ve.set(e,n)}},Se=function(e,t,n,r,a){var o=le(e),i=Object(d.a)(o,4),c=i[0],l=i[1],s=i[2],u=i[3],h=(s-c)/2-(e.x-c),p=(u-l)/2-(e.y-l),f=180*e.angle/Math.PI,b=t.generator;switch(e.type){case"selection":throw new Error("Selection rendering is not supported for SVG");case"rectangle":case"diamond":case"ellipse":xe(e,b);var g=t.draw(we(e)),m=e.opacity/100;1!==m&&(g.setAttribute("stroke-opacity","".concat(m)),g.setAttribute("fill-opacity","".concat(m))),g.setAttribute("transform","translate(".concat(r||0," ").concat(a||0,") rotate(").concat(f," ").concat(h," ").concat(p,")")),n.appendChild(g);break;case"line":case"draw":case"arrow":xe(e,b);var v=n.ownerDocument.createElementNS(S,"g"),w=e.opacity/100;we(e).forEach((function(n){var o=t.draw(n);1!==w&&(o.setAttribute("stroke-opacity","".concat(w)),o.setAttribute("fill-opacity","".concat(w))),o.setAttribute("transform","translate(".concat(r||0," ").concat(a||0,") rotate(").concat(f," ").concat(h," ").concat(p,")")),"line"!==e.type&&"draw"!==e.type||!ne(e.points)||"transparent"===e.backgroundColor||o.setAttribute("fill-rule","evenodd"),v.appendChild(o)})),n.appendChild(v);break;default:if(!J(e))throw new Error("Unimplemented type ".concat(e.type));var y=e.opacity/100,x=n.ownerDocument.createElementNS(S,"g");1!==y&&(x.setAttribute("stroke-opacity","".concat(y)),x.setAttribute("fill-opacity","".concat(y))),x.setAttribute("transform","translate(".concat(r||0," ").concat(a||0,") rotate(").concat(f," ").concat(h," ").concat(p,")"));for(var k=e.text.replace(/\r\n?/g,"\n").split("\n"),j=e.height/k.length,E=e.height-e.baseline,A="center"===e.textAlign?e.width/2:"right"===e.textAlign?e.width:0,M=L(e.text)?"rtl":"ltr",C="center"===e.textAlign?"middle":"right"===e.textAlign||"rtl"===M?"end":"start",I=0;I<k.length;I++){var N=n.ownerDocument.createElementNS(S,"text");N.textContent=k[I],N.setAttribute("x","".concat(A)),N.setAttribute("y","".concat((I+1)*j-E)),N.setAttribute("font-family",O(e)),N.setAttribute("font-size","".concat(e.fontSize,"px")),N.setAttribute("fill",e.strokeColor),N.setAttribute("text-anchor",C),N.setAttribute("style","white-space: pre;"),N.setAttribute("direction",M),x.appendChild(N)}n.appendChild(x)}},ke=n(9),je=n(11),Oe=function(e){return"string"===typeof e},Ee=function(){function e(){Object(ke.a)(this,e),this.callbacks=new Set,this.nonDeletedElements=[],this.elements=[],this.elementsMap=new Map}return Object(je.a)(e,[{key:"getElementsIncludingDeleted",value:function(){return this.elements}},{key:"getElements",value:function(){return this.nonDeletedElements}},{key:"getElement",value:function(e){return this.elementsMap.get(e)||null}},{key:"getNonDeletedElement",value:function(e){var t=this.getElement(e);return t&&Ft(t)?t:null}},{key:"getNonDeletedElements",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.getNonDeletedElement(e);null!=r&&n.push(r)})),n}},{key:"replaceAllElements",value:function(t){var n=this;this.elements=t,this.elementsMap.clear(),t.forEach((function(t){n.elementsMap.set(t.id,t),e.mapElementToScene(t,n)})),this.nonDeletedElements=_t(this.elements),this.informMutation()}},{key:"informMutation",value:function(){for(var e=0,t=Array.from(this.callbacks);e<t.length;e++){(0,t[e])()}}},{key:"addCallback",value:function(e){var t=this;if(this.callbacks.has(e))throw new Error;return this.callbacks.add(e),function(){if(!t.callbacks.has(e))throw new Error;t.callbacks.delete(e)}}},{key:"destroy",value:function(){var t=this;e.sceneMapById.forEach((function(n,r){n===t&&e.sceneMapById.delete(r)})),this.callbacks.clear()}}],[{key:"mapElementToScene",value:function(e,t){Oe(e)?this.sceneMapById.set(e,t):this.sceneMapByElement.set(e,t)}},{key:"getScene",value:function(e){return Oe(e)?this.sceneMapById.get(e)||null:this.sceneMapByElement.get(e)||null}}]),e}();Ee.sceneMapByElement=new WeakMap,Ee.sceneMapById=new Map;var Ae=Ee,Me=n(16),Ce=n(34),Ie=n.n(Ce),Ne=new Me.a(Date.now()),Le=function(){return Math.floor(Ne.next()*Math.pow(2,31))},Te=function(){return Ie()()},Pe=function(e,t){var n,r=!1,a=t.points;for(var o in"undefined"!==typeof a&&(t=Object(V.a)(Object(V.a)({},function(e){var t=e.map((function(e){return e[0]})),n=e.map((function(e){return e[1]}));return{width:Math.max.apply(Math,Object(w.a)(t))-Math.min.apply(Math,Object(w.a)(t)),height:Math.max.apply(Math,Object(w.a)(n))-Math.min.apply(Math,Object(w.a)(n))}}(a)),t)),t){var i=t[o];if("undefined"!==typeof i){if(e[o]===i&&("object"!==typeof i||null===i||"groupIds"===o))continue;if("points"===o){var c=e[o],l=i;if(c.length===l.length){for(var s=!1,u=c.length;--u;){var d=c[u],h=l[u];if(d[0]!==h[0]||d[1]!==h[1]){s=!0;break}}if(!s)continue}}e[o]=i,r=!0}}r&&("undefined"===typeof t.height&&"undefined"===typeof t.width&&"undefined"===typeof a||function(e){ve.delete(e)}(e),e.version++,e.versionNonce=Le(),null===(n=Ae.getScene(e))||void 0===n||n.informMutation())},De=function(e,t){return Object(V.a)(Object(V.a)(Object(V.a)({},e),t),{},{version:e.version+1,versionNonce:Le()})},Re=function(e){return Z(e)?e.points.length<2:0===e.width&&0===e.height},Be=n(28),ze=n(12),_e=function(e){return Math.floor(e)},Fe=function(e,t,n){if(!e.length)return{scrollX:_e(0),scrollY:_e(0)};var r=pe(e),a=Object(d.a)(r,4),o=a[0],i=a[1],c=a[2],l=a[3];if(function(e,t,n){var r=Object(d.a)(n,4),a=r[0],o=r[1],i=r[2],c=r[3],l=I({sceneX:a,sceneY:o},e),s=l.x,u=l.y,h=I({sceneX:i,sceneY:c},e),p=h.x,f=h.y;return p-s>e.width||f-u>e.height}(t,0,[o,i,c,l])){var s=function(e,t){if(!e.length)return[0,0,0,0];var n=1/0,r=e[0];return e.forEach((function(e){var a=he(e),o=Object(d.a)(a,4),i=o[0],c=o[1],l=o[2],s=o[3],u=te((i+l)/2,(c+s)/2,t.x,t.y);u<n&&(n=u,r=e)})),he(r)}(e,C({clientX:t.scrollX,clientY:t.scrollY},t)),u=Object(d.a)(s,4);o=u[0],i=u[1],c=u[2],l=u[3]}return function(e){var t=e.scenePoint,n=e.viewportDimensions,r=e.zoom;return{scrollX:_e(n.width/2*(1/r.value)-t.x-r.translation.x*(1/r.value)),scrollY:_e(n.height/2*(1/r.value)-t.y-r.translation.y*(1/r.value))}}({scenePoint:{x:(o+c)/2,y:(i+l)/2},viewportDimensions:{width:t.width,height:t.height},zoom:t.zoom})},Ye=function(e,t){var n,r,a=t.x,o=t.y,i=t.strokeColor,c=t.backgroundColor,l=t.fillStyle,s=t.strokeWidth,u=t.strokeStyle,d=t.roughness,h=t.opacity,p=t.width,f=void 0===p?0:p,b=t.height,g=void 0===b?0:b,m=t.angle,v=void 0===m?0:m,w=t.groupIds,y=void 0===w?[]:w,x=t.strokeSharpness,S=t.boundElementIds,k=void 0===S?null:S,j=Object(Be.a)(t,["x","y","strokeColor","backgroundColor","fillStyle","strokeWidth","strokeStyle","roughness","opacity","width","height","angle","groupIds","strokeSharpness","boundElementIds"]);return{id:j.id||Te(),type:e,x:a,y:o,width:f,height:g,angle:v,strokeColor:i,backgroundColor:c,fillStyle:l,strokeWidth:s,strokeStyle:u,roughness:d,opacity:h,groupIds:y,strokeSharpness:x,seed:null!==(n=j.seed)&&void 0!==n?n:Le(),version:j.version||1,versionNonce:null!==(r=j.versionNonce)&&void 0!==r?r:0,isDeleted:!1,boundElementIds:k}},Ge=function(e,t){return{x:"center"===e.textAlign?t.width/2:"right"===e.textAlign?t.width:0,y:"middle"===e.verticalAlign?t.height/2:0}},Ue=function(e,t){return[0,0,0,0,t,e,1,0]},We=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[0,0,0,0,0,0,0,0];if(t<0||t>7)throw new Error("Expected `index` betwen 0 and 7, got `".concat(t,"`"));return 0!==e&&(n[t]=e),n},Xe=function(e){return[e[0],e[1],e[2],e[3],-e[4],-e[5],-e[6],-e[7]]},He=function(e,t){return tt(t)?[e[0]+t,e[1],e[2],e[3],e[4],e[5],e[6],e[7]]:[e[0]+t[0],e[1]+t[1],e[2]+t[2],e[3]+t[3],e[4]+t[4],e[5]+t[5],e[6]+t[6],e[7]+t[7]]},Ve=function(e,t){return tt(t)?[e[0]-t,e[1],e[2],e[3],e[4],e[5],e[6],e[7]]:[e[0]-t[0],e[1]-t[1],e[2]-t[2],e[3]-t[3],e[4]-t[4],e[5]-t[5],e[6]-t[6],e[7]-t[7]]},Je=function(e,t){return tt(t)?[e[0]*t,e[1]*t,e[2]*t,e[3]*t,e[4]*t,e[5]*t,e[6]*t,e[7]*t]:[Ze(e,t),t[1]*e[0]+t[0]*e[1]-t[4]*e[2]+t[5]*e[3]+t[2]*e[4]-t[3]*e[5]-t[7]*e[6]-t[6]*e[7],t[2]*e[0]+t[0]*e[2]-t[6]*e[3]+t[3]*e[6],t[3]*e[0]+t[6]*e[2]+t[0]*e[3]-t[2]*e[6],t[4]*e[0]+t[2]*e[1]-t[1]*e[2]+t[7]*e[3]+t[0]*e[4]+t[6]*e[5]-t[5]*e[6]+t[3]*e[7],t[5]*e[0]-t[3]*e[1]+t[7]*e[2]+t[1]*e[3]-t[6]*e[4]+t[0]*e[5]+t[4]*e[6]+t[2]*e[7],t[6]*e[0]+t[3]*e[2]-t[2]*e[3]+t[0]*e[6],t[7]*e[0]+t[6]*e[1]+t[5]*e[2]+t[4]*e[3]+t[3]*e[4]+t[2]*e[5]+t[1]*e[6]+t[0]*e[7]]},Ze=function(e,t){return t[0]*e[0]+t[2]*e[2]+t[3]*e[3]-t[6]*e[6]},Ke=function(e,t){return[$e(e,t),e[1]*t[7]+e[4]*t[5]-e[5]*t[4]+e[7]*t[1],e[2]*t[7]-e[4]*t[6]+e[6]*t[4]+e[7]*t[2],e[3]*t[7]+e[5]*t[6]-e[6]*t[5]+e[7]*t[3],e[4]*t[7]+e[7]*t[4],e[5]*t[7]+e[7]*t[5],e[6]*t[7]+e[7]*t[6],e[7]*t[7]]},$e=function(e,t){return e[0]*t[7]+e[1]*t[6]+e[2]*t[5]+e[3]*t[4]+e[4]*t[3]+e[5]*t[2]+e[6]*t[1]+e[7]*t[0]},qe=function(e,t){return[t[0]*e[0]+t[2]*e[2]+t[3]*e[3]-t[6]*e[6],t[1]*e[0]+t[0]*e[1]-t[4]*e[2]+t[5]*e[3]+t[2]*e[4]-t[3]*e[5]-t[7]*e[6]-t[6]*e[7],t[2]*e[0]+t[0]*e[2]-t[6]*e[3]+t[3]*e[6],t[3]*e[0]+t[6]*e[2]+t[0]*e[3]-t[2]*e[6],t[4]*e[0]+t[7]*e[3]+t[0]*e[4]+t[3]*e[7],t[5]*e[0]+t[7]*e[2]+t[0]*e[5]+t[2]*e[7],t[6]*e[0]+t[0]*e[6],t[7]*e[0]+t[0]*e[7]]},Qe=function(e){return Math.sqrt(Math.abs(e[0]*e[0]-e[2]*e[2]-e[3]*e[3]+e[6]*e[6]))},et=function(e){var t=Qe(e);if(0===t||1===t)return e;var n=e[6]<0?-1:1;return Je(e,n/t)},tt=function(e){return"number"===typeof e},nt=(We(1,1),We(1,2),We(1,3),We(1,4),We(1,5),We(1,6),We(1,7),function(e,t,n){return et([0,n,e,t,0,0,0,0])}),rt=function(e,t){return et(Ke(t,e))},at=function(e,t){return qe(e,t)},ot=function(e){var t=Object(d.a)(e,2),n=t[0];return[0,0,0,0,t[1],n,1,0]},it=function(e){return[e[5],e[4]]},ct=function(e,t){return $e(e,t)},lt=function(e){return[0,0,0,0,e[4],e[5],0,0]},st=function(e,t){return He(Je(e,Math.sin(t/2)),Math.cos(t/2))},ut=function(e,t){return et(Je(Je(e,t),Xe(e)))},dt=n(17),ht=function(e,t){var n=t.x,r=t.y,a=pt(e,e.width,e.height);return ft({element:e,point:[n,r],threshold:a,check:mt})},pt=function(e,t,n){var r=("diamond"===e.type?1/Math.sqrt(2):1)*Math.min(t,n);return Math.max(16,Math.min(.25*r,32))},ft=function(e){switch(e.element.type){case"rectangle":case"text":case"diamond":case"ellipse":var t=bt(e.element,e.point);return e.check(t,e.threshold);case"arrow":case"line":case"draw":return St(e);case"selection":return console.warn("This should not happen, we need to investigate why it does."),!1}},bt=function(e,t){switch(e.type){case"rectangle":case"text":return vt(e,t);case"diamond":return wt(e,t);case"ellipse":return yt(e,t)}},gt=function(e,t){return e<t},mt=function(e,t){return 0<=e&&e<t},vt=function(e,t){var n=kt(e,t),r=Object(d.a)(n,4),a=r[1],o=r[2],i=r[3];return Math.max(ct(a,nt(0,1,-i)),ct(a,nt(1,0,-o)))},wt=function(e,t){var n=kt(e,t),r=Object(d.a)(n,4),a=r[1],o=r[2],i=r[3],c=nt(i,o,-i*o);return ct(a,c)},yt=function(e,t){var n,r=xt(e,t),a=Object(d.a)(r,2),o=a[0],i=a[1];return n=i,-Math.sign(n[1])*ct(o,i)},xt=function(e,t){var n=kt(e,t),r=Object(d.a)(n,4),a=r[1],o=r[2],i=r[3],c=it(a),l=Object(d.a)(c,2),s=l[0],u=l[1],h=.707,p=.707,f=o,b=i;[0,1,2,3].forEach((function(e){var t=f*h,n=b*p,r=(f*f-b*b)*Math.pow(h,3)/f,a=(b*b-f*f)*Math.pow(p,3)/b,o=t-r,i=n-a,c=s-r,l=u-a,d=Math.hypot(i,o),g=Math.hypot(l,c);h=Math.min(1,Math.max(0,(c*d/g+r)/f)),p=Math.min(1,Math.max(0,(l*d/g+a)/b));var m=Math.hypot(p,h);h/=m,p/=m}));var g,m=Ue(f*h,b*p);return[a,at(rt(a,g=m),g)]},St=function(e){var t=e.element,n=e.threshold;if(!we(t))return!1;var r=kt(e.element,e.point),a=Object(d.a)(r,4),o=a[0],i=a[1],c=a[2],l=a[3],s=nt(0,1,-l),u=nt(1,0,-c);if(!gt(ct(i,s),n)||!gt(ct(i,u),n))return!1;var h=it(o),p=Object(d.a)(h,2),f=p[0],b=p[1],g=we(t);if(e.check===gt&&g.some((function(e){return At(e,f,b,t.strokeSharpness)})))return!0;return g.some((function(e){return Mt(e,f,b,n)}))},kt=function(e,t){var n,r=ot(t),a=le(e),o=Ot(a),i=st(o,e.angle),c=ut(i,r),l=function(e){return[0,0,0,0,Math.abs(e[4]),Math.abs(e[5]),1,0]}(Ve(c,lt(o))),s=(n=e.x,[0,0,0,0,e.y,n,0,0]),u=Ve(c,s),h=Object(d.a)(a,4),p=h[0],f=h[1];return[u,l,(h[2]-p)/2,(h[3]-f)/2]},jt=function(e){var t,n=le(e),r=Ot(n),a=st(r,e.angle),o=Xe([1,0,0,0,-.5*(t=lt(r))[5],.5*t[4],0,0]);return Je(o,a)},Ot=function(e){var t=Object(d.a)(e,4),n=t[0],r=t[1],a=t[2],o=t[3];return Ue((n+a)/2,(r+o)/2)},Et=function(e,t,n){var r=jt(e),a=ut(r,ot(t)),o=ut(r,ot(n)),i=rt(a,o),c=e.height/e.width,l=e.width/2,s=e.height/2,u=i[2],d=i[3],h=i[1],p=Math.abs(d),f=Math.abs(u);switch(e.type){case"rectangle":case"text":return h/(l*(f+c*p));case"diamond":return p<f?h/(f*l):h/(p*s);case"ellipse":return h/(l*Math.sqrt(Math.pow(u,2)+Math.pow(c,2)*Math.pow(d,2)))}},At=function(e,t,n,r){var a,o=se(e),i=[],c=!1,l=Object(m.a)(o);try{for(l.s();!(a=l.n()).done;){var s=a.value;"move"===s.op?(c=!c)&&i.push([s.data[0],s.data[1]]):"bcurveTo"===s.op&&c&&(i.push([s.data[0],s.data[1]]),i.push([s.data[2],s.data[3]]),i.push([s.data[4],s.data[5]]))}}catch(d){l.e(d)}finally{l.f()}if(i.length>=4){if("sharp"===r)return re(i,t,n);var u=Object(dt.a)(i,10,5);return re(u,t,n)}return!1},Mt=function(e,t,n,r){var a=se(e),o=[0,0];return a.some((function(e,a){var i=e.op,c=e.data;if("move"===i)o=c;else if("bcurveTo"===i){var l=[c[0],c[1]],s=[c[2],c[3]],u=[c[4],c[5]],h=o;return o=u,function(e,t,n,r,a,o){for(var i=Object(d.a)(a,2),c=i[0],l=i[1],s=function(a,o){return Math.pow(1-a,3)*r[o]+3*a*Math.pow(1-a,2)*n[o]+3*Math.pow(a,2)*(1-a)*t[o]+e[o]*Math.pow(a,3)},u=0;u<=1;){var h=s(u,0),p=s(u,1);if(Math.sqrt(Math.pow(h-c,2)+Math.pow(p-l,2))<o)return!0;u+=.01}return!1}(h,l,s,u,[t,n],r)}return!1}))},Ct=function(){function e(t,n){Object(ke.a)(this,e),this.elementId=void 0,this.activePointIndex=void 0,this.isDragging=void 0,this.lastUncommittedPoint=void 0,this.pointerOffset=void 0,this.startBindingElement=void 0,this.endBindingElement=void 0,this.elementId=t.id,Ae.mapElementToScene(this.elementId,n),e.normalizePoints(t),this.activePointIndex=null,this.lastUncommittedPoint=null,this.isDragging=!1,this.pointerOffset={x:0,y:0},this.startBindingElement="keep",this.endBindingElement="keep"}return Object(je.a)(e,null,[{key:"getElement",value:function(e){var t,n=null===(t=Ae.getScene(e))||void 0===t?void 0:t.getNonDeletedElement(e);return n||null}},{key:"handlePointDragging",value:function(t,n,r,a,o){if(!t.editingLinearElement)return!1;var i=t.editingLinearElement,c=i.activePointIndex,l=i.elementId,s=i.isDragging,u=e.getElement(l);if(!u)return!1;if(null!=c&&c>-1){!1===s&&n({editingLinearElement:Object(V.a)(Object(V.a)({},i),{},{isDragging:!0})});var d=e.createPointAt(u,r-i.pointerOffset.x,a-i.pointerOffset.y,t.gridSize);return e.movePoint(u,c,d),$(u)&&o(u,0===c?"start":"end"),!0}return!1}},{key:"handlePointerUp",value:function(t,n,r){var a=n.elementId,o=n.activePointIndex,i=n.isDragging,c=e.getElement(a);if(!c)return n;var l={};if(i&&(0===o||o===c.points.length-1)){ne(c.points)&&e.movePoint(c,o,0===o?c.points[c.points.length-1]:c.points[0]);var s=It(r)?Bt(T(e.getPointAtIndexGlobalCoordinates(c,o)),Ae.getScene(c)):null;l=Object(ze.a)({},0===o?"startBindingElement":"endBindingElement",s)}return Object(V.a)(Object(V.a)(Object(V.a)({},n),l),{},{isDragging:!1,pointerOffset:{x:0,y:0}})}},{key:"handlePointerDown",value:function(t,n,r,a,o){var i={didAddPoint:!1,hitElement:null};if(!n.editingLinearElement)return i;var c=n.editingLinearElement.elementId,l=e.getElement(c);if(!l)return i;if(t.altKey)return null==n.editingLinearElement.lastUncommittedPoint&&Pe(l,{points:[].concat(Object(w.a)(l.points),[e.createPointAt(l,o.x,o.y,n.gridSize)])}),a.resumeRecording(),r({editingLinearElement:Object(V.a)(Object(V.a)({},n.editingLinearElement),{},{activePointIndex:l.points.length-1,lastUncommittedPoint:null,endBindingElement:Bt(o,Ae.getScene(l))})}),i.didAddPoint=!0,i;var s=e.getPointIndexUnderCursor(l,n.zoom,o.x,o.y);if(s>-1)i.hitElement=l;else{var u=n.editingLinearElement,h=u.startBindingElement,p=u.endBindingElement;It(n)&&$(l)&&Nt(l,h,p)}var f=le(l),b=Object(d.a)(f,4),g=b[0],m=b[1],v=(g+b[2])/2,y=(m+b[3])/2,x=s>-1&&ee(l.x+l.points[s][0],l.y+l.points[s][1],v,y,l.angle);return r({editingLinearElement:Object(V.a)(Object(V.a)({},n.editingLinearElement),{},{activePointIndex:s>-1?s:null,pointerOffset:x?{x:o.x-x[0],y:o.y-x[1]}:{x:0,y:0}})}),i}},{key:"handlePointerMove",value:function(t,n,r,a,o){var i=a.elementId,c=a.lastUncommittedPoint,l=e.getElement(i);if(!l)return a;var s=l.points,u=s[s.length-1];if(!t.altKey)return u===c&&e.movePoint(l,s.length-1,"delete"),Object(V.a)(Object(V.a)({},a),{},{lastUncommittedPoint:null});var d=e.createPointAt(l,n-a.pointerOffset.x,r-a.pointerOffset.y,o);return u===c?e.movePoint(l,l.points.length-1,d):e.movePoint(l,"new",d),Object(V.a)(Object(V.a)({},a),{},{lastUncommittedPoint:l.points[l.points.length-1]})}},{key:"getPointsGlobalCoordinates",value:function(e){var t=le(e),n=Object(d.a)(t,4),r=n[0],a=n[1],o=n[2],i=n[3],c=(r+o)/2,l=(a+i)/2;return e.points.map((function(t){var n=e.x,r=e.y,a=ee(n+t[0],r+t[1],c,l,e.angle),o=Object(d.a)(a,2);return[n=o[0],r=o[1]]}))}},{key:"getPointAtIndexGlobalCoordinates",value:function(e,t){var n=t<0?e.points.length+t:t,r=le(e),a=Object(d.a)(r,4),o=a[0],i=a[1],c=(o+a[2])/2,l=(i+a[3])/2,s=e.points[n],u=e.x,h=e.y;return ee(u+s[0],h+s[1],c,l,e.angle)}},{key:"pointFromAbsoluteCoords",value:function(e,t){var n=le(e),r=Object(d.a)(n,4),a=r[0],o=r[1],i=(a+r[2])/2,c=(o+r[3])/2,l=ee(t[0],t[1],i,c,-e.angle),s=Object(d.a)(l,2),u=s[0],h=s[1];return[u-e.x,h-e.y]}},{key:"getPointIndexUnderCursor",value:function(e,t,n,r){for(var a=this.getPointsGlobalCoordinates(e),o=a.length;--o>-1;){var i=a[o];if(te(n,r,i[0],i[1])*t.value<this.POINT_HANDLE_SIZE/2+1)return o}return-1}},{key:"createPointAt",value:function(e,t,n,r){var a=function(e,t,n){return n?[Math.round(e/n)*n,Math.round(t/n)*n]:[e,t]}(t,n,r),o=le(e),i=Object(d.a)(o,4),c=i[0],l=i[1],s=(c+i[2])/2,u=(l+i[3])/2,h=ee(a[0],a[1],s,u,-e.angle),p=Object(d.a)(h,2),f=p[0],b=p[1];return[f-e.x,b-e.y]}},{key:"normalizePoints",value:function(e){var t=e.points,n=t[0][0],r=t[0][1];Pe(e,{points:t.map((function(e,t){return[e[0]-n,e[1]-r]})),x:e.x+n,y:e.y+r})}},{key:"movePointByOffset",value:function(t,n,r){var a=Object(d.a)(t.points[n],2),o=a[0],i=a[1];e.movePoint(t,n,[o+r.x,i+r.y])}},{key:"movePoint",value:function(e,t,n,r){var a,o=e.points,i=0,c=0;if("delete"===n){if("new"===t)throw new Error("invalid args in movePoint");(a=o.slice()).splice(t,1),0===t&&(i=a[0][0],c=a[0][1],a=a.map((function(e,t){return 0===t?[0,0]:[e[0]-i,e[1]-c]})))}else if("new"===t)a=[].concat(Object(w.a)(o),[n]);else{var l=n[0]-o[t][0],s=n[1]-o[t][1];a=o.map((function(e,n){return n===t?0===n?(i=l,c=s,e):(i=0,c=0,[e[0]+l,e[1]+s]):i||c?[e[0]-i,e[1]-c]:e}))}var u=fe(e,a,e.strokeSharpness||"round"),d=fe(e,o,e.strokeSharpness||"round"),h=(u[0]+u[2])/2,p=(u[1]+u[3])/2,f=(d[0]+d[2])/2,b=(d[1]+d[3])/2,g=ee(i,c,f-h,b-p,e.angle);Pe(e,Object(V.a)(Object(V.a)({},r),{},{points:a,x:e.x+g[0],y:e.y+g[1]}))}}]),e}();Ct.POINT_HANDLE_SIZE=20;/Mac|iPod|iPhone|iPad/.test(window.navigator.platform);var It=function(e){return e.isBindingEnabled},Nt=function(e,t,n){var r=new Set,a=new Set;Lt(e,t,n,"start",r,a),Lt(e,n,t,"end",r,a);var o=Array.from(a).filter((function(e){return!r.has(e)}));Ae.getScene(e).getNonDeletedElements(o).forEach((function(t){var n;Pe(t,{boundElementIds:null===(n=t.boundElementIds)||void 0===n?void 0:n.filter((function(t){return t!==e.id}))})}))},Lt=function(e,t,n,r,a,o){if("keep"!==t)if(null!=t)null!=n&&("keep"===n?Pt(e,t,r):"start"!==r&&n.id===t.id)||(Tt(e,t,r),a.add(t.id));else{var i=Rt(e,r);null!=i&&o.add(i)}},Tt=function(e,t,n){var r;Pe(e,Object(ze.a)({},"start"===n?"startBinding":"endBinding",Object(V.a)({elementId:t.id},zt(e,t,n)))),Pe(t,{boundElementIds:Object(w.a)(new Set([].concat(Object(w.a)(null!==(r=t.boundElementIds)&&void 0!==r?r:[]),[e.id])))})},Pt=function(e,t,n){var r=e["start"===n?"endBinding":"startBinding"];return Dt(e,null===r||void 0===r?void 0:r.elementId,t)},Dt=function(e,t,n){return t===n.id&&e.points.length<3},Rt=function(e,t){var n="start"===t?"startBinding":"endBinding",r=e[n];return null==r?null:(Pe(e,Object(ze.a)({},n,null)),r.elementId)},Bt=function(e,t){return function(e,t){for(var n=null,r=e.length-1;r>=0;--r){var a=e[r];if(!a.isDeleted&&t(a)){n=a;break}}return n}(t.getElements(),(function(t){return Q(t)&&ht(t,e)}))},zt=function(e,t,n){var r="start"===n?-1:1,a=-1===r?0:e.points.length-1,o=a-r,i=Ct.getPointAtIndexGlobalCoordinates(e,a),c=Ct.getPointAtIndexGlobalCoordinates(e,o);return{focus:Et(t,c,i),gap:Math.max(1,bt(t,i))}},_t=function(e){return e.filter((function(e){return!e.isDeleted}))},Ft=function(e){return!e.isDeleted},Yt=function(e){return _t(e).map((function(e){return K(e.type)?Object(V.a)(Object(V.a)({},e),{},{lastCommittedPoint:null}):e}))},Gt=function(e){return Yt(e)},Ut=n(18),Wt=n(20),Xt=n(36),Ht=(Error,function(e,t){var n,r,a,o,i,c,l,s,u={type:e.type,version:e.version||1,versionNonce:null!==(n=e.versionNonce)&&void 0!==n?n:0,isDeleted:null!==(r=e.isDeleted)&&void 0!==r&&r,id:e.id||Te(),fillStyle:e.fillStyle||"hachure",strokeWidth:e.strokeWidth||1,strokeStyle:null!==(a=e.strokeStyle)&&void 0!==a?a:"solid",roughness:null!==(o=e.roughness)&&void 0!==o?o:1,opacity:null==e.opacity?100:e.opacity,angle:e.angle||0,x:e.x||0,y:e.y||0,strokeColor:e.strokeColor,backgroundColor:e.backgroundColor,width:e.width||0,height:e.height||0,seed:null!==(i=e.seed)&&void 0!==i?i:1,groupIds:null!==(c=e.groupIds)&&void 0!==c?c:[],strokeSharpness:null!==(l=e.strokeSharpness)&&void 0!==l?l:K(e.type)?"round":"sharp",boundElementIds:null!==(s=e.boundElementIds)&&void 0!==s?s:[]};return Object(V.a)(Object(V.a)(Object(V.a)({},u),function(e){var t={width:e.width,height:e.height,x:e.x,y:e.y};if(e.width<0){var n=Math.abs(e.width);t.width=n,t.x=e.x-n}if(e.height<0){var r=Math.abs(e.height);t.height=r,t.y=e.y-r}return t}(u)),t)}),Vt=function(e){var t;switch(e.type){case"text":var n=e.fontSize,r=e.fontFamily;if("font"in e){var a=e.font.split(" "),o=Object(d.a)(a,2),i=o[0],c=o[1];n=parseInt(i,10),r=function(e){for(var t=0,n=Object.entries(x.g);t<n.length;t++){var r=Object(d.a)(n[t],2),a=r[0];if(r[1].includes(e))return parseInt(a)}return x.c}(c)}return Ht(e,{fontSize:n,fontFamily:r,text:null!==(t=e.text)&&void 0!==t?t:"",baseline:e.baseline,textAlign:e.textAlign||x.e,verticalAlign:e.verticalAlign||x.f});case"draw":case"line":case"arrow":var l=e.startArrowhead,s=void 0===l?null:l,u=e.endArrowhead,h=void 0===u?"arrow"===e.type?"arrow":null:u;return Ht(e,{startBinding:e.startBinding,endBinding:e.endBinding,points:!Array.isArray(e.points)||e.points.length<2?[[0,0],[e.width,e.height]]:e.points,lastCommittedPoint:null,startArrowhead:s,endArrowhead:h});case"ellipse":case"rectangle":case"diamond":return Ht(e,{})}},Jt=function(e){return(e||[]).reduce((function(e,t){if("selection"!==t.type&&!Re(t)){var n=Vt(t);n&&e.push(n)}return e}),[])},Zt=function(e,t){e=e||{};var n,r=U(),a={},o=Object(m.a)(Object.entries(r));try{for(o.s();!(n=o.n()).done;){var i=Object(d.a)(n.value,2),c=i[0],l=i[1],s=e[c],u=t?t[c]:void 0;a[c]=void 0!==s?s:void 0!==u?u:l}}catch(h){o.e(h)}finally{o.f()}return Object(V.a)(Object(V.a)({},a),{},{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0,zoom:"number"===typeof e.zoom?{value:e.zoom,translation:r.zoom.translation}:e.zoom||r.zoom})},Kt=function(e,t){return{elements:Jt(null===e||void 0===e?void 0:e.elements),appState:Zt(null===e||void 0===e?void 0:e.appState,t||null)}},$t=function(){var e=Object(u.a)(s.a.mark((function e(t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("image/png"!==t.type){e.next=18;break}return e.prev=1,e.next=4,Promise.all([n.e(34),n.e(30)]).then(n.bind(null,117));case 4:return e.next=6,e.sent.decodePngMetadata(t);case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(1),"INVALID"!==e.t0.message){e.next=15;break}throw new Error(Y("alerts.imageDoesNotContainScene"));case 15:throw new Error(Y("alerts.cannotRestoreFromImage"));case 16:e.next=43;break;case 18:if(!("text"in Blob)){e.next=24;break}return e.next=21,t.text();case 21:r=e.sent,e.next=27;break;case 24:return e.next=26,new Promise((function(e){var n=new FileReader;n.readAsText(t,"utf8"),n.onloadend=function(){n.readyState===FileReader.DONE&&e(n.result)}}));case 26:r=e.sent;case 27:if("image/svg+xml"!==t.type){e.next=43;break}return e.prev=28,e.next=31,Promise.all([n.e(34),n.e(30)]).then(n.bind(null,117));case 31:return e.next=33,e.sent.decodeSvgMetadata({svg:r});case 33:return e.abrupt("return",e.sent);case 36:if(e.prev=36,e.t1=e.catch(28),"INVALID"!==e.t1.message){e.next=42;break}throw new Error(Y("alerts.imageDoesNotContainScene"));case 42:throw new Error(Y("alerts.cannotRestoreFromImage"));case 43:return e.abrupt("return",r);case 44:case"end":return e.stop()}}),e,null,[[1,9],[28,36]])})));return function(t){return e.apply(this,arguments)}}(),qt=function(e){var t;if("string"===typeof e)t=e;else{if(e.type)return e.type;t=e.name||""}return/\.(excalidraw|json)$/.test(t)?"application/json":/\.png$/.test(t)?"image/png":/\.jpe?g$/.test(t)?"image/jpeg":/\.svg$/.test(t)?"image/svg+xml":""},Qt=function(){var e=Object(u.a)(s.a.mark((function e(t,n){var r,a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$t(t);case 2:if(r=e.sent,e.prev=3,"excalidraw"===(a=JSON.parse(r)).type){e.next=7;break}throw new Error(Y("alerts.couldNotLoadInvalidFile"));case 7:return o=Kt({elements:Gt(a.elements||[]),appState:Object(V.a)(Object(V.a)({appearance:null===n||void 0===n?void 0:n.appearance,fileHandle:t.handle&&["application/json",x.i.excalidraw].includes(qt(t))?t.handle:null},H(a.appState||{})),n?Fe(a.elements||[],n):{})},n),D("io","load",qt(t)),e.abrupt("return",o);case 12:throw e.prev=12,e.t0=e.catch(3),console.error(e.t0.message),new Error(Y("alerts.couldNotLoadInvalidFile"));case 16:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t,n){return e.apply(this,arguments)}}(),en=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$t(t);case 2:if(n=e.sent,"excalidrawlib"===(r=JSON.parse(n)).type){e.next=6;break}throw new Error(Y("alerts.couldNotLoadInvalidFile"));case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),tn=function(){function e(){Object(ke.a)(this,e)}return Object(je.a)(e,null,[{key:"importLibrary",value:function(){var t=Object(u.a)(s.a.mark((function t(n){var r,a,o,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,en(n);case 2:if((r=t.sent)&&r.library){t.next=5;break}return t.abrupt("return");case 5:return a=function(e,t){return!e.find((function(e){return e.length===t.length&&e.every((function(e,n){return e.id===t[n].id&&e.versionNonce===t[n].versionNonce}))}))},t.next=8,e.loadLibrary();case 8:o=t.sent,i=r.library.reduce((function(e,t){var n=_t(Jt(t));return a(o,n)&&e.push(n),e}),[]),e.saveLibrary([].concat(Object(w.a)(o),Object(w.a)(i)));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),e}();tn.libraryCache=null,tn.resetLibrary=function(){tn.libraryCache=null,localStorage.removeItem(x.k.LOCAL_STORAGE_LIBRARY)},tn.loadLibrary=function(){return new Promise(function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!tn.libraryCache){e.next=2;break}return e.abrupt("return",t(JSON.parse(JSON.stringify(tn.libraryCache))));case 2:if(e.prev=2,n=localStorage.getItem(x.k.LOCAL_STORAGE_LIBRARY)){e.next=6;break}return e.abrupt("return",t([]));case 6:r=JSON.parse(n).map((function(e){return Jt(e)})),tn.libraryCache=JSON.parse(JSON.stringify(r)),t(r),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0),t([]);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}())},tn.saveLibrary=function(e){var t=tn.libraryCache;try{var n=JSON.stringify(e);tn.libraryCache=JSON.parse(n),localStorage.setItem(x.k.LOCAL_STORAGE_LIBRARY,n)}catch(r){tn.libraryCache=t,console.error(r)}};var nn=function(){var e=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.a)({description:"Excalidraw files",extensions:[".json",".excalidraw",".png",".svg"],mimeTypes:["application/json","image/png","image/svg+xml"]});case 2:return n=e.sent,e.abrupt("return",Qt(n,t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),rn=function(e){return"object"===typeof e&&e&&"excalidrawlib"===e.type&&1===e.version},an=/#json=([0-9]+),?([a-zA-Z0-9_-]*)|^http.*\.excalidrawlib$/,on=function(e){var t=e.svgList,n=e.loadDataList,o=Object(a.useState)(!1),i=Object(d.a)(o,2),c=i[0],l=i[1],m=Object(a.useState)(!1),v=Object(d.a)(m,2),w=v[0],y=v[1],x=Object(a.useState)(!1),S=Object(d.a)(x,2),k=S[0],j=S[1],O=Object(a.useState)(""),E=Object(d.a)(O,2),A=E[0],M=E[1],C=Object(a.useState)(),I=Object(d.a)(C,2),N=I[0],L=I[1];Object(a.useEffect)((function(){L(void 0)}),[t]),Object(a.useEffect)((function(){t.forEach((function(e){var t=e.svg;w?t.pauseAnimations():t.unpauseAnimations()}))}),[t,w]),Object(a.useEffect)((function(){var e=window.location.hash.slice(1);"no"!==new URLSearchParams(e).get("toolbar")?l(!0):l("never")}),[]);var T=function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nn(void 0);case 2:t=e.sent,n([t]);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(u.a)(s.a.mark((function e(){var t,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.a)({description:"Excalidraw library files",extensions:[".json",".excalidrawlib"],mimeTypes:["application/json"]});case 2:return t=e.sent,e.next=5,en(t);case 5:if((r=e.sent)&&r.library){e.next=9;break}return window.alert("Unable to load library"),e.abrupt("return");case 9:a=r.library.map((function(e){return _t(Jt(e))})),n(a.map((function(e){return{elements:e}})));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=Object(a.useCallback)((function(){t.length&&y((function(e){return!e}))}),[t]),R=Object(a.useCallback)((function(){t.forEach((function(e){e.svg.setCurrentTime(0)}))}),[t]);Object(a.useEffect)((function(){var e=function(e){"p"===e.key.toLowerCase()?D():"r"===e.key.toLowerCase()?R():"q"===e.key.toLowerCase()?l((function(e){return"boolean"===typeof e?!e:e})):l((function(e){return"boolean"===typeof e||e}))};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[D,R]);var B=function(){var e=Object(u.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return");case 2:if(!N){e.next=6;break}return e.next=5,b(N);case 5:return e.abrupt("return");case 6:return j(!0),l(!1),e.prev=8,e.next=11,g(t);case 11:n=e.sent,L(n),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8),console.log(e.t0);case 18:l(!0),j(!1);case 20:case"end":return e.stop()}}),e,null,[[8,15]])})));return function(){return e.apply(this,arguments)}}();return!0!==c?null:Object(r.jsxs)("div",{className:"Toolbar",children:[Object(r.jsxs)("div",{className:"Toolbar-loader",children:[Object(r.jsx)("button",{type:"button",onClick:T,children:"Load File"}),Object(r.jsx)("span",{children:"OR"}),Object(r.jsx)("button",{type:"button",onClick:P,children:"Load Library"}),Object(r.jsx)("span",{children:"OR"}),Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=an.exec(A);t?(t[1]?window.location.hash=t[0]:window.location.hash="library=".concat(t[0]),window.location.reload()):window.alert("Invalid link")},children:[Object(r.jsx)("input",{placeholder:"Enter link...",value:A,onChange:function(e){return M(e.target.value)}}),Object(r.jsx)("button",{type:"submit",disabled:!an.test(A),children:"Animate!"})]})]}),!!t.length&&Object(r.jsxs)("div",{className:"Toolbar-controller",children:[Object(r.jsx)("button",{type:"button",onClick:D,children:w?"Play (P)":"Pause (P)"}),Object(r.jsx)("button",{type:"button",onClick:R,children:"Reset (R)"}),Object(r.jsx)("button",{type:"button",onClick:function(){l((function(e){return"boolean"!==typeof e&&e}))},children:"Hide Toolbar (Q)"}),Object(r.jsx)("button",{type:"button",onClick:function(){t.length&&t.forEach((function(e){var t=e.svg;f(t)}))},children:"Export to SVG"}),Object(r.jsx)("button",{type:"button",onClick:B,disabled:k,children:k?"Processing...":N?"Export to WebM":"Prepare WebM"})]}),Object(r.jsx)(p,{link:"https://github.com/dai-shi/excalidraw-animate",size:40})]})},cn=(n(47),function(e){var t=e.svgList,n=Object(a.useRef)(null);Object(a.useEffect)((function(){return t.forEach((function(e){var t=e.svg;n.current&&n.current.appendChild(t)})),function(){t.forEach((function(e){e.svg.remove()}))}}),[t]),Object(a.useEffect)((function(){var e=window.location.hash.slice(1);if("no"===new URLSearchParams(e).get("autoplay")&&n.current){var r=n.current,a=function(){t.forEach((function(e){var t=e.svg;t.setCurrentTime(0),t.unpauseAnimations()}))};return r.addEventListener("click",a),function(){r.removeEventListener("click",a)}}}),[t]);var o=Math.ceil(Math.sqrt(t.length)),i="repeat(".concat(o,", ").concat(100/o,"%)");return Object(r.jsx)("div",{className:"Viewer",style:{gridTemplateColumns:i,gridTemplateRows:i},ref:n})}),ln=function(e,t){return window.crypto.subtle.importKey("jwk",{alg:"A128GCM",ext:!0,k:e,key_ops:["encrypt","decrypt"],kty:"oct"},{name:"AES-GCM",length:128},!1,[t])},sn=function(){var e=Object(u.a)(s.a.mark((function e(t,n){var r,a,o,i,c,l,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(n?"".concat("https://json.excalidraw.com/api/v2/").concat(t):"".concat("https://json.excalidraw.com/api/v1/").concat(t,".json"));case 3:if((r=e.sent).ok){e.next=7;break}return window.alert(Y("alerts.importBackendFailed")),e.abrupt("return",{});case 7:if(!n){e.next=22;break}return e.next=10,r.arrayBuffer();case 10:return o=e.sent,e.next=13,ln(n,"decrypt");case 13:return i=e.sent,c=new Uint8Array(12),e.next=17,window.crypto.subtle.decrypt({name:"AES-GCM",iv:c},i,o);case 17:l=e.sent,u=new window.TextDecoder("utf-8").decode(new Uint8Array(l)),a=JSON.parse(u),e.next=25;break;case 22:return e.next=24,r.json();case 24:a=e.sent;case 25:return D("action","import"),e.abrupt("return",{elements:a.elements||null,appState:a.appState||null});case 29:return e.prev=29,e.t0=e.catch(0),window.alert(Y("alerts.importBackendFailed")),console.error(e.t0),e.abrupt("return",{});case 34:case"end":return e.stop()}}),e,null,[[0,29]])})));return function(t,n){return e.apply(this,arguments)}}(),un=function(){var e=Object(u.a)(s.a.mark((function e(t,n,r){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t){e.next=9;break}return e.t0=Kt,e.next=4,sn(t,n);case 4:e.t1=e.sent,e.t2=null===r||void 0===r?void 0:r.appState,a=(0,e.t0)(e.t1,e.t2),e.next=10;break;case 9:a=Kt(r||null,null);case 10:return e.abrupt("return",{elements:a.elements,appState:a.appState,commitToHistory:!1});case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),dn=function(e,t){var n=t.exportBackground,r=t.exportPadding,a=void 0===r?10:r,o=t.viewBackgroundColor,i=t.scale,c=void 0===i?1:i,l=t.shouldAddWatermark,s=t.metadata,u=void 0===s?"":s,h=hn(e,l),p=fn(h,a,l),f=Object(d.a)(p,4),b=f[0],g=f[1],m=f[2],v=f[3],w=document.createElementNS(S,"svg");if(w.setAttribute("version","1.1"),w.setAttribute("xmlns",S),w.setAttribute("viewBox","0 0 ".concat(m," ").concat(v)),w.setAttribute("width","".concat(m*c)),w.setAttribute("height","".concat(v*c)),w.innerHTML="\n  ".concat("\x3c!-- svg-source:excalidraw --\x3e","\n  ").concat(u,'\n  <defs>\n    <style>\n      @font-face {\n        font-family: "Virgil";\n        src: url("https://excalidraw.com/FG_Virgil.woff2");\n      }\n      @font-face {\n        font-family: "Cascadia";\n        src: url("https://excalidraw.com/Cascadia.woff2");\n      }\n    </style>\n  </defs>\n  '),n&&o){var y=w.ownerDocument.createElementNS(S,"rect");y.setAttribute("x","0"),y.setAttribute("y","0"),y.setAttribute("width","".concat(m)),y.setAttribute("height","".concat(v)),y.setAttribute("fill",o),w.appendChild(y)}return function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.offsetX,o=void 0===a?0:a,i=r.offsetY,c=void 0===i?0:i;n&&e.forEach((function(e){e.isDeleted||Se(e,t,n,e.x+o,e.y+c)}))}(h,ce.a.svg(w),w,{offsetX:-b+a,offsetY:-g+a}),w},hn=function(e,t){var n=Object(w.a)(e);if(t){var r=pe(e),a=Object(d.a)(r,4),o=a[2],i=a[3];n=[].concat(Object(w.a)(n),[pn(o,i)])}return n},pn=function(e,t){return function(e){var t=A(e.text,E(e)),n=Ge(e,t);return De(Object(V.a)(Object(V.a)({},Ye("text",e)),{},{text:e.text,fontSize:e.fontSize,fontFamily:e.fontFamily,textAlign:e.textAlign,verticalAlign:e.verticalAlign,x:e.x-n.x,y:e.y-n.y,width:t.width,height:t.height,baseline:t.baseline}),{})}({text:Y("labels.madeWithExcalidraw"),fontSize:16,fontFamily:x.c,textAlign:"right",verticalAlign:x.f,x:e,y:t+16,strokeColor:v.gray[5],backgroundColor:"transparent",fillStyle:"hachure",strokeWidth:1,strokeStyle:"solid",roughness:1,opacity:100,strokeSharpness:"sharp"})},fn=function(e,t,n){var r=pe(e),a=Object(d.a)(r,4),o=a[0],i=a[1],c=a[2],l=a[3];return[o,i,M(o,c)+2*t,M(i,l)+t+(n?0:t)]},bn=function(e,t,n,r){for(var a,o,i=t.getAttribute("d")||"",c=(null===(a=i.match(/M/g))||void 0===a?void 0:a.length)||0,l=((null===(o=i.match(/C/g))||void 0===o?void 0:o.length)||0)/c,s=i,u=function(a){var o=i.replace(new RegExp(["M(\\S+) (\\S+)","((?: C\\S+ \\S+, \\S+ \\S+, \\S+ \\S+){","".concat(a),"})","(?: C\\S+ \\S+, \\S+ \\S+, \\S+ \\S+){1,}"].join(""),"g"),(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[3]?t[3].match(/.* (\S+) (\S+)$/).slice(1,3):[t[1],t[2]],o=Object(d.a)(r,2),i=o[0],c=o[1];return"M".concat(t[1]," ").concat(t[2]).concat(t[3])+" C".concat(i," ").concat(c,", ").concat(i," ").concat(c,", ").concat(i," ").concat(c).repeat(l-a)}));0===a&&t.setAttribute("d",o);var c=e.ownerDocument.createElementNS(S,"animate");c.setAttribute("attributeName","d"),c.setAttribute("from",o),c.setAttribute("to",s),c.setAttribute("begin","".concat(n+a*(r/l),"ms")),c.setAttribute("dur","".concat(r/l,"ms")),c.setAttribute("fill","freeze"),t.appendChild(c),s=o},h=l-1;h>=0;h-=1)u(h)},gn=function(e,t,n,r){var a=t.getAttribute("d")||"";if(a.includes("C"))bn(e,t,n,r);else{var o=a.replace(new RegExp(["M(\\S+) (\\S+)","((?: L\\S+ \\S+){1,})"].join("")),(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"M".concat(t[1]," ").concat(t[2])+t[3].replace(/L\S+ \S+/g,"L".concat(t[1]," ").concat(t[2]))}));t.setAttribute("d",o);var i=e.ownerDocument.createElementNS(S,"animate");i.setAttribute("attributeName","d"),i.setAttribute("from",o),i.setAttribute("to",a),i.setAttribute("begin","".concat(n,"ms")),i.setAttribute("dur","".concat(r,"ms")),i.setAttribute("fill","freeze"),t.appendChild(i)}},mn=function(e,t,n,r){var a,o,i,c,l=t.getAttribute("d")||"",s=(null===(a=l.match(/M/g))||void 0===a?void 0:a.length)||0,u=(null===(o=l.match(/C/g))||void 0===o?void 0:o.length)||0;s===u+1&&(s=(null===(i=(l=l.replace(/^M\S+ \S+ M/,"M")).match(/M/g))||void 0===i?void 0:i.length)||0,u=(null===(c=l.match(/C/g))||void 0===c?void 0:c.length)||0);if(s!==u)throw new Error("unexpected m/c counts");for(var h=s/2,p=l,f=function(a){var o=l.replace(new RegExp(["((?:","M(\\S+) (\\S+) C\\S+ \\S+, \\S+ \\S+, \\S+ \\S+ ?".repeat(2),"){","".concat(a),"})","M(\\S+) (\\S+) C\\S+ \\S+, \\S+ \\S+, \\S+ \\S+ ?".repeat(2),".*"].join("")),(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"".concat(t[1])+Object(w.a)(Array(2).keys()).map((function(e){var n=t.slice(6+2*e),r=Object(d.a)(n,2),a=r[0],o=r[1];return"M".concat(a," ").concat(o," C").concat(a," ").concat(o,", ").concat(a," ").concat(o,", ").concat(a," ").concat(o," ")})).join("").repeat(h-a)}));0===a&&t.setAttribute("d",o);var i=e.ownerDocument.createElementNS(S,"animate");i.setAttribute("attributeName","d"),i.setAttribute("from",o),i.setAttribute("to",p),i.setAttribute("begin","".concat(n+a*(r/h),"ms")),i.setAttribute("dur","".concat(r/h,"ms")),i.setAttribute("fill","freeze"),t.appendChild(i),p=o},b=h-1;b>=0;b-=1)f(b)},vn=0,wn=function(e,t,n,r,a){var o="sharp"!==n?bn:mn,i=t.childNodes;i[0].getAttribute("fill-rule")?(o(e,i[0].childNodes[1],r,.75*a),r+=.75*a,gn(e,i[0].childNodes[0],r,.25*a)):o(e,i[0].childNodes[0],r,a)},yn=function(e,t,n,r,a){var o=t.childNodes,i=o.length;o.forEach((function(t){!function(e,t,n,r,a){var o;if("start"!==(n.getAttribute("text-anchor")||"start")){var i=n.getAttribute("opacity")||"1.0",c=e.ownerDocument.createElementNS(S,"animate");return c.setAttribute("attributeName","opacity"),c.setAttribute("from","0.0"),c.setAttribute("to",i),c.setAttribute("begin","".concat(r,"ms")),c.setAttribute("dur","".concat(a,"ms")),c.setAttribute("fill","freeze"),n.appendChild(c),void n.setAttribute("opacity","0.0")}var l=Number(n.getAttribute("x")||0),s=Number(n.getAttribute("y")||0);vn+=1;var u=e.ownerDocument.createElementNS(S,"path");u.setAttribute("id","pathForText"+vn);var d=e.ownerDocument.createElementNS(S,"animate");d.setAttribute("attributeName","d"),d.setAttribute("from","m".concat(l," ").concat(s," h0")),d.setAttribute("to","m".concat(l," ").concat(s," h").concat(t)),d.setAttribute("begin","".concat(r,"ms")),d.setAttribute("dur","".concat(a,"ms")),d.setAttribute("fill","freeze"),u.appendChild(d);var h=e.ownerDocument.createElementNS(S,"textPath");h.setAttribute("href","#pathForText"+vn),h.textContent=n.textContent,n.textContent=" ",null===(o=function(e,t){for(var n=e.childNodes,r=0;r<n.length;++r)if(n[r].tagName===t)return n[r];return null}(e,"defs"))||void 0===o||o.appendChild(u),n.appendChild(h)}(e,n,t,r,a/i),r+=a/i}))},xn=function(e,t,n,r,a,o,i){"line"===n?wn(e,t,r,o,i):"draw"===n?wn(e,t,"round",o,i):"arrow"===n?function(e,t,n,r,a){("sharp"!==n?bn:mn)(e,t.childNodes[0].childNodes[0],r,.6*a),r+=.6*a,bn(e,t.childNodes[1].childNodes[0],r,.2*a),r+=.2*a,bn(e,t.childNodes[2].childNodes[0],r,.2*a)}(e,t,r,o,i):"rectangle"===n||"diamond"===n?function(e,t,n,r){t.childNodes[1]?(mn(e,t.childNodes[1],n,.75*r),n+=.75*r,gn(e,t.childNodes[0],n,.25*r)):mn(e,t.childNodes[0],n,r)}(e,t,o,i):"ellipse"===n?function(e,t,n,r){t.childNodes[1]?(bn(e,t.childNodes[1],n,.75*r),n+=.75*r,gn(e,t.childNodes[0],n,.25*r)):bn(e,t.childNodes[0],n,r)}(e,t,o,i):"text"===n&&yn(e,t,a,o,i)},Sn=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r,a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:return n=e.sent,e.next=6,n.blob();case 6:return r=e.sent,e.t0=JSON,e.next=10,r.text();case 10:if(e.t1=e.sent,a=e.t0.parse.call(e.t0,e.t1),rn(a)){e.next=14;break}throw new Error;case 14:return e.next=16,en(r);case 16:if((o=e.sent)&&o.library){e.next=19;break}throw new Error;case 19:return e.abrupt("return",o.library.map((function(e){return _t(Jt(e))})));case 22:return e.prev=22,e.t2=e.catch(0),window.alert("Unable to load library"),e.abrupt("return",[]);case 26:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t){return e.apply(this,arguments)}}(),kn=function(){var e=Object(a.useState)(!0),t=Object(d.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)([]),i=Object(d.a)(o,2),c=i[0],l=i[1],h=Object(a.useCallback)((function(e){var t,n=e.map((function(e){var n=_t(e.elements),r=dn(n,(null===e||void 0===e?void 0:e.appState)||{exportBackground:!0,exportPadding:30,viewBackgroundColor:"white",shouldAddWatermark:!1}),a=function(e,t,n){var r=function(e,t){var n={},r=0;return e.childNodes.forEach((function(e){if("g"===e.tagName){var a=t[r].groupIds;if(a.length>=1){var o=a[0];n[o]=n[o]||[],n[o].push([e,r])}r+=1}})),n}(e,t),a=new Map,o=null!==n&&void 0!==n?n:1e3,i=0;return e.childNodes.forEach((function(n){if("g"===n.tagName){var c=t[i],l=c.type,s=c.strokeSharpness,u=c.width,h=c.groupIds;if(!a.has(n))if(h.length>=1){var p=h[0],f=r[p],b=5e3/(f.length+1);xn(e,n,l,s,u,o,b),o+=b,a.set(n,!0),f.forEach((function(n){var r=Object(d.a)(n,2),i=r[0],c=r[1],l=t[c],s=l.type,u=l.strokeSharpness,h=l.width;a.has(i)||(xn(e,i,s,u,h,o,b),o+=b,a.set(i,!0))})),delete r[p]}else xn(e,n,l,s,u,o,500),o+=500,a.set(n,!0);i+=1}})),{finishedMs:o+1e3}}(r,n,t);return console.log(r),t=a.finishedMs,{svg:r,finishedMs:a.finishedMs}}));return l(n),n}),[]);return Object(a.useEffect)((function(){Object(u.a)(s.a.mark((function e(){var t,n,a,o,i,c,l,u,p,f,b,g,m,v,w,y,x;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.location.hash.slice(1),n=new URLSearchParams(t),!(a=/([0-9]+),?([a-zA-Z0-9_-]*)/.exec(n.get("json")||""))){e.next=10;break}return o=Object(d.a)(a,3),i=o[1],c=o[2],e.next=7,un(i,c,null);case 7:l=e.sent,u=h([l]),p=Object(d.a)(u,1),f=p[0],b=f.svg,g=f.finishedMs,"no"===n.get("autoplay")&&b.setCurrentTime(g);case 10:if(!(m=/(.*\.excalidrawlib)/.exec(n.get("library")||""))){e.next=18;break}return v=Object(d.a)(m,2),w=v[1],e.next=15,Sn(w);case 15:y=e.sent,x=h(y.map((function(e){return{elements:e}}))),"no"===n.get("autoplay")&&x.forEach((function(e){var t=e.svg,n=e.finishedMs;t.setCurrentTime(n)}));case 18:r(!1);case 19:case"end":return e.stop()}}),e)})))()}),[h]),{loading:n,loadedSvgList:c,loadDataList:h}},jn=function(){var e=kn(),t=e.loading,n=e.loadedSvgList,a=e.loadDataList;return t?Object(r.jsx)("div",{children:"Loading..."}):Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(on,{svgList:n,loadDataList:a}),!!n.length&&Object(r.jsx)(cn,{svgList:n})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(jn,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},5:function(e,t,n){"use strict";n.d(t,"h",(function(){return a})),n.d(t,"j",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"g",(function(){return l})),n.d(t,"l",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"e",(function(){return h})),n.d(t,"f",(function(){return p})),n.d(t,"i",(function(){return f})),n.d(t,"k",(function(){return b}));var r,a=10,o=Math.PI/12,i={TEXT:"text",CROSSHAIR:"crosshair",GRABBING:"grabbing",POINTER:"pointer",MOVE:"move",AUTO:""};!function(e){e.COPY="copy",e.PASTE="paste",e.CUT="cut",e.KEYDOWN="keydown",e.KEYUP="keyup",e.MOUSE_MOVE="mousemove",e.RESIZE="resize",e.UNLOAD="unload",e.BLUR="blur",e.DRAG_OVER="dragover",e.DROP="drop",e.GESTURE_END="gestureend",e.BEFORE_UNLOAD="beforeunload",e.GESTURE_START="gesturestart",e.GESTURE_CHANGE="gesturechange",e.POINTER_MOVE="pointermove",e.POINTER_UP="pointerup",e.STATE_CHANGE="statechange",e.WHEEL="wheel",e.TOUCH_START="touchstart",e.TOUCH_END="touchend",e.HASHCHANGE="hashchange"}(r||(r={}));var c={SHAPE_ACTIONS_MENU:"App-menu__left"},l={1:"Virgil",2:"Helvetica",3:"Cascadia"},s="Segoe UI Emoji",u=20,d=1,h="left",p="top",f={excalidraw:"application/vnd.excalidraw+json",excalidrawlib:"application/vnd.excalidrawlib+json"},b={LOCAL_STORAGE_LIBRARY:"excalidraw-library"}}},[[48,32,33]]]);
//# sourceMappingURL=main.5d67735b.chunk.js.map