(this["webpackJsonpexcalidraw-animate"]=this["webpackJsonpexcalidraw-animate"]||[]).push([[35],{30:function(e){e.exports=JSON.parse('{"labels":{"paste":"Paste","pasteCharts":"Paste charts","selectAll":"Select all","multiSelect":"Add element to selection","moveCanvas":"Move canvas","cut":"Cut","copy":"Copy","copyAsPng":"Copy to clipboard as PNG","copyAsSvg":"Copy to clipboard as SVG","bringForward":"Bring forward","sendToBack":"Send to back","bringToFront":"Bring to front","sendBackward":"Send backward","delete":"Delete","copyStyles":"Copy styles","pasteStyles":"Paste styles","stroke":"Stroke","background":"Background","fill":"Fill","strokeWidth":"Stroke width","strokeStyle":"Stroke style","strokeStyle_solid":"Solid","strokeStyle_dashed":"Dashed","strokeStyle_dotted":"Dotted","sloppiness":"Sloppiness","opacity":"Opacity","textAlign":"Text align","edges":"Edges","sharp":"Sharp","round":"Round","arrowheads":"Arrowheads","arrowhead_none":"None","arrowhead_arrow":"Arrow","arrowhead_bar":"Bar","arrowhead_dot":"Dot","fontSize":"Font size","fontFamily":"Font family","onlySelected":"Only selected","withBackground":"With background","exportEmbedScene":"Embed scene into exported file","exportEmbedScene_details":"Scene data will be saved into the exported PNG/SVG file so that the scene can be restored from it.\\nWill increase exported file size.","addWatermark":"Add \\"Made with Excalidraw\\"","handDrawn":"Hand-drawn","normal":"Normal","code":"Code","small":"Small","medium":"Medium","large":"Large","veryLarge":"Very large","solid":"Solid","hachure":"Hachure","crossHatch":"Cross-hatch","thin":"Thin","bold":"Bold","left":"Left","center":"Center","right":"Right","extraBold":"Extra bold","architect":"Architect","artist":"Artist","cartoonist":"Cartoonist","fileTitle":"File name","colorPicker":"Color picker","canvasBackground":"Canvas background","drawingCanvas":"Drawing canvas","layers":"Layers","actions":"Actions","language":"Language","liveCollaboration":"Live collaboration","duplicateSelection":"Duplicate","untitled":"Untitled","name":"Name","yourName":"Your name","madeWithExcalidraw":"Made with Excalidraw","group":"Group selection","ungroup":"Ungroup selection","collaborators":"Collaborators","showGrid":"Show grid","addToLibrary":"Add to library","removeFromLibrary":"Remove from library","libraryLoadingMessage":"Loading library\u2026","libraries":"Browse libraries","loadingScene":"Loading scene\u2026","align":"Align","alignTop":"Align top","alignBottom":"Align bottom","alignLeft":"Align left","alignRight":"Align right","centerVertically":"Center vertically","centerHorizontally":"Center horizontally","distributeHorizontally":"Distribute horizontally","distributeVertically":"Distribute vertically","flipHorizontal":"Flip horizontal","flipVertical":"Flip vertical","viewMode":"View mode","toggleExportColorScheme":"Toggle export color scheme","share":"Share"},"buttons":{"clearReset":"Reset the canvas","export":"Export","exportToPng":"Export to PNG","exportToSvg":"Export to SVG","copyToClipboard":"Copy to clipboard","copyPngToClipboard":"Copy PNG to clipboard","scale":"Scale","save":"Save","saveAs":"Save as","load":"Load","getShareableLink":"Get shareable link","close":"Close","selectLanguage":"Select language","scrollBackToContent":"Scroll back to content","zoomIn":"Zoom in","zoomOut":"Zoom out","resetZoom":"Reset zoom","menu":"Menu","done":"Done","edit":"Edit","undo":"Undo","redo":"Redo","resetLibrary":"Reset library","createNewRoom":"Create new room","fullScreen":"Full screen","darkMode":"Dark mode","lightMode":"Light mode","zenMode":"Zen mode","exitZenMode":"Exit zen mode"},"alerts":{"clearReset":"This will clear the whole canvas. Are you sure?","couldNotCreateShareableLink":"Couldn\'t create shareable link.","couldNotCreateShareableLinkTooBig":"Couldn\'t create shareable link: the scene is too big","couldNotLoadInvalidFile":"Couldn\'t load invalid file","importBackendFailed":"Importing from backend failed.","cannotExportEmptyCanvas":"Cannot export empty canvas.","couldNotCopyToClipboard":"Couldn\'t copy to clipboard. Try using Chrome browser.","decryptFailed":"Couldn\'t decrypt data.","uploadedSecurly":"The upload has been secured with end-to-end encryption, which means that Excalidraw server and third parties can\'t read the content.","loadSceneOverridePrompt":"Loading external drawing will replace your existing content. Do you wish to continue?","collabStopOverridePrompt":"Stopping the session will overwrite your previous, locally stored drawing. Are you sure?\\n\\n(If you want to keep your local drawing, simply close the browser tab instead.)","errorLoadingLibrary":"There was an error loading the third party library.","errorAddingToLibrary":"Couldn\'t add item to the library","errorRemovingFromLibrary":"Couldn\'t remove item from the library","confirmAddLibrary":"This will add {{numShapes}} shape(s) to your library. Are you sure?","imageDoesNotContainScene":"Importing images isn\'t supported at the moment.\\n\\nDid you want to import a scene? This image does not seem to contain any scene data. Have you enabled this during export?","cannotRestoreFromImage":"Scene couldn\'t be restored from this image file","invalidSceneUrl":"Couldn\'t import scene from the supplied URL. It\'s either malformed, or doesn\'t contain valid Excalidraw JSON data.","resetLibrary":"This will clear your library. Are you sure?"},"toolBar":{"selection":"Selection","draw":"Free draw","rectangle":"Rectangle","diamond":"Diamond","ellipse":"Ellipse","arrow":"Arrow","line":"Line","text":"Text","library":"Library","lock":"Keep selected tool active after drawing"},"headings":{"canvasActions":"Canvas actions","selectedShapeActions":"Selected shape actions","shapes":"Shapes"},"hints":{"linearElement":"Click to start multiple points, drag for single line","freeDraw":"Click and drag, release when you\'re finished","text":"Tip: you can also add text by double-clicking anywhere with the selection tool","linearElementMulti":"Click on last point or press Escape or Enter to finish","lockAngle":"You can constrain angle by holding SHIFT","resize":"You can constrain proportions by holding SHIFT while resizing,\\nhold ALT to resize from the center","rotate":"You can constrain angles by holding SHIFT while rotating","lineEditor_info":"Double-click or press Enter to edit points","lineEditor_pointSelected":"Press Delete to remove point, CtrlOrCmd+D to duplicate, or drag to move","lineEditor_nothingSelected":"Select a point to move or remove, or hold Alt and click to add new points"},"canvasError":{"cannotShowPreview":"Cannot show preview","canvasTooBig":"The canvas may be too big.","canvasTooBigTip":"Tip: try moving the farthest elements a bit closer together."},"errorSplash":{"headingMain_pre":"Encountered an error. Try ","headingMain_button":"reloading the page.","clearCanvasMessage":"If reloading doesn\'t work, try ","clearCanvasMessage_button":"clearing the canvas.","clearCanvasCaveat":" This will result in loss of work ","trackedToSentry_pre":"The error with identifier ","trackedToSentry_post":" was tracked on our system.","openIssueMessage_pre":"We were very cautious not to include your scene information on the error. If your scene is not private, please consider following up on our ","openIssueMessage_button":"bug tracker.","openIssueMessage_post":" Please include information below by copying and pasting into the GitHub issue.","sceneContent":"Scene content:"},"roomDialog":{"desc_intro":"You can invite people to your current scene to collaborate with you.","desc_privacy":"Don\'t worry, the session uses end-to-end encryption, so whatever you draw will stay private. Not even our server will be able to see what you come up with.","button_startSession":"Start session","button_stopSession":"Stop session","desc_inProgressIntro":"Live-collaboration session is now in progress.","desc_shareLink":"Share this link with anyone you want to collaborate with:","desc_exitSession":"Stopping the session will disconnect you from the room, but you\'ll be able to continue working with the scene, locally. Note that this won\'t affect other people, and they\'ll still be able to collaborate on their version.","shareTitle":"Join a live collaboration session on Excalidraw"},"errorDialog":{"title":"Error"},"helpDialog":{"blog":"Read our blog","click":"click","curvedArrow":"Curved arrow","curvedLine":"Curved line","documentation":"Documentation","drag":"drag","editor":"Editor","github":"Found an issue? Submit","howto":"Follow our guides","or":"or","preventBinding":"Prevent arrow binding","shapes":"Shapes","shortcuts":"Keyboard shortcuts","textFinish":"Finish editing (text)","textNewLine":"Add new line (text)","title":"Help","view":"View","zoomToFit":"Zoom to fit all elements","zoomToSelection":"Zoom to selection"},"encrypted":{"tooltip":"Your drawings are end-to-end encrypted so Excalidraw\'s servers will never see them.","link":"Blog post on end-to-end encryption in Excalidraw"},"stats":{"angle":"Angle","element":"Element","elements":"Elements","height":"Height","scene":"Scene","selected":"Selected","storage":"Storage","title":"Stats for nerds","total":"Total","version":"Version","versionCopy":"Click to copy","versionNotAvailable":"Version not available","width":"Width"},"toast":{"copyStyles":"Copied styles.","copyToClipboard":"Copied to clipboard.","copyToClipboardAsPng":"Copied {{exportSelection}} to clipboard as PNG\\n({{exportColorScheme}})","fileSaved":"File saved.","fileSavedToFilename":"Saved to {filename}","canvas":"canvas","selection":"selection"}}')},31:function(e){e.exports=JSON.parse('{"ar-SA":85,"bg-BG":93,"ca-ES":100,"de-DE":100,"el-GR":98,"en":100,"es-ES":99,"fa-IR":88,"fi-FI":99,"fr-FR":100,"he-IL":89,"hi-IN":91,"hu-HU":81,"id-ID":100,"it-IT":100,"ja-JP":97,"kab-KAB":99,"ko-KR":92,"my-MM":76,"nb-NO":100,"nl-NL":100,"nn-NO":83,"oc-FR":100,"pa-IN":94,"pl-PL":95,"pt-BR":100,"pt-PT":100,"ro-RO":100,"ru-RU":98,"sk-SK":100,"sv-SE":100,"tr-TR":100,"uk-UA":99,"zh-CN":99,"zh-TW":99}')},32:function(e,t,n){e.exports={themeFilter:"invert(93%) hue-rotate(180deg)"}},4:function(e,t,n){"use strict";n.d(t,"l",(function(){return i})),n.d(t,"n",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"h",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"k",(function(){return d})),n.d(t,"p",(function(){return h})),n.d(t,"d",(function(){return p})),n.d(t,"c",(function(){return f})),n.d(t,"e",(function(){return b})),n.d(t,"g",(function(){return m})),n.d(t,"f",(function(){return v})),n.d(t,"m",(function(){return g})),n.d(t,"i",(function(){return w})),n.d(t,"j",(function(){return y})),n.d(t,"o",(function(){return x}));var r,o=n(32),a=n.n(o),i=8,c=Math.PI/12,l={TEXT:"text",CROSSHAIR:"crosshair",GRABBING:"grabbing",POINTER:"pointer",MOVE:"move",AUTO:""};!function(e){e.COPY="copy",e.PASTE="paste",e.CUT="cut",e.KEYDOWN="keydown",e.KEYUP="keyup",e.MOUSE_MOVE="mousemove",e.RESIZE="resize",e.UNLOAD="unload",e.BLUR="blur",e.DRAG_OVER="dragover",e.DROP="drop",e.GESTURE_END="gestureend",e.BEFORE_UNLOAD="beforeunload",e.GESTURE_START="gesturestart",e.GESTURE_CHANGE="gesturechange",e.POINTER_MOVE="pointermove",e.POINTER_UP="pointerup",e.STATE_CHANGE="statechange",e.WHEEL="wheel",e.TOUCH_START="touchstart",e.TOUCH_END="touchend",e.HASHCHANGE="hashchange",e.VISIBILITY_CHANGE="visibilitychange",e.SCROLL="scroll"}(r||(r={}));var s={TEST:"test",DEVELOPMENT:"development"},u={SHAPE_ACTIONS_MENU:"App-menu__left"},d={1:"Virgil",2:"Helvetica",3:"Cascadia"},h="Segoe UI Emoji",p=20,f=1,b="left",m="top",v="{version}",g={excalidraw:"application/vnd.excalidraw+json",excalidrawlib:"application/vnd.excalidrawlib+json"},w={excalidraw:"excalidraw",excalidrawClipboard:"excalidraw/clipboard",excalidrawLibrary:"excalidrawlib"},y=window.location.origin,x=a.a.themeFilter},41:function(e,t,n){},42:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){var r={"./ar-SA.json":[49,0],"./bg-BG.json":[50,1],"./ca-ES.json":[51,2],"./de-DE.json":[52,3],"./el-GR.json":[53,4],"./en.json":[30],"./es-ES.json":[54,5],"./fa-IR.json":[55,6],"./fi-FI.json":[56,7],"./fr-FR.json":[57,8],"./he-IL.json":[58,9],"./hi-IN.json":[59,10],"./hu-HU.json":[60,11],"./id-ID.json":[61,12],"./it-IT.json":[62,13],"./ja-JP.json":[63,14],"./kab-KAB.json":[64,15],"./ko-KR.json":[65,16],"./my-MM.json":[66,17],"./nb-NO.json":[67,18],"./nl-NL.json":[68,19],"./nn-NO.json":[69,20],"./oc-FR.json":[70,21],"./pa-IN.json":[71,22],"./percentages.json":[31],"./pl-PL.json":[72,23],"./pt-BR.json":[73,24],"./pt-PT.json":[74,25],"./ro-RO.json":[75,26],"./ru-RU.json":[76,27],"./sk-SK.json":[77,28],"./sv-SE.json":[78,29],"./tr-TR.json":[79,30],"./uk-UA.json":[80,31],"./zh-CN.json":[81,32],"./zh-TW.json":[82,33]};function o(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],o=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n.t(o,3)}))}o.keys=function(){return Object.keys(r)},o.id=46,e.exports=o},47:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var r=n(6),o=n(9),a=n.n(o),i=n(23),c=n.n(i),l=(n(41),n(42),n(2)),s=n.n(l),u=n(5),d=n(0),h=n(1),p=n(13),f=(n(44),n(45),function(e){var t=e.link,n=e.size,o=e.fill,a=e.color;return Object(r.jsx)("a",{href:t,className:"GitHubCorner-container","aria-label":"View source on GitHub",target:"_blank",rel:"noopener noreferrer",children:Object(r.jsxs)("svg",{width:n||80,height:n||80,viewBox:"0 0 250 250",style:{fill:o||"#151513",color:a||"#fff",position:"absolute",top:0,border:0,right:0},"aria-hidden":"true",children:[Object(r.jsx)("path",{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"}),Object(r.jsx)("path",{d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2",fill:"currentColor",style:{transformOrigin:"130px 106px"},className:"GitHubCorner-octo-arm"}),Object(r.jsx)("path",{d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z",fill:"currentColor",className:"GitHubCorner-octo-body"})]})})}),b=n(8),m=function(e){return[b.red[e],b.pink[e],b.grape[e],b.violet[e],b.indigo[e],b.blue[e],b.cyan[e],b.teal[e],b.green[e],b.lime[e],b.yellow[e],b.orange[e]]},v=([b.white,b.gray[0],b.gray[1]].concat(Object(h.a)(m(0))),["transparent",b.gray[4],b.gray[6]].concat(Object(h.a)(m(6))),[b.black,b.gray[8],b.gray[7]].concat(Object(h.a)(m(9))),n(4)),g=(/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),/^Win/.test(window.navigator.platform),"http://www.w3.org/2000/svg"),w=null,y=function(){if(w)return w;var e=new Date,t=e.getFullYear(),n="".concat(e.getMonth()+1).padStart(2,"0"),r="".concat(e.getDate()).padStart(2,"0"),o="".concat(e.getHours()).padStart(2,"0"),a="".concat(e.getMinutes()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(r,"-").concat(o).concat(a)},x=function(e){var t=e.fontFamily;return"".concat(v.k[t],", ").concat(v.p)},S=function(e){var t=e.fontSize,n=e.fontFamily;return"".concat(t,"px ").concat(x({fontFamily:n}))},k=function(e,t){var n=document.createElement("div"),r=document.body;n.style.position="absolute",n.style.whiteSpace="pre",n.style.font=t,r.appendChild(n),n.innerText=e.split("\n").map((function(e){return e||" "})).join("\n");var o=n.offsetWidth,a=n.offsetHeight,i=document.createElement("span");i.style.display="inline-block",i.style.overflow="hidden",i.style.width="1px",i.style.height="1px",n.appendChild(i);var c=i.offsetTop+i.offsetHeight;return document.body.removeChild(n),{width:o,height:a,baseline:c}},j=function(e,t){return Math.abs(e-t)},O=function(e,t){var n=e.clientX,r=e.clientY,o=t.zoom,a=t.offsetLeft,i=t.offsetTop,c=t.scrollX,l=t.scrollY,s=1/o.value;return{x:(n-o.translation.x-a)*s-c,y:(r-o.translation.y-i)*s-l}},E=function(e,t){var n=e.sceneX,r=e.sceneY,o=t.zoom,a=t.offsetLeft,i=t.offsetTop,c=t.scrollX,l=t.scrollY;return{x:(n+c+a)*o.value+o.translation.x,y:(r+l+i)*o.value+o.translation.y}},M=new RegExp("^[^".concat("A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02b8\u0300-\u0590\u0800-\u1fff\u2c00-\ufb1c\ufdfe-\ufe6f\ufefd-\uffff","]*[").concat("\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc","]")),A=function(e){return M.test(e)},C=function(e){var t=Object(d.a)(e,2);return{x:t[0],y:t[1]}},I=function(e,t,n,r){for(var o,a,i=t.getAttribute("d")||"",c=(null===(o=i.match(/M/g))||void 0===o?void 0:o.length)||0,l=((null===(a=i.match(/C/g))||void 0===a?void 0:a.length)||0)/c,s=i,u=function(o){var a=i.replace(new RegExp(["M(\\S+) (\\S+)","((?: C\\S+ \\S+, \\S+ \\S+, \\S+ \\S+){","".concat(o),"})","(?: C\\S+ \\S+, \\S+ \\S+, \\S+ \\S+){1,}"].join(""),"g"),(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[3]?t[3].match(/.* (\S+) (\S+)$/).slice(1,3):[t[1],t[2]],a=Object(d.a)(r,2),i=a[0],c=a[1];return"M".concat(t[1]," ").concat(t[2]).concat(t[3])+" C".concat(i," ").concat(c,", ").concat(i," ").concat(c,", ").concat(i," ").concat(c).repeat(l-o)}));0===o&&t.setAttribute("d",a);var c=e.ownerDocument.createElementNS(g,"animate");c.setAttribute("attributeName","d"),c.setAttribute("from",a),c.setAttribute("to",s),c.setAttribute("begin","".concat(n+o*(r/l),"ms")),c.setAttribute("dur","".concat(r/l,"ms")),c.setAttribute("fill","freeze"),t.appendChild(c),s=a},h=l-1;h>=0;h-=1)u(h)},N=function(e,t,n,r){var o=t.getAttribute("d")||"";if(o.includes("C"))I(e,t,n,r);else{var a=o.replace(new RegExp(["M(\\S+) (\\S+)","((?: L\\S+ \\S+){1,})"].join("")),(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"M".concat(t[1]," ").concat(t[2])+t[3].replace(/L\S+ \S+/g,"L".concat(t[1]," ").concat(t[2]))}));t.setAttribute("d",a);var i=e.ownerDocument.createElementNS(g,"animate");i.setAttribute("attributeName","d"),i.setAttribute("from",a),i.setAttribute("to",o),i.setAttribute("begin","".concat(n,"ms")),i.setAttribute("dur","".concat(r,"ms")),i.setAttribute("fill","freeze"),t.appendChild(i)}},T=function(e,t,n,r){var o,a,i,c,l=t.getAttribute("d")||"",s=(null===(o=l.match(/M/g))||void 0===o?void 0:o.length)||0,u=(null===(a=l.match(/C/g))||void 0===a?void 0:a.length)||0;s===u+1&&(s=(null===(i=(l=l.replace(/^M\S+ \S+ M/,"M")).match(/M/g))||void 0===i?void 0:i.length)||0,u=(null===(c=l.match(/C/g))||void 0===c?void 0:c.length)||0);if(s!==u)throw new Error("unexpected m/c counts");for(var p=Math.min(2,s),f=s/p,b=l,m=function(o){var a=l.replace(new RegExp(["((?:","M(\\S+) (\\S+) C\\S+ \\S+, \\S+ \\S+, \\S+ \\S+ ?".repeat(p),"){","".concat(o),"})","M(\\S+) (\\S+) C\\S+ \\S+, \\S+ \\S+, \\S+ \\S+ ?".repeat(p),".*"].join("")),(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"".concat(t[1])+Object(h.a)(Array(p).keys()).map((function(e){var n=t.slice(2+2*p+2*e),r=Object(d.a)(n,2),o=r[0],a=r[1];return"M".concat(o," ").concat(a," C").concat(o," ").concat(a,", ").concat(o," ").concat(a,", ").concat(o," ").concat(a," ")})).join("").repeat(f-o)}));0===o&&t.setAttribute("d",a);var i=e.ownerDocument.createElementNS(g,"animate");i.setAttribute("attributeName","d"),i.setAttribute("from",a),i.setAttribute("to",b),i.setAttribute("begin","".concat(n+o*(r/f),"ms")),i.setAttribute("dur","".concat(r/f,"ms")),i.setAttribute("fill","freeze"),t.appendChild(i),b=a},v=f-1;v>=0;v-=1)m(v)},L=0,P=function(e,t,n,r,o){var a="sharp"!==n?I:T,i=t.childNodes;i[0].getAttribute("fill-rule")?(a(e,i[0].childNodes[1],r,.75*o),r+=.75*o,N(e,i[0].childNodes[0],r,.25*o)):a(e,i[0].childNodes[0],r,o)},D=function(e,t,n,r,o){var a=t.childNodes,i=a.length;a.forEach((function(t){!function(e,t,n,r,o){var a;if("start"!==(n.getAttribute("text-anchor")||"start")){var i=n.getAttribute("opacity")||"1.0",c=e.ownerDocument.createElementNS(g,"animate");return c.setAttribute("attributeName","opacity"),c.setAttribute("from","0.0"),c.setAttribute("to",i),c.setAttribute("begin","".concat(r,"ms")),c.setAttribute("dur","".concat(o,"ms")),c.setAttribute("fill","freeze"),n.appendChild(c),void n.setAttribute("opacity","0.0")}var l=Number(n.getAttribute("x")||0),s=Number(n.getAttribute("y")||0);L+=1;var u=e.ownerDocument.createElementNS(g,"path");u.setAttribute("id","pathForText"+L);var d=e.ownerDocument.createElementNS(g,"animate");d.setAttribute("attributeName","d"),d.setAttribute("from","m".concat(l," ").concat(s," h0")),d.setAttribute("to","m".concat(l," ").concat(s," h").concat(t)),d.setAttribute("begin","".concat(r,"ms")),d.setAttribute("dur","".concat(o,"ms")),d.setAttribute("fill","freeze"),u.appendChild(d);var h=e.ownerDocument.createElementNS(g,"textPath");h.setAttribute("href","#pathForText"+L),h.textContent=n.textContent,n.textContent=" ",null===(a=function(e,t){for(var n=e.childNodes,r=0;r<n.length;++r)if(n[r].tagName===t)return n[r];return null}(e,"defs"))||void 0===a||a.appendChild(u),n.appendChild(h)}(e,n,t,r,o/i),r+=o/i}))},B=function(e,t,n,r,o,a,i){"line"===n?P(e,t,r,a,i):"draw"===n?P(e,t,"round",a,i):"arrow"===n?function(e,t,n,r,o){var a="sharp"!==n?I:T,i=t.childNodes.length;a(e,t.childNodes[0].childNodes[0],r,o/(i+2)*3),r+=o/(i+2)*3;for(var c=1;c<i;c+=1)for(var l=t.childNodes[c].childNodes.length,s=0;s<l;s+=1)I(e,t.childNodes[c].childNodes[s],r,o/(i+2)/l),r+=o/(i+2)/l}(e,t,r,a,i):"rectangle"===n||"diamond"===n?function(e,t,n,r){t.childNodes[1]?(T(e,t.childNodes[1],n,.75*r),n+=.75*r,N(e,t.childNodes[0],n,.25*r)):T(e,t.childNodes[0],n,r)}(e,t,a,i):"ellipse"===n?function(e,t,n,r){t.childNodes[1]?(I(e,t.childNodes[1],n,.75*r),n+=.75*r,N(e,t.childNodes[0],n,.25*r)):I(e,t.childNodes[0],n,r)}(e,t,a,i):"text"===n&&D(e,t,o,a,i)},R=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.getCurrentTime(),t.setCurrentTime(0),r=(new XMLSerializer).serializeToString(t),t.setCurrentTime(n),e.next=6,Object(p.b)(new Blob([r],{type:"image/svg+xml"}),{fileName:"excalidraw-animate.svg",extensions:[".svg"]});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.b)(new Blob([t],{type:"video/webm"}),{fileName:"excalidraw-animate.webm",extensions:[".webm"]});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(e){return new Promise(function(){var t=Object(u.a)(s.a.mark((function t(n,r){var o,a,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.mediaDevices.getDisplayMedia({video:{cursor:"never",displaySurface:"browser"}});case 3:o=t.sent,(a=new MediaRecorder(o)).ondataavailable=function(e){n(e.data)},i=0,e.forEach((function(e){var t=e.svg,n=e.finishedMs;i=Math.max(i,n),t.pauseAnimations(),t.setCurrentTime(0)})),a.start(),e.forEach((function(e){e.svg.unpauseAnimations()})),setTimeout((function(){a.stop(),o.getVideoTracks()[0].stop()}),i),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),r(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,n){return t.apply(this,arguments)}}())},_=n(7),U=n(30),Y=n(31),G={code:"en",label:"English"},W=[{code:"ar-SA",label:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",rtl:!0},{code:"bg-BG",label:"\u0411\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438"},{code:"ca-ES",label:"Catal\xe0"},{code:"de-DE",label:"Deutsch"},{code:"el-GR",label:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac"},{code:"es-ES",label:"Espa\xf1ol"},{code:"fa-IR",label:"\u0641\u0627\u0631\u0633\u06cc",rtl:!0},{code:"fi-FI",label:"Suomi"},{code:"fr-FR",label:"Fran\xe7ais"},{code:"he-IL",label:"\u05e2\u05d1\u05e8\u05d9\u05ea",rtl:!0},{code:"hi-IN",label:"\u0939\u093f\u0928\u094d\u0926\u0940"},{code:"hu-HU",label:"Magyar"},{code:"id-ID",label:"Bahasa Indonesia"},{code:"it-IT",label:"Italiano"},{code:"ja-JP",label:"\u65e5\u672c\u8a9e"},{code:"kab-KAB",label:"Taqbaylit"},{code:"ko-KR",label:"\ud55c\uad6d\uc5b4"},{code:"my-MM",label:"Burmese"},{code:"nb-NO",label:"Norsk bokm\xe5l"},{code:"nl-NL",label:"Nederlands"},{code:"nn-NO",label:"Norsk nynorsk"},{code:"oc-FR",label:"Occitan"},{code:"pa-IN",label:"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40"},{code:"pl-PL",label:"Polski"},{code:"pt-BR",label:"Portugu\xeas Brasileiro"},{code:"pt-PT",label:"Portugu\xeas"},{code:"ro-RO",label:"Rom\xe2n\u0103"},{code:"ru-RU",label:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439"},{code:"sk-SK",label:"Sloven\u010dina"},{code:"sv-SE",label:"Svenska"},{code:"tr-TR",label:"T\xfcrk\xe7e"},{code:"uk-UA",label:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430"},{code:"zh-CN",label:"\u7b80\u4f53\u4e2d\u6587"},{code:"zh-TW",label:"\u7e41\u9ad4\u4e2d\u6587"}].concat([G]).sort((function(e,t){return e.label>t.label?1:-1})).filter((function(e){return Y[e.code]>=85})),H="__test__";"production"===v.h.DEVELOPMENT&&W.unshift({code:H,label:"test language"},{code:"".concat(H,".rtl"),label:"\u202atest language (rtl)\u202c",rtl:!0});var X=G,V={},Z=function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(void 0===e[r])return;e=e[r]}if("string"===typeof e)return e},K=function(e,t){if(X.code.startsWith(H)){var n=t?"".concat(e,"(").concat(JSON.stringify(t).slice(1,-1),")"):e;return"\u202a[[".concat(n,"]]\u202c")}var r=e.split("."),o=Z(V,r)||Z(U,r);if(void 0===o)throw new Error("Can't find translation for ".concat(e));if(t)for(var a in t)o=o.replace("{{".concat(a,"}}"),t[a]);return o},J=function(){return{theme:"light",collaborators:new Map,currentChartType:"bar",currentItemBackgroundColor:"transparent",currentItemEndArrowhead:"arrow",currentItemFillStyle:"hachure",currentItemFontFamily:v.c,currentItemFontSize:v.d,currentItemLinearStrokeSharpness:"round",currentItemOpacity:100,currentItemRoughness:1,currentItemStartArrowhead:null,currentItemStrokeColor:b.black,currentItemStrokeSharpness:"sharp",currentItemStrokeStyle:"solid",currentItemStrokeWidth:1,currentItemTextAlign:v.e,cursorButton:"up",draggingElement:null,editingElement:null,editingGroupId:null,editingLinearElement:null,elementLocked:!1,elementType:"selection",errorMessage:null,exportBackground:!0,exportEmbedScene:!1,exportWithDarkMode:!1,fileHandle:null,gridSize:null,isBindingEnabled:!0,isLibraryOpen:!1,isLoading:!1,isResizing:!1,isRotating:!1,lastPointerDownWith:"mouse",multiElement:null,name:"".concat(K("labels.untitled"),"-").concat(y()),openMenu:null,pasteDialog:{shown:!1,data:null},previousSelectedElementIds:{},resizingElement:null,scrolledOutside:!1,scrollX:0,scrollY:0,selectedElementIds:{},selectedGroupIds:{},selectionElement:null,shouldAddWatermark:!1,shouldCacheIgnoreZoom:!1,showHelpDialog:!1,showStats:!1,startBoundElement:null,suggestedBindings:[],toastMessage:null,viewBackgroundColor:b.white,zenModeEnabled:!1,zoom:{value:1,translation:{x:0,y:0}},viewModeEnabled:!1}},q={theme:{browser:!0,export:!1},collaborators:{browser:!1,export:!1},currentChartType:{browser:!0,export:!1},currentItemBackgroundColor:{browser:!0,export:!1},currentItemEndArrowhead:{browser:!0,export:!1},currentItemFillStyle:{browser:!0,export:!1},currentItemFontFamily:{browser:!0,export:!1},currentItemFontSize:{browser:!0,export:!1},currentItemLinearStrokeSharpness:{browser:!0,export:!1},currentItemOpacity:{browser:!0,export:!1},currentItemRoughness:{browser:!0,export:!1},currentItemStartArrowhead:{browser:!0,export:!1},currentItemStrokeColor:{browser:!0,export:!1},currentItemStrokeSharpness:{browser:!0,export:!1},currentItemStrokeStyle:{browser:!0,export:!1},currentItemStrokeWidth:{browser:!0,export:!1},currentItemTextAlign:{browser:!0,export:!1},cursorButton:{browser:!0,export:!1},draggingElement:{browser:!1,export:!1},editingElement:{browser:!1,export:!1},editingGroupId:{browser:!0,export:!1},editingLinearElement:{browser:!1,export:!1},elementLocked:{browser:!0,export:!1},elementType:{browser:!0,export:!1},errorMessage:{browser:!1,export:!1},exportBackground:{browser:!0,export:!1},exportEmbedScene:{browser:!0,export:!1},exportWithDarkMode:{browser:!0,export:!1},fileHandle:{browser:!1,export:!1},gridSize:{browser:!0,export:!0},height:{browser:!1,export:!1},isBindingEnabled:{browser:!1,export:!1},isLibraryOpen:{browser:!1,export:!1},isLoading:{browser:!1,export:!1},isResizing:{browser:!1,export:!1},isRotating:{browser:!1,export:!1},lastPointerDownWith:{browser:!0,export:!1},multiElement:{browser:!1,export:!1},name:{browser:!0,export:!1},offsetLeft:{browser:!1,export:!1},offsetTop:{browser:!1,export:!1},openMenu:{browser:!0,export:!1},pasteDialog:{browser:!1,export:!1},previousSelectedElementIds:{browser:!0,export:!1},resizingElement:{browser:!1,export:!1},scrolledOutside:{browser:!0,export:!1},scrollX:{browser:!0,export:!1},scrollY:{browser:!0,export:!1},selectedElementIds:{browser:!0,export:!1},selectedGroupIds:{browser:!0,export:!1},selectionElement:{browser:!1,export:!1},shouldAddWatermark:{browser:!0,export:!1},shouldCacheIgnoreZoom:{browser:!0,export:!1},showHelpDialog:{browser:!1,export:!1},showStats:{browser:!0,export:!1},startBoundElement:{browser:!1,export:!1},suggestedBindings:{browser:!1,export:!1},toastMessage:{browser:!1,export:!1},viewBackgroundColor:{browser:!0,export:!0},width:{browser:!1,export:!1},zenModeEnabled:{browser:!0,export:!1},zoom:{browser:!0,export:!1},viewModeEnabled:{browser:!1,export:!1}},Q=function(e,t){var n,r={},o=Object(_.a)(Object.keys(e));try{for(o.s();!(n=o.n()).done;){var a=n.value,i=q[a];(null===i||void 0===i?void 0:i[t])&&(r[a]=e[a])}}catch(c){o.e(c)}finally{o.f()}return r},$=function(e){return Q(e,"export")},ee=n(3),te=function(e){return null!=e&&"text"===e.type},ne=function(e){return null!=e&&re(e.type)},re=function(e){return"arrow"===e||"line"===e||"draw"===e},oe=function(e){return null!=e&&ae(e.type)},ae=function(e){return"arrow"===e},ie=function(e){return null!=e&&("rectangle"===e.type||"diamond"===e.type||"ellipse"===e.type||"text"===e.type)},ce=(n(33),function(e,t,n,r,o){return[(e-n)*Math.cos(o)-(t-r)*Math.sin(o)+n,(e-n)*Math.sin(o)+(t-r)*Math.cos(o)+r]}),le=function(e,t,n,r){var o=n-e,a=r-t;return Math.hypot(o,a)},se=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(e.length>=3){var n=[e[0],e[e.length-1]],r=n[0],o=n[1],a=le(r[0],r[1],o[0],o[1]);return a<=v.l/t}return!1},ue=function(e,t,n){var r=e.length;if(r<3)return!1;for(var o=[Number.MAX_SAFE_INTEGER,n],a=[t,n],i=0,c=0;c<r;c++){var l=e[c],s=e[(c+1)%r];if(pe(l,s,a,o)){if(0===he(l,a,s))return de(l,a,s);i++}}return i%2===1},de=function(e,t,n){return t[0]<=Math.max(e[0],n[0])&&t[0]>=Math.min(e[0],n[0])&&t[1]<=Math.max(e[1],n[1])&&t[1]>=Math.min(e[1],n[1])},he=function(e,t,n){var r=(t[1]-e[1])*(n[0]-t[0])-(t[0]-e[0])*(n[1]-t[1]);return 0===r?0:r>0?1:2},pe=function(e,t,n,r){var o=he(e,t,n),a=he(e,t,r),i=he(n,r,e),c=he(n,r,t);return o!==a&&i!==c||(!(0!==o||!de(e,n,t))||(!(0!==a||!de(e,r,t))||(!(0!==i||!de(n,e,r))||!(0!==c||!de(n,t,r)))))},fe=n(15),be=function(e){return ne(e)?ge(e):[e.x,e.y,e.x+e.width,e.y+e.height]},me=function(e){var t,n=Object(_.a)(e.sets);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("path"===r.type)return r.ops}}catch(o){n.e(o)}finally{n.f()}return e.sets[0].ops},ve=function(e,t){var n=[0,0],r=e.reduce((function(e,r){var o=r.op,a=r.data;if("move"===o)n=a;else if("bcurveTo"===o){var i=[a[0],a[1]],c=[a[2],a[3]],l=[a[4],a[5]],s=n;n=l;for(var u=function(e,t){return Math.pow(1-e,3)*l[t]+3*e*Math.pow(1-e,2)*c[t]+3*Math.pow(e,2)*(1-e)*i[t]+s[t]*Math.pow(e,3)},h=0;h<=1;){var p=u(h,0),f=u(h,1);if(t){var b=t(p,f),m=Object(d.a)(b,2);p=m[0],f=m[1]}e.minY=Math.min(e.minY,f),e.minX=Math.min(e.minX,p),e.maxX=Math.max(e.maxX,p),e.maxY=Math.max(e.maxY,f),h+=.1}}return e}),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});return[r.minX,r.minY,r.maxX,r.maxY]},ge=function(e){if(e.points.length<2||!Ee(e)){var t=e.points.reduce((function(e,t){var n=Object(d.a)(t,2),r=n[0],o=n[1];return e.minY=Math.min(e.minY,o),e.minX=Math.min(e.minX,r),e.maxX=Math.max(e.maxX,r),e.maxY=Math.max(e.maxY,o),e}),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}),n=t.minX,r=t.minY,o=t.maxX,a=t.maxY;return[n+e.x,r+e.y,o+e.x,a+e.y]}var i=Ee(e),c=me(i[0]),l=ve(c),s=Object(d.a)(l,4),u=s[0],h=s[1],p=s[2],f=s[3];return[u+e.x,h+e.y,p+e.x,f+e.y]},we=function(e){var t=be(e),n=Object(d.a)(t,4),r=n[0],o=n[1],a=n[2],i=n[3],c=(r+a)/2,l=(o+i)/2;if(ne(e))return function(e,t,n){if(e.points.length<2||!Ee(e)){var r=e.points.reduce((function(r,o){var a=Object(d.a)(o,2),i=a[0],c=a[1],l=ce(e.x+i,e.y+c,t,n,e.angle),s=Object(d.a)(l,2);return i=s[0],c=s[1],r.minY=Math.min(r.minY,c),r.minX=Math.min(r.minX,i),r.maxX=Math.max(r.maxX,i),r.maxY=Math.max(r.maxY,c),r}),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});return[r.minX,r.minY,r.maxX,r.maxY]}var o=Ee(e),a=me(o[0]);return ve(a,(function(r,o){return ce(e.x+r,e.y+o,t,n,e.angle)}))}(e,c,l);if("diamond"===e.type){var s=ce(c,o,c,l,e.angle),u=Object(d.a)(s,2),h=u[0],p=u[1],f=ce(c,i,c,l,e.angle),b=Object(d.a)(f,2),m=b[0],v=b[1],g=ce(r,l,c,l,e.angle),w=Object(d.a)(g,2),y=w[0],x=w[1],S=ce(a,l,c,l,e.angle),k=Object(d.a)(S,2),j=k[0],O=k[1];return[Math.min(h,m,y,j),Math.min(p,v,x,O),Math.max(h,m,y,j),Math.max(p,v,x,O)]}if("ellipse"===e.type){var E=(a-r)/2,M=(i-o)/2,A=Math.cos(e.angle),C=Math.sin(e.angle),I=Math.hypot(E*A,M*C),N=Math.hypot(M*A,E*C);return[c-I,l-N,c+I,l+N]}var T=ce(r,o,c,l,e.angle),L=Object(d.a)(T,2),P=L[0],D=L[1],B=ce(r,i,c,l,e.angle),R=Object(d.a)(B,2),z=R[0],F=R[1],_=ce(a,i,c,l,e.angle),U=Object(d.a)(_,2),Y=U[0],G=U[1],W=ce(a,o,c,l,e.angle),H=Object(d.a)(W,2),X=H[0],V=H[1];return[Math.min(P,z,Y,X),Math.min(D,F,G,V),Math.max(P,z,Y,X),Math.max(D,F,G,V)]},ye=function(e){if(!e.length)return[0,0,0,0];var t=1/0,n=-1/0,r=1/0,o=-1/0;return e.forEach((function(e){var a=we(e),i=Object(d.a)(a,4),c=i[0],l=i[1],s=i[2],u=i[3];t=Math.min(t,c),r=Math.min(r,l),n=Math.max(n,s),o=Math.max(o,u)})),[t,r,n,o]},xe=function(e,t,n){var r=fe.a.generator(),o="sharp"===n?r.linearPath(t,Me(e)):r.curve(t,Me(e)),a=me(o),i=ve(a),c=Object(d.a)(i,4),l=c[0],s=c[1],u=c[2],h=c[3];return[l+e.x,s+e.y,u+e.x,h+e.y]},Se=(J(),[12,8]),ke=[3,6],je=new WeakMap,Oe=new WeakMap,Ee=function(e){return Oe.get(e)},Me=function(e){var t={seed:e.seed,strokeLineDash:"dashed"===e.strokeStyle?Se:"dotted"===e.strokeStyle?ke:void 0,disableMultiStroke:"solid"!==e.strokeStyle,strokeWidth:"solid"!==e.strokeStyle?e.strokeWidth+.5:e.strokeWidth,fillWeight:e.strokeWidth/2,hachureGap:4*e.strokeWidth,roughness:e.roughness,stroke:e.strokeColor};switch(e.type){case"rectangle":case"diamond":case"ellipse":return t.fillStyle=e.fillStyle,t.fill="transparent"===e.backgroundColor?void 0:e.backgroundColor,"ellipse"===e.type&&(t.curveFitting=1),t;case"line":case"draw":return se(e.points)&&(t.fillStyle=e.fillStyle,t.fill="transparent"===e.backgroundColor?void 0:e.backgroundColor),t;case"arrow":return t;default:throw new Error("Unimplemented type ".concat(e.type))}},Ae=function(e,t){var n=Oe.get(e)||null;if(!n){switch(je.delete(e),e.type){case"rectangle":if("round"===e.strokeSharpness){var r=e.width,o=e.height,a=.25*Math.min(r,o);n=t.path("M ".concat(a," 0 L ").concat(r-a," 0 Q ").concat(r," 0, ").concat(r," ").concat(a," L ").concat(r," ").concat(o-a," Q ").concat(r," ").concat(o,", ").concat(r-a," ").concat(o," L ").concat(a," ").concat(o," Q 0 ").concat(o,", 0 ").concat(o-a," L 0 ").concat(a," Q 0 0, ").concat(a," 0"),Me(e))}else n=t.rectangle(0,0,e.width,e.height,Me(e));break;case"diamond":var i=function(e){var t=Math.floor(e.width/2)+1,n=e.width,r=Math.floor(e.height/2)+1;return[t,0,n,r,t,e.height,0,r]}(e),c=Object(d.a)(i,8),l=c[0],s=c[1],u=c[2],p=c[3],f=c[4],b=c[5],m=c[6],v=c[7];n=t.polygon([[l,s],[u,p],[f,b],[m,v]],Me(e));break;case"ellipse":n=t.ellipse(e.width/2,e.height/2,e.width,e.height,Me(e));break;case"line":case"draw":case"arrow":var g=Me(e),w=e.points.length?e.points:[[0,0]];if(n="sharp"===e.strokeSharpness?g.fill?[t.polygon(w,g)]:[t.linearPath(w,g)]:[t.curve(w,g)],"arrow"===e.type){var y=e.startArrowhead,x=void 0===y?null:y,S=e.endArrowhead,k=void 0===S?"arrow":S,j=function(e,n,r,o){var a=function(e,t,n,r){var o=me(t[0]);if(o.length<1)return null;var a="start"===n?1:o.length-1,i=o[a].data,c=[i[4],i[5]],l=[i[2],i[3]],s=[i[0],i[1]],u=o[a-1],h=[0,0];"move"===u.op?h=u.data:"bcurveTo"===u.op&&(h=[u.data[4],u.data[5]]);var p=function(e,t){return Math.pow(1-e,3)*c[t]+3*e*Math.pow(1-e,2)*l[t]+3*Math.pow(e,2)*(1-e)*s[t]+h[t]*Math.pow(e,3)},f="start"===n?h:c,b=Object(d.a)(f,2),m=b[0],v=b[1],g=[p(.3,0),p(.3,1)],w=g[0],y=g[1],x=Math.hypot(m-w,v-y),S=(m-w)/x,k=(v-y)/x,j={arrow:30,bar:15,dot:15}[r],O=e.points.reduce((function(e,t,n,r){var o=Object(d.a)(t,2),a=o[0],i=o[1],c=n>0?r[n-1]:[0,0],l=Object(d.a)(c,2),s=l[0],u=l[1];return e+Math.hypot(a-s,i-u)}),0),E=Math.min(j,O/2),M=m-S*E,A=v-k*E;if("dot"===r)return[m,v,Math.hypot(A-v,M-m)];var C={arrow:20,bar:90}[r],I=ce(M,A,m,v,-C*Math.PI/180),N=Object(d.a)(I,2),T=N[0],L=N[1],P=ce(M,A,m,v,C*Math.PI/180),D=Object(d.a)(P,2);return[m,v,T,L,D[0],D[1]]}(e,n,r,o);if(null===a)return[];if("dot"===o){var i=Object(d.a)(a,3),c=i[0],l=i[1],s=i[2];return[t.circle(c,l,s,Object(ee.a)(Object(ee.a)({},g),{},{fill:e.strokeColor,fillStyle:"solid"}))]}var u=Object(d.a)(a,6),h=u[0],p=u[1],f=u[2],b=u[3],m=u[4],v=u[5];return"dotted"===e.strokeStyle?g.strokeLineDash=[3,4]:delete g.strokeLineDash,[t.line(f,b,h,p,g),t.line(m,v,h,p,g)]};if(null!==x){var O,E=j(e,n,"start",x);(O=n).push.apply(O,Object(h.a)(E))}if(null!==k){var M,A=j(e,n,"end",k);(M=n).push.apply(M,Object(h.a)(A))}}break;case"text":n=[]}Oe.set(e,n)}},Ce=function(e,t,n,r,o){var a=be(e),i=Object(d.a)(a,4),c=i[0],l=i[1],s=i[2],u=i[3],h=(s-c)/2-(e.x-c),p=(u-l)/2-(e.y-l),f=180*e.angle/Math.PI,b=t.generator;switch(e.type){case"selection":throw new Error("Selection rendering is not supported for SVG");case"rectangle":case"diamond":case"ellipse":Ae(e,b);var m=t.draw(Ee(e)),v=e.opacity/100;1!==v&&(m.setAttribute("stroke-opacity","".concat(v)),m.setAttribute("fill-opacity","".concat(v))),m.setAttribute("transform","translate(".concat(r||0," ").concat(o||0,") rotate(").concat(f," ").concat(h," ").concat(p,")")),n.appendChild(m);break;case"line":case"draw":case"arrow":Ae(e,b);var w=n.ownerDocument.createElementNS(g,"g"),y=e.opacity/100;Ee(e).forEach((function(n){var a=t.draw(n);1!==y&&(a.setAttribute("stroke-opacity","".concat(y)),a.setAttribute("fill-opacity","".concat(y))),a.setAttribute("transform","translate(".concat(r||0," ").concat(o||0,") rotate(").concat(f," ").concat(h," ").concat(p,")")),"line"!==e.type&&"draw"!==e.type||!se(e.points)||"transparent"===e.backgroundColor||a.setAttribute("fill-rule","evenodd"),w.appendChild(a)})),n.appendChild(w);break;default:if(!te(e))throw new Error("Unimplemented type ".concat(e.type));var S=e.opacity/100,k=n.ownerDocument.createElementNS(g,"g");1!==S&&(k.setAttribute("stroke-opacity","".concat(S)),k.setAttribute("fill-opacity","".concat(S))),k.setAttribute("transform","translate(".concat(r||0," ").concat(o||0,") rotate(").concat(f," ").concat(h," ").concat(p,")"));for(var j=e.text.replace(/\r\n?/g,"\n").split("\n"),O=e.height/j.length,E=e.height-e.baseline,M="center"===e.textAlign?e.width/2:"right"===e.textAlign?e.width:0,C=A(e.text)?"rtl":"ltr",I="center"===e.textAlign?"middle":"right"===e.textAlign||"rtl"===C?"end":"start",N=0;N<j.length;N++){var T=n.ownerDocument.createElementNS(g,"text");T.textContent=j[N],T.setAttribute("x","".concat(M)),T.setAttribute("y","".concat((N+1)*O-E)),T.setAttribute("font-family",x(e)),T.setAttribute("font-size","".concat(e.fontSize,"px")),T.setAttribute("fill",e.strokeColor),T.setAttribute("text-anchor",I),T.setAttribute("style","white-space: pre;"),T.setAttribute("direction",C),k.appendChild(T)}n.appendChild(k)}},Ie=n(10),Ne=n(11),Te=function(e){return"string"===typeof e},Le=function(){function e(){Object(Ie.a)(this,e),this.callbacks=new Set,this.nonDeletedElements=[],this.elements=[],this.elementsMap=new Map}return Object(Ne.a)(e,[{key:"getElementsIncludingDeleted",value:function(){return this.elements}},{key:"getElements",value:function(){return this.nonDeletedElements}},{key:"getElement",value:function(e){return this.elementsMap.get(e)||null}},{key:"getNonDeletedElement",value:function(e){var t=this.getElement(e);return t&&Vt(t)?t:null}},{key:"getNonDeletedElements",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.getNonDeletedElement(e);null!=r&&n.push(r)})),n}},{key:"replaceAllElements",value:function(t){var n=this;this.elements=t,this.elementsMap.clear(),t.forEach((function(t){n.elementsMap.set(t.id,t),e.mapElementToScene(t,n)})),this.nonDeletedElements=Xt(this.elements),this.informMutation()}},{key:"informMutation",value:function(){for(var e=0,t=Array.from(this.callbacks);e<t.length;e++){(0,t[e])()}}},{key:"addCallback",value:function(e){var t=this;if(this.callbacks.has(e))throw new Error;return this.callbacks.add(e),function(){if(!t.callbacks.has(e))throw new Error;t.callbacks.delete(e)}}},{key:"destroy",value:function(){var t=this;e.sceneMapById.forEach((function(n,r){n===t&&e.sceneMapById.delete(r)})),this.callbacks.clear()}}],[{key:"mapElementToScene",value:function(e,t){Te(e)?this.sceneMapById.set(e,t):this.sceneMapByElement.set(e,t)}},{key:"getScene",value:function(e){return Te(e)?this.sceneMapById.get(e)||null:this.sceneMapByElement.get(e)||null}}]),e}();Le.sceneMapByElement=new WeakMap,Le.sceneMapById=new Map;var Pe=Le,De=n(16),Be=n(35),Re=new De.a(Date.now()),ze=function(){return Math.floor(Re.next()*Math.pow(2,31))},Fe=function(){return Object(Be.a)()},_e=function(e,t){var n,r=!1,o=t.points;for(var a in"undefined"!==typeof o&&(t=Object(ee.a)(Object(ee.a)({},function(e){var t=e.map((function(e){return e[0]})),n=e.map((function(e){return e[1]}));return{width:Math.max.apply(Math,Object(h.a)(t))-Math.min.apply(Math,Object(h.a)(t)),height:Math.max.apply(Math,Object(h.a)(n))-Math.min.apply(Math,Object(h.a)(n))}}(o)),t)),t){var i=t[a];if("undefined"!==typeof i){if(e[a]===i&&("object"!==typeof i||null===i||"groupIds"===a))continue;if("points"===a){var c=e[a],l=i;if(c.length===l.length){for(var s=!1,u=c.length;--u;){var d=c[u],p=l[u];if(d[0]!==p[0]||d[1]!==p[1]){s=!0;break}}if(!s)continue}}e[a]=i,r=!0}}r&&("undefined"===typeof t.height&&"undefined"===typeof t.width&&"undefined"===typeof o||function(e){Oe.delete(e)}(e),e.version++,e.versionNonce=ze(),null===(n=Pe.getScene(e))||void 0===n||n.informMutation())},Ue=function(e,t){var n=!1;for(var r in t){var o=t[r];if("undefined"!==typeof o){if(e[r]===o&&("object"!==typeof o||null===o||"groupIds"===r))continue;n=!0}}return n?Object(ee.a)(Object(ee.a)(Object(ee.a)({},e),t),{},{version:e.version+1,versionNonce:ze()}):e},Ye=function(e){return ne(e)?e.points.length<2:0===e.width&&0===e.height},Ge=n(28),We=n(12),He=function(e,t,n){if(!(e=Ht(e)).length)return{scrollX:0,scrollY:0};var r=ye(e),o=Object(d.a)(r,4),a=o[0],i=o[1],c=o[2],l=o[3];if(function(e,t,n){var r=Object(d.a)(n,4),o=r[0],a=r[1],i=r[2],c=r[3],l=E({sceneX:o,sceneY:a},e),s=l.x,u=l.y,h=E({sceneX:i,sceneY:c},e),p=h.x,f=h.y;return p-s>e.width||f-u>e.height}(t,0,[a,i,c,l])){var s=function(e,t){if(!e.length)return[0,0,0,0];var n=1/0,r=e[0];return e.forEach((function(e){var o=we(e),a=Object(d.a)(o,4),i=a[0],c=a[1],l=a[2],s=a[3],u=le((i+l)/2,(c+s)/2,t.x,t.y);u<n&&(n=u,r=e)})),we(r)}(e,O({clientX:t.scrollX,clientY:t.scrollY},t)),u=Object(d.a)(s,4);a=u[0],i=u[1],c=u[2],l=u[3]}return function(e){var t=e.scenePoint,n=e.viewportDimensions,r=e.zoom;return{scrollX:n.width/2*(1/r.value)-t.x-r.translation.x*(1/r.value),scrollY:n.height/2*(1/r.value)-t.y-r.translation.y*(1/r.value)}}({scenePoint:{x:(a+c)/2,y:(i+l)/2},viewportDimensions:{width:t.width,height:t.height},zoom:t.zoom})},Xe=function(e,t){var n,r,o=t.x,a=t.y,i=t.strokeColor,c=t.backgroundColor,l=t.fillStyle,s=t.strokeWidth,u=t.strokeStyle,d=t.roughness,h=t.opacity,p=t.width,f=void 0===p?0:p,b=t.height,m=void 0===b?0:b,v=t.angle,g=void 0===v?0:v,w=t.groupIds,y=void 0===w?[]:w,x=t.strokeSharpness,S=t.boundElementIds,k=void 0===S?null:S,j=Object(Ge.a)(t,["x","y","strokeColor","backgroundColor","fillStyle","strokeWidth","strokeStyle","roughness","opacity","width","height","angle","groupIds","strokeSharpness","boundElementIds"]);return{id:j.id||Fe(),type:e,x:o,y:a,width:f,height:m,angle:g,strokeColor:i,backgroundColor:c,fillStyle:l,strokeWidth:s,strokeStyle:u,roughness:d,opacity:h,groupIds:y,strokeSharpness:x,seed:null!==(n=j.seed)&&void 0!==n?n:ze(),version:j.version||1,versionNonce:null!==(r=j.versionNonce)&&void 0!==r?r:0,isDeleted:!1,boundElementIds:k}},Ve=function(e,t){return{x:"center"===e.textAlign?t.width/2:"right"===e.textAlign?t.width:0,y:"middle"===e.verticalAlign?t.height/2:0}},Ze=function(e,t){return[0,0,0,0,t,e,1,0]},Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[0,0,0,0,0,0,0,0];if(t<0||t>7)throw new Error("Expected `index` betwen 0 and 7, got `".concat(t,"`"));return 0!==e&&(n[t]=e),n},Je=function(e){return[e[0],e[1],e[2],e[3],-e[4],-e[5],-e[6],-e[7]]},qe=function(e,t){return it(t)?[e[0]+t,e[1],e[2],e[3],e[4],e[5],e[6],e[7]]:[e[0]+t[0],e[1]+t[1],e[2]+t[2],e[3]+t[3],e[4]+t[4],e[5]+t[5],e[6]+t[6],e[7]+t[7]]},Qe=function(e,t){return it(t)?[e[0]-t,e[1],e[2],e[3],e[4],e[5],e[6],e[7]]:[e[0]-t[0],e[1]-t[1],e[2]-t[2],e[3]-t[3],e[4]-t[4],e[5]-t[5],e[6]-t[6],e[7]-t[7]]},$e=function(e,t){return it(t)?[e[0]*t,e[1]*t,e[2]*t,e[3]*t,e[4]*t,e[5]*t,e[6]*t,e[7]*t]:[et(e,t),t[1]*e[0]+t[0]*e[1]-t[4]*e[2]+t[5]*e[3]+t[2]*e[4]-t[3]*e[5]-t[7]*e[6]-t[6]*e[7],t[2]*e[0]+t[0]*e[2]-t[6]*e[3]+t[3]*e[6],t[3]*e[0]+t[6]*e[2]+t[0]*e[3]-t[2]*e[6],t[4]*e[0]+t[2]*e[1]-t[1]*e[2]+t[7]*e[3]+t[0]*e[4]+t[6]*e[5]-t[5]*e[6]+t[3]*e[7],t[5]*e[0]-t[3]*e[1]+t[7]*e[2]+t[1]*e[3]-t[6]*e[4]+t[0]*e[5]+t[4]*e[6]+t[2]*e[7],t[6]*e[0]+t[3]*e[2]-t[2]*e[3]+t[0]*e[6],t[7]*e[0]+t[6]*e[1]+t[5]*e[2]+t[4]*e[3]+t[3]*e[4]+t[2]*e[5]+t[1]*e[6]+t[0]*e[7]]},et=function(e,t){return t[0]*e[0]+t[2]*e[2]+t[3]*e[3]-t[6]*e[6]},tt=function(e,t){return[nt(e,t),e[1]*t[7]+e[4]*t[5]-e[5]*t[4]+e[7]*t[1],e[2]*t[7]-e[4]*t[6]+e[6]*t[4]+e[7]*t[2],e[3]*t[7]+e[5]*t[6]-e[6]*t[5]+e[7]*t[3],e[4]*t[7]+e[7]*t[4],e[5]*t[7]+e[7]*t[5],e[6]*t[7]+e[7]*t[6],e[7]*t[7]]},nt=function(e,t){return e[0]*t[7]+e[1]*t[6]+e[2]*t[5]+e[3]*t[4]+e[4]*t[3]+e[5]*t[2]+e[6]*t[1]+e[7]*t[0]},rt=function(e,t){return[t[0]*e[0]+t[2]*e[2]+t[3]*e[3]-t[6]*e[6],t[1]*e[0]+t[0]*e[1]-t[4]*e[2]+t[5]*e[3]+t[2]*e[4]-t[3]*e[5]-t[7]*e[6]-t[6]*e[7],t[2]*e[0]+t[0]*e[2]-t[6]*e[3]+t[3]*e[6],t[3]*e[0]+t[6]*e[2]+t[0]*e[3]-t[2]*e[6],t[4]*e[0]+t[7]*e[3]+t[0]*e[4]+t[3]*e[7],t[5]*e[0]+t[7]*e[2]+t[0]*e[5]+t[2]*e[7],t[6]*e[0]+t[0]*e[6],t[7]*e[0]+t[0]*e[7]]},ot=function(e){return Math.sqrt(Math.abs(e[0]*e[0]-e[2]*e[2]-e[3]*e[3]+e[6]*e[6]))},at=function(e){var t=ot(e);if(0===t||1===t)return e;var n=e[6]<0?-1:1;return $e(e,n/t)},it=function(e){return"number"===typeof e},ct=(Ke(1,1),Ke(1,2),Ke(1,3),Ke(1,4),Ke(1,5),Ke(1,6),Ke(1,7),function(e,t,n){return at([0,n,e,t,0,0,0,0])}),lt=function(e,t){return at(tt(t,e))},st=function(e,t){return rt(e,t)},ut=function(e){var t=Object(d.a)(e,2),n=t[0];return[0,0,0,0,t[1],n,1,0]},dt=function(e){return[e[5],e[4]]},ht=function(e,t){return nt(e,t)},pt=function(e){return[0,0,0,0,e[4],e[5],0,0]},ft=function(e,t){return qe($e(e,Math.sin(t/2)),Math.cos(t/2))},bt=function(e,t){return at($e($e(e,t),Je(e)))},mt=n(17),vt=function(e,t){var n=t.x,r=t.y,o=gt(e,e.width,e.height);return wt({element:e,point:[n,r],threshold:o,check:St})},gt=function(e,t,n){var r=("diamond"===e.type?1/Math.sqrt(2):1)*Math.min(t,n);return Math.max(16,Math.min(.25*r,32))},wt=function(e){switch(e.element.type){case"rectangle":case"text":case"diamond":case"ellipse":var t=yt(e.element,e.point);return e.check(t,e.threshold);case"arrow":case"line":case"draw":return Mt(e);case"selection":return console.warn("This should not happen, we need to investigate why it does."),!1}},yt=function(e,t){switch(e.type){case"rectangle":case"text":return kt(e,t);case"diamond":return jt(e,t);case"ellipse":return Ot(e,t)}},xt=function(e,t){return e<t},St=function(e,t){return 0<=e&&e<t},kt=function(e,t){var n=At(e,t),r=Object(d.a)(n,4),o=r[1],a=r[2],i=r[3];return Math.max(ht(o,ct(0,1,-i)),ht(o,ct(1,0,-a)))},jt=function(e,t){var n=At(e,t),r=Object(d.a)(n,4),o=r[1],a=r[2],i=r[3],c=ct(i,a,-i*a);return ht(o,c)},Ot=function(e,t){var n,r=Et(e,t),o=Object(d.a)(r,2),a=o[0],i=o[1];return n=i,-Math.sign(n[1])*ht(a,i)},Et=function(e,t){var n=At(e,t),r=Object(d.a)(n,4),o=r[1],a=r[2],i=r[3],c=dt(o),l=Object(d.a)(c,2),s=l[0],u=l[1],h=.707,p=.707,f=a,b=i;[0,1,2,3].forEach((function(e){var t=f*h,n=b*p,r=(f*f-b*b)*Math.pow(h,3)/f,o=(b*b-f*f)*Math.pow(p,3)/b,a=t-r,i=n-o,c=s-r,l=u-o,d=Math.hypot(i,a),m=Math.hypot(l,c);h=Math.min(1,Math.max(0,(c*d/m+r)/f)),p=Math.min(1,Math.max(0,(l*d/m+o)/b));var v=Math.hypot(p,h);h/=v,p/=v}));var m,v=Ze(f*h,b*p);return[o,st(lt(o,m=v),m)]},Mt=function(e){var t=e.element,n=e.threshold;if(!Ee(t))return!1;var r=At(e.element,e.point),o=Object(d.a)(r,4),a=o[0],i=o[1],c=o[2],l=o[3],s=ct(0,1,-l),u=ct(1,0,-c);if(!xt(ht(i,s),n)||!xt(ht(i,u),n))return!1;var h=dt(a),p=Object(d.a)(h,2),f=p[0],b=p[1],m=Ee(t);if(e.check===xt&&m.some((function(e){return Tt(e,f,b,t.strokeSharpness)})))return!0;return m.some((function(e){return Lt(e,f,b,n)}))},At=function(e,t){var n,r=ut(t),o=be(e),a=It(o),i=ft(a,e.angle),c=bt(i,r),l=function(e){return[0,0,0,0,Math.abs(e[4]),Math.abs(e[5]),1,0]}(Qe(c,pt(a))),s=(n=e.x,[0,0,0,0,e.y,n,0,0]),u=Qe(c,s),h=Object(d.a)(o,4),p=h[0],f=h[1];return[u,l,(h[2]-p)/2,(h[3]-f)/2]},Ct=function(e){var t,n=be(e),r=It(n),o=ft(r,e.angle),a=Je([1,0,0,0,-.5*(t=pt(r))[5],.5*t[4],0,0]);return $e(a,o)},It=function(e){var t=Object(d.a)(e,4),n=t[0],r=t[1],o=t[2],a=t[3];return Ze((n+o)/2,(r+a)/2)},Nt=function(e,t,n){var r=Ct(e),o=bt(r,ut(t)),a=bt(r,ut(n)),i=lt(o,a),c=e.height/e.width,l=e.width/2,s=e.height/2,u=i[2],d=i[3],h=i[1],p=Math.abs(d),f=Math.abs(u);switch(e.type){case"rectangle":case"text":return h/(l*(f+c*p));case"diamond":return p<f?h/(f*l):h/(p*s);case"ellipse":return h/(l*Math.sqrt(Math.pow(u,2)+Math.pow(c,2)*Math.pow(d,2)))}},Tt=function(e,t,n,r){var o,a=me(e),i=[],c=!1,l=Object(_.a)(a);try{for(l.s();!(o=l.n()).done;){var s=o.value;"move"===s.op?(c=!c)&&i.push([s.data[0],s.data[1]]):"bcurveTo"===s.op&&c&&(i.push([s.data[0],s.data[1]]),i.push([s.data[2],s.data[3]]),i.push([s.data[4],s.data[5]]))}}catch(d){l.e(d)}finally{l.f()}if(i.length>=4){if("sharp"===r)return ue(i,t,n);var u=Object(mt.a)(i,10,5);return ue(u,t,n)}return!1},Lt=function(e,t,n,r){var o=me(e),a=[0,0];return o.some((function(e,o){var i=e.op,c=e.data;if("move"===i)a=c;else if("bcurveTo"===i){var l=[c[0],c[1]],s=[c[2],c[3]],u=[c[4],c[5]],h=a;return a=u,function(e,t,n,r,o,a){for(var i=Object(d.a)(o,2),c=i[0],l=i[1],s=function(o,a){return Math.pow(1-o,3)*r[a]+3*o*Math.pow(1-o,2)*n[a]+3*Math.pow(o,2)*(1-o)*t[a]+e[a]*Math.pow(o,3)},u=0;u<=1;){var h=s(u,0),p=s(u,1);if(Math.sqrt(Math.pow(h-c,2)+Math.pow(p-l,2))<a)return!0;u+=.01}return!1}(h,l,s,u,[t,n],r)}return!1}))},Pt=function(){function e(t,n){Object(Ie.a)(this,e),this.elementId=void 0,this.activePointIndex=void 0,this.isDragging=void 0,this.lastUncommittedPoint=void 0,this.pointerOffset=void 0,this.startBindingElement=void 0,this.endBindingElement=void 0,this.elementId=t.id,Pe.mapElementToScene(this.elementId,n),e.normalizePoints(t),this.activePointIndex=null,this.lastUncommittedPoint=null,this.isDragging=!1,this.pointerOffset={x:0,y:0},this.startBindingElement="keep",this.endBindingElement="keep"}return Object(Ne.a)(e,null,[{key:"getElement",value:function(e){var t,n=null===(t=Pe.getScene(e))||void 0===t?void 0:t.getNonDeletedElement(e);return n||null}},{key:"handlePointDragging",value:function(t,n,r,o,a){if(!t.editingLinearElement)return!1;var i=t.editingLinearElement,c=i.activePointIndex,l=i.elementId,s=i.isDragging,u=e.getElement(l);if(!u)return!1;if(null!=c&&c>-1){!1===s&&n({editingLinearElement:Object(ee.a)(Object(ee.a)({},i),{},{isDragging:!0})});var d=e.createPointAt(u,r-i.pointerOffset.x,o-i.pointerOffset.y,t.gridSize);return e.movePoint(u,c,d),oe(u)&&a(u,0===c?"start":"end"),!0}return!1}},{key:"handlePointerUp",value:function(t,n,r){var o=n.elementId,a=n.activePointIndex,i=n.isDragging,c=e.getElement(o);if(!c)return n;var l={};if(i&&(0===a||a===c.points.length-1)){se(c.points,r.zoom.value)&&e.movePoint(c,a,0===a?c.points[c.points.length-1]:c.points[0]);var s=Bt(r)?Gt(C(e.getPointAtIndexGlobalCoordinates(c,a)),Pe.getScene(c)):null;l=Object(We.a)({},0===a?"startBindingElement":"endBindingElement",s)}return Object(ee.a)(Object(ee.a)(Object(ee.a)({},n),l),{},{isDragging:!1,pointerOffset:{x:0,y:0}})}},{key:"handlePointerDown",value:function(t,n,r,o,a){var i={didAddPoint:!1,hitElement:null};if(!n.editingLinearElement)return i;var c=n.editingLinearElement.elementId,l=e.getElement(c);if(!l)return i;if(t.altKey)return null==n.editingLinearElement.lastUncommittedPoint&&_e(l,{points:[].concat(Object(h.a)(l.points),[e.createPointAt(l,a.x,a.y,n.gridSize)])}),o.resumeRecording(),r({editingLinearElement:Object(ee.a)(Object(ee.a)({},n.editingLinearElement),{},{activePointIndex:l.points.length-1,lastUncommittedPoint:null,endBindingElement:Gt(a,Pe.getScene(l))})}),i.didAddPoint=!0,i;var s=e.getPointIndexUnderCursor(l,n.zoom,a.x,a.y);if(s>-1)i.hitElement=l;else{var u=n.editingLinearElement,p=u.startBindingElement,f=u.endBindingElement;Bt(n)&&oe(l)&&Rt(l,p,f)}var b=be(l),m=Object(d.a)(b,4),v=m[0],g=m[1],w=(v+m[2])/2,y=(g+m[3])/2,x=s>-1&&ce(l.x+l.points[s][0],l.y+l.points[s][1],w,y,l.angle);return r({editingLinearElement:Object(ee.a)(Object(ee.a)({},n.editingLinearElement),{},{activePointIndex:s>-1?s:null,pointerOffset:x?{x:a.x-x[0],y:a.y-x[1]}:{x:0,y:0}})}),i}},{key:"handlePointerMove",value:function(t,n,r,o,a){var i=o.elementId,c=o.lastUncommittedPoint,l=e.getElement(i);if(!l)return o;var s=l.points,u=s[s.length-1];if(!t.altKey)return u===c&&e.movePoint(l,s.length-1,"delete"),Object(ee.a)(Object(ee.a)({},o),{},{lastUncommittedPoint:null});var d=e.createPointAt(l,n-o.pointerOffset.x,r-o.pointerOffset.y,a);return u===c?e.movePoint(l,l.points.length-1,d):e.movePoint(l,"new",d),Object(ee.a)(Object(ee.a)({},o),{},{lastUncommittedPoint:l.points[l.points.length-1]})}},{key:"getPointsGlobalCoordinates",value:function(e){var t=be(e),n=Object(d.a)(t,4),r=n[0],o=n[1],a=n[2],i=n[3],c=(r+a)/2,l=(o+i)/2;return e.points.map((function(t){var n=e.x,r=e.y,o=ce(n+t[0],r+t[1],c,l,e.angle),a=Object(d.a)(o,2);return[n=a[0],r=a[1]]}))}},{key:"getPointAtIndexGlobalCoordinates",value:function(e,t){var n=t<0?e.points.length+t:t,r=be(e),o=Object(d.a)(r,4),a=o[0],i=o[1],c=(a+o[2])/2,l=(i+o[3])/2,s=e.points[n],u=e.x,h=e.y;return ce(u+s[0],h+s[1],c,l,e.angle)}},{key:"pointFromAbsoluteCoords",value:function(e,t){var n=be(e),r=Object(d.a)(n,4),o=r[0],a=r[1],i=(o+r[2])/2,c=(a+r[3])/2,l=ce(t[0],t[1],i,c,-e.angle),s=Object(d.a)(l,2),u=s[0],h=s[1];return[u-e.x,h-e.y]}},{key:"getPointIndexUnderCursor",value:function(e,t,n,r){for(var o=this.getPointsGlobalCoordinates(e),a=o.length;--a>-1;){var i=o[a];if(le(n,r,i[0],i[1])*t.value<this.POINT_HANDLE_SIZE/2+1)return a}return-1}},{key:"createPointAt",value:function(e,t,n,r){var o=function(e,t,n){return n?[Math.round(e/n)*n,Math.round(t/n)*n]:[e,t]}(t,n,r),a=be(e),i=Object(d.a)(a,4),c=i[0],l=i[1],s=(c+i[2])/2,u=(l+i[3])/2,h=ce(o[0],o[1],s,u,-e.angle),p=Object(d.a)(h,2),f=p[0],b=p[1];return[f-e.x,b-e.y]}},{key:"normalizePoints",value:function(e){var t=e.points,n=t[0][0],r=t[0][1];_e(e,{points:t.map((function(e,t){return[e[0]-n,e[1]-r]})),x:e.x+n,y:e.y+r})}},{key:"movePointByOffset",value:function(t,n,r){var o=Object(d.a)(t.points[n],2),a=o[0],i=o[1];e.movePoint(t,n,[a+r.x,i+r.y])}},{key:"movePoint",value:function(e,t,n,r){var o,a=e.points,i=0,c=0;if("delete"===n){if("new"===t)throw new Error("invalid args in movePoint");(o=a.slice()).splice(t,1),0===t&&(i=o[0][0],c=o[0][1],o=o.map((function(e,t){return 0===t?[0,0]:[e[0]-i,e[1]-c]})))}else if("new"===t)o=[].concat(Object(h.a)(a),[n]);else{var l=n[0]-a[t][0],s=n[1]-a[t][1];o=a.map((function(e,n){return n===t?0===n?(i=l,c=s,e):(i=0,c=0,[e[0]+l,e[1]+s]):i||c?[e[0]-i,e[1]-c]:e}))}var u=xe(e,o,e.strokeSharpness||"round"),d=xe(e,a,e.strokeSharpness||"round"),p=(u[0]+u[2])/2,f=(u[1]+u[3])/2,b=(d[0]+d[2])/2,m=(d[1]+d[3])/2,v=ce(i,c,b-p,m-f,e.angle);_e(e,Object(ee.a)(Object(ee.a)({},r),{},{points:o,x:e.x+v[0],y:e.y+v[1]}))}}]),e}();Pt.POINT_HANDLE_SIZE=20;var Dt,Bt=function(e){return e.isBindingEnabled},Rt=function(e,t,n){var r=new Set,o=new Set;zt(e,t,n,"start",r,o),zt(e,n,t,"end",r,o);var a=Array.from(o).filter((function(e){return!r.has(e)}));Pe.getScene(e).getNonDeletedElements(a).forEach((function(t){var n;_e(t,{boundElementIds:null===(n=t.boundElementIds)||void 0===n?void 0:n.filter((function(t){return t!==e.id}))})}))},zt=function(e,t,n,r,o,a){if("keep"!==t)if(null!=t)null!=n&&("keep"===n?_t(e,t,r):"start"!==r&&n.id===t.id)||(Ft(e,t,r),o.add(t.id));else{var i=Yt(e,r);null!=i&&a.add(i)}},Ft=function(e,t,n){var r;_e(e,Object(We.a)({},"start"===n?"startBinding":"endBinding",Object(ee.a)({elementId:t.id},Wt(e,t,n)))),_e(t,{boundElementIds:Array.from(new Set([].concat(Object(h.a)(null!==(r=t.boundElementIds)&&void 0!==r?r:[]),[e.id])))})},_t=function(e,t,n){var r=e["start"===n?"endBinding":"startBinding"];return Ut(e,null===r||void 0===r?void 0:r.elementId,t)},Ut=function(e,t,n){return t===n.id&&e.points.length<3},Yt=function(e,t){var n="start"===t?"startBinding":"endBinding",r=e[n];return null==r?null:(_e(e,Object(We.a)({},n,null)),r.elementId)},Gt=function(e,t){return function(e,t){for(var n=null,r=e.length-1;r>=0;--r){var o=e[r];if(!o.isDeleted&&t(o)){n=o;break}}return n}(t.getElements(),(function(t){return ie(t)&&vt(t,e)}))},Wt=function(e,t,n){var r="start"===n?-1:1,o=-1===r?0:e.points.length-1,a=o-r,i=Pt.getPointAtIndexGlobalCoordinates(e,o),c=Pt.getPointAtIndexGlobalCoordinates(e,a);return{focus:Nt(t,c,i),gap:Math.max(1,yt(t,i))}},Ht=function(e){return e.filter((function(e){return!e.isDeleted&&!Ye(e)}))},Xt=function(e){return e.filter((function(e){return!e.isDeleted}))},Vt=function(e){return!e.isDeleted},Zt=function(e){return Xt(e).map((function(e){return re(e.type)?Object(ee.a)(Object(ee.a)({},e),{},{lastCommittedPoint:null}):e}))},Kt=function(e){return Zt(e)},Jt=n(18),qt=n(20),Qt=n(34),$t=(Error,function(e,t){var n,r,o,a,i,c,l,s,u={type:e.type,version:e.version||1,versionNonce:null!==(n=e.versionNonce)&&void 0!==n?n:0,isDeleted:null!==(r=e.isDeleted)&&void 0!==r&&r,id:e.id||Fe(),fillStyle:e.fillStyle||"hachure",strokeWidth:e.strokeWidth||1,strokeStyle:null!==(o=e.strokeStyle)&&void 0!==o?o:"solid",roughness:null!==(a=e.roughness)&&void 0!==a?a:1,opacity:null==e.opacity?100:e.opacity,angle:e.angle||0,x:e.x||0,y:e.y||0,strokeColor:e.strokeColor,backgroundColor:e.backgroundColor,width:e.width||0,height:e.height||0,seed:null!==(i=e.seed)&&void 0!==i?i:1,groupIds:null!==(c=e.groupIds)&&void 0!==c?c:[],strokeSharpness:null!==(l=e.strokeSharpness)&&void 0!==l?l:re(e.type)?"round":"sharp",boundElementIds:null!==(s=e.boundElementIds)&&void 0!==s?s:[]};return Object(ee.a)(Object(ee.a)(Object(ee.a)({},u),function(e){var t={width:e.width,height:e.height,x:e.x,y:e.y};if(e.width<0){var n=Math.abs(e.width);t.width=n,t.x=e.x-n}if(e.height<0){var r=Math.abs(e.height);t.height=r,t.y=e.y-r}return t}(u)),t)}),en=function(e){var t;switch(e.type){case"text":var n=e.fontSize,r=e.fontFamily;if("font"in e){var o=e.font.split(" "),a=Object(d.a)(o,2),i=a[0],c=a[1];n=parseInt(i,10),r=function(e){for(var t=0,n=Object.entries(v.k);t<n.length;t++){var r=Object(d.a)(n[t],2),o=r[0];if(r[1].includes(e))return parseInt(o)}return v.c}(c)}return $t(e,{fontSize:n,fontFamily:r,text:null!==(t=e.text)&&void 0!==t?t:"",baseline:e.baseline,textAlign:e.textAlign||v.e,verticalAlign:e.verticalAlign||v.g});case"draw":case"line":case"arrow":var l=e.startArrowhead,s=void 0===l?null:l,u=e.endArrowhead,h=void 0===u?"arrow"===e.type?"arrow":null:u;return $t(e,{startBinding:e.startBinding,endBinding:e.endBinding,points:!Array.isArray(e.points)||e.points.length<2?[[0,0],[e.width,e.height]]:e.points,lastCommittedPoint:null,startArrowhead:s,endArrowhead:h});case"ellipse":case"rectangle":case"diamond":return $t(e,{})}},tn=function(e){return(e||[]).reduce((function(e,t){if("selection"!==t.type&&!Ye(t)){var n=en(t);n&&e.push(n)}return e}),[])},nn=function(e,t){e=e||{};var n,r=J(),o={},a=Object(_.a)(Object.entries(r));try{for(a.s();!(n=a.n()).done;){var i=Object(d.a)(n.value,2),c=i[0],l=i[1],s=e[c],u=t?t[c]:void 0;o[c]=void 0!==s?s:void 0!==u?u:l}}catch(h){a.e(h)}finally{a.f()}return Object(ee.a)(Object(ee.a)({},o),{},{zoom:"number"===typeof e.zoom?{value:e.zoom,translation:r.zoom.translation}:e.zoom||r.zoom})},rn=function(e,t){return{elements:tn(null===e||void 0===e?void 0:e.elements),appState:nn(null===e||void 0===e?void 0:e.appState,t||null)}},on=function(){var e=Object(u.a)(s.a.mark((function e(t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("image/png"!==t.type){e.next=18;break}return e.prev=1,e.next=4,Promise.all([n.e(38),n.e(34)]).then(n.bind(null,121));case 4:return e.next=6,e.sent.decodePngMetadata(t);case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(1),"INVALID"!==e.t0.message){e.next=15;break}throw new Error(K("alerts.imageDoesNotContainScene"));case 15:throw new Error(K("alerts.cannotRestoreFromImage"));case 16:e.next=43;break;case 18:if(!("text"in Blob)){e.next=24;break}return e.next=21,t.text();case 21:r=e.sent,e.next=27;break;case 24:return e.next=26,new Promise((function(e){var n=new FileReader;n.readAsText(t,"utf8"),n.onloadend=function(){n.readyState===FileReader.DONE&&e(n.result)}}));case 26:r=e.sent;case 27:if("image/svg+xml"!==t.type){e.next=43;break}return e.prev=28,e.next=31,Promise.all([n.e(38),n.e(34)]).then(n.bind(null,121));case 31:return e.next=33,e.sent.decodeSvgMetadata({svg:r});case 33:return e.abrupt("return",e.sent);case 36:if(e.prev=36,e.t1=e.catch(28),"INVALID"!==e.t1.message){e.next=42;break}throw new Error(K("alerts.imageDoesNotContainScene"));case 42:throw new Error(K("alerts.cannotRestoreFromImage"));case 43:return e.abrupt("return",r);case 44:case"end":return e.stop()}}),e,null,[[1,9],[28,36]])})));return function(t){return e.apply(this,arguments)}}(),an=function(){var e=Object(u.a)(s.a.mark((function e(t,n){var r,o,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,on(t);case 2:if(r=e.sent,e.prev=3,o=JSON.parse(r),sn(o)){e.next=7;break}throw new Error(K("alerts.couldNotLoadInvalidFile"));case 7:return a=rn({elements:Kt(o.elements||[]),appState:Object(ee.a)(Object(ee.a)({theme:null===n||void 0===n?void 0:n.theme,fileHandle:!t.type.startsWith("image/")&&t.handle||null},$(o.appState||{})),n?He(o.elements||[],n):{})},n),e.abrupt("return",a);case 11:throw e.prev=11,e.t0=e.catch(3),console.error(e.t0.message),new Error(K("alerts.couldNotLoadInvalidFile"));case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t,n){return e.apply(this,arguments)}}(),cn=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,on(t);case 2:if(n=e.sent,(r=JSON.parse(n)).type===v.i.excalidrawLibrary){e.next=6;break}throw new Error(K("alerts.couldNotLoadInvalidFile"));case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ln=function(){var e=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.a)({description:"Excalidraw files"});case 2:return n=e.sent,e.abrupt("return",an(n,t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),sn=function(e){return(null===e||void 0===e?void 0:e.type)===v.i.excalidraw&&(!e.elements||Array.isArray(e.elements)&&(!e.appState||"object"===typeof e.appState))},un=function(e){return"object"===typeof e&&e&&e.type===v.i.excalidrawLibrary&&1===e.version},dn=/#json=([0-9]+),?([a-zA-Z0-9_-]*)|^http.*\.excalidrawlib$/,hn=function(e){var t,n=(t=[]).concat.apply(t,Object(h.a)(e.map((function(e){return function(e){var t=[],n=[],r=function e(t){if("animate"===t.tagName){var r=/([0-9.]+)ms/.exec(t.getAttribute("begin")||"");r&&n.push(Number(r[1]))}t.childNodes.forEach((function(t){e(t)}))};return e.childNodes.forEach((function(e){"g"===e.tagName?(r(e),n.length&&(t.push(Math.min.apply(Math,n)),n.splice(0))):"defs"===e.tagName&&e.childNodes.forEach((function(e){r(e),n.length&&(t.push(Math.min.apply(Math,n)),n.splice(0))}))})),t}(e.svg).map((function(e){return Math.floor(100*e)/100}))}))));return Object(h.a)(new Set(n)).sort((function(e,t){return e-t}))},pn=function(e){var t=e.svgList,n=e.loadDataList,a=Object(o.useState)(!1),i=Object(d.a)(a,2),c=i[0],l=i[1],h=Object(o.useState)(!1),b=Object(d.a)(h,2),m=b[0],v=b[1],g=Object(o.useState)(!1),w=Object(d.a)(g,2),y=w[0],x=w[1],S=Object(o.useState)(""),k=Object(d.a)(S,2),j=k[0],O=k[1],E=Object(o.useState)(),M=Object(d.a)(E,2),A=M[0],C=M[1];Object(o.useEffect)((function(){C(void 0)}),[t]),Object(o.useEffect)((function(){t.forEach((function(e){var t=e.svg;m?t.pauseAnimations():t.unpauseAnimations()}))}),[t,m]),Object(o.useEffect)((function(){var e=window.location.hash.slice(1);"no"!==new URLSearchParams(e).get("toolbar")?l(!0):l("never")}),[]);var I=function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ln(void 0);case 2:t=e.sent,n([t]);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(u.a)(s.a.mark((function e(){var t,r,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.a)({description:"Excalidraw library files",extensions:[".json",".excalidrawlib"],mimeTypes:["application/json"]});case 2:return t=e.sent,e.next=5,cn(t);case 5:if((r=e.sent)&&r.library){e.next=9;break}return window.alert("Unable to load library"),e.abrupt("return");case 9:o=r.library.map((function(e){return Xt(tn(e))})),n(o.map((function(e){return{elements:e}})));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=Object(o.useCallback)((function(){t.length&&v((function(e){return!e}))}),[t]),L=Object(o.useRef)(),P=Object(o.useCallback)((function(){if(t.length){var e=hn(t),n=1e3*t[0].svg.getCurrentTime(),r=e.find((function(e){return e>=n+100}));r||(r=n+500),clearTimeout(L.current),t.forEach((function(e){e.svg.unpauseAnimations()})),L.current=setTimeout((function(){t.forEach((function(e){var t=e.svg;t.pauseAnimations(),t.setCurrentTime(r/1e3)})),v(!0)}),r-n)}}),[t]),D=Object(o.useCallback)((function(){t.forEach((function(e){e.svg.setCurrentTime(0)}))}),[t]);Object(o.useEffect)((function(){var e=function(e){"p"===e.key.toLowerCase()?T():"s"===e.key.toLowerCase()?P():"r"===e.key.toLowerCase()?D():"q"===e.key.toLowerCase()?l((function(e){return"boolean"===typeof e?!e:e})):l((function(e){return"boolean"===typeof e||e}))};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[T,P,D]);var B=function(){var e=Object(u.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return");case 2:if(!A){e.next=6;break}return e.next=5,z(A);case 5:return e.abrupt("return");case 6:return x(!0),l(!1),e.prev=8,e.next=11,F(t);case 11:n=e.sent,C(n),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8),console.log(e.t0);case 18:l(!0),x(!1);case 20:case"end":return e.stop()}}),e,null,[[8,15]])})));return function(){return e.apply(this,arguments)}}();return!0!==c?null:Object(r.jsxs)("div",{className:"Toolbar",children:[Object(r.jsxs)("div",{className:"Toolbar-loader",children:[Object(r.jsx)("button",{type:"button",onClick:I,children:"Load File"}),Object(r.jsx)("span",{children:"OR"}),Object(r.jsx)("button",{type:"button",onClick:N,children:"Load Library"}),Object(r.jsx)("span",{children:"OR"}),Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=dn.exec(j);t?(t[1]?window.location.hash=t[0]:window.location.hash="library=".concat(t[0]),window.location.reload()):window.alert("Invalid link")},children:[Object(r.jsx)("input",{placeholder:"Enter link...",value:j,onChange:function(e){return O(e.target.value)}}),Object(r.jsx)("button",{type:"submit",disabled:!dn.test(j),children:"Animate!"})]})]}),!!t.length&&Object(r.jsxs)("div",{className:"Toolbar-controller",children:[Object(r.jsx)("button",{type:"button",onClick:T,children:m?"Play (P)":"Pause (P)"}),Object(r.jsx)("button",{type:"button",onClick:P,children:"Step (S)"}),Object(r.jsx)("button",{type:"button",onClick:D,children:"Reset (R)"}),Object(r.jsx)("button",{type:"button",onClick:function(){l((function(e){return"boolean"!==typeof e&&e}))},children:"Hide Toolbar (Q)"}),Object(r.jsx)("button",{type:"button",onClick:function(){t.length&&t.forEach((function(e){var t=e.svg;R(t)}))},children:"Export to SVG"}),Object(r.jsx)("button",{type:"button",onClick:B,disabled:y,children:y?"Processing...":A?"Export to WebM":"Prepare WebM"})]}),Object(r.jsx)(f,{link:"https://github.com/dai-shi/excalidraw-animate",size:40})]})},fn=(n(47),function(e){var t=e.svgList,n=Object(o.useRef)(null);Object(o.useEffect)((function(){return t.forEach((function(e){var t=e.svg;n.current&&n.current.appendChild(t)})),function(){t.forEach((function(e){e.svg.remove()}))}}),[t]),Object(o.useEffect)((function(){var e=window.location.hash.slice(1);if("no"===new URLSearchParams(e).get("autoplay")&&n.current){var r=n.current,o=function(){t.forEach((function(e){var t=e.svg;t.setCurrentTime(0),t.unpauseAnimations()}))};return r.addEventListener("click",o),function(){r.removeEventListener("click",o)}}}),[t]);var a=Math.ceil(Math.sqrt(t.length)),i="repeat(".concat(a,", ").concat(100/a,"%)");return Object(r.jsx)("div",{className:"Viewer",style:{gridTemplateColumns:i,gridTemplateRows:i},ref:n})}),bn=function(e,t){return window.crypto.subtle.importKey("jwk",{alg:"A128GCM",ext:!0,k:e,key_ops:["encrypt","decrypt"],kty:"oct"},{name:"AES-GCM",length:128},!1,[t])},mn=function(){var e=Object(u.a)(s.a.mark((function e(t,n,r){var o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bn(r,"decrypt");case 2:return o=e.sent,e.abrupt("return",window.crypto.subtle.decrypt({name:"AES-GCM",iv:t},o,n));case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),vn=function(){var e=Object(u.a)(s.a.mark((function e(t,n){var r,o,a,i,c,l,u,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(n?"".concat("https://json.excalidraw.com/api/v2/").concat(t):"".concat("https://json.excalidraw.com/api/v1/").concat(t,".json"));case 3:if((r=e.sent).ok){e.next=7;break}return window.alert(K("alerts.importBackendFailed")),e.abrupt("return",{});case 7:if(!n){e.next=29;break}return e.next=10,r.arrayBuffer();case 10:return a=e.sent,e.prev=11,c=a.slice(0,12),l=a.slice(12,a.byteLength),e.next=16,mn(c,l,n);case 16:i=e.sent,e.next=25;break;case 19:return e.prev=19,e.t0=e.catch(11),u=new Uint8Array(12),e.next=24,mn(u,a,n);case 24:i=e.sent;case 25:d=new window.TextDecoder("utf-8").decode(new Uint8Array(i)),o=JSON.parse(d),e.next=32;break;case 29:return e.next=31,r.json();case 31:o=e.sent;case 32:return e.abrupt("return",{elements:o.elements||null,appState:o.appState||null});case 35:return e.prev=35,e.t1=e.catch(0),window.alert(K("alerts.importBackendFailed")),console.error(e.t1),e.abrupt("return",{});case 40:case"end":return e.stop()}}),e,null,[[0,35],[11,19]])})));return function(t,n){return e.apply(this,arguments)}}(),gn=function(){var e=Object(u.a)(s.a.mark((function e(t,n,r){var o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t){e.next=9;break}return e.t0=rn,e.next=4,vn(t,n);case 4:e.t1=e.sent,e.t2=null===r||void 0===r?void 0:r.appState,o=(0,e.t0)(e.t1,e.t2),e.next=10;break;case 9:o=rn(r||null,null);case 10:return e.abrupt("return",{elements:o.elements,appState:o.appState,commitToHistory:!1});case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();!function(e){e.ACTIVE="active",e.AWAY="away",e.IDLE="idle"}(Dt||(Dt={}));!function(){var e=document.createElement("canvas").getContext("2d");if(!e)return!1;e.fillStyle="#f00",e.textBaseline="top",e.font="32px Arial",e.fillText("\ud83d\ude00",0,0),e.getImageData(12,12,1,1).data[0]}();var wn=function(e,t){var n=t.exportBackground,r=t.exportPadding,o=void 0===r?10:r,a=t.viewBackgroundColor,i=t.exportWithDarkMode,c=t.scale,l=void 0===c?1:c,s=t.shouldAddWatermark,u=t.metadata,h=void 0===u?"":u,p=yn(e,s),f=Sn(p,o,s),b=Object(d.a)(f,4),m=b[0],w=b[1],y=b[2],x=b[3],S=document.createElementNS(g,"svg");if(S.setAttribute("version","1.1"),S.setAttribute("xmlns",g),S.setAttribute("viewBox","0 0 ".concat(y," ").concat(x)),S.setAttribute("width","".concat(y*l)),S.setAttribute("height","".concat(x*l)),i&&S.setAttribute("filter",v.o),S.innerHTML="\n  ".concat("\x3c!-- svg-source:excalidraw --\x3e","\n  ").concat(h,'\n  <defs>\n    <style>\n      @font-face {\n        font-family: "Virgil";\n        src: url("https://excalidraw.com/Virgil.woff2");\n      }\n      @font-face {\n        font-family: "Cascadia";\n        src: url("https://excalidraw.com/Cascadia.woff2");\n      }\n    </style>\n  </defs>\n  '),n&&a){var k=S.ownerDocument.createElementNS(g,"rect");k.setAttribute("x","0"),k.setAttribute("y","0"),k.setAttribute("width","".concat(y)),k.setAttribute("height","".concat(x)),k.setAttribute("fill",a),S.appendChild(k)}return function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=r.offsetX,a=void 0===o?0:o,i=r.offsetY,c=void 0===i?0:i;n&&e.forEach((function(e){e.isDeleted||Ce(e,t,n,e.x+a,e.y+c)}))}(p,fe.a.svg(S),S,{offsetX:-m+o,offsetY:-w+o}),S},yn=function(e,t){var n=Object(h.a)(e);if(t){var r=ye(e),o=Object(d.a)(r,4),a=o[2],i=o[3];n=[].concat(Object(h.a)(n),[xn(a,i)])}return n},xn=function(e,t){return function(e){var t=k(e.text,S(e)),n=Ve(e,t);return Ue(Object(ee.a)(Object(ee.a)({},Xe("text",e)),{},{text:e.text,fontSize:e.fontSize,fontFamily:e.fontFamily,textAlign:e.textAlign,verticalAlign:e.verticalAlign,x:e.x-n.x,y:e.y-n.y,width:t.width,height:t.height,baseline:t.baseline}),{})}({text:K("labels.madeWithExcalidraw"),fontSize:16,fontFamily:v.c,textAlign:"right",verticalAlign:v.g,x:e,y:t+16,strokeColor:b.gray[5],backgroundColor:"transparent",fillStyle:"hachure",strokeWidth:1,strokeStyle:"solid",roughness:1,opacity:100,strokeSharpness:"sharp"})},Sn=function(e,t,n){var r=ye(e),o=Object(d.a)(r,4),a=o[0],i=o[1],c=o[2],l=o[3];return[a,i,j(a,c)+2*t,j(i,l)+t+(n?0:t)]},kn=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r,o,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:return n=e.sent,e.next=6,n.blob();case 6:return r=e.sent,e.t0=JSON,e.next=10,r.text();case 10:if(e.t1=e.sent,o=e.t0.parse.call(e.t0,e.t1),un(o)){e.next=14;break}throw new Error;case 14:return e.next=16,cn(r);case 16:if((a=e.sent)&&a.library){e.next=19;break}throw new Error;case 19:return e.abrupt("return",a.library.map((function(e){return Xt(tn(e))})));case 22:return e.prev=22,e.t2=e.catch(0),window.alert("Unable to load library"),e.abrupt("return",[]);case 26:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t){return e.apply(this,arguments)}}(),jn=function(){var e=Object(o.useState)(!0),t=Object(d.a)(e,2),n=t[0],r=t[1],a=Object(o.useState)([]),i=Object(d.a)(a,2),c=i[0],l=i[1],h=Object(o.useCallback)((function(e,t){var n,r=e.map((function(e){var r=Xt(e.elements),o=wn(r,(null===e||void 0===e?void 0:e.appState)||{exportBackground:!0,exportPadding:30,viewBackgroundColor:"white",shouldAddWatermark:!1}),a=function(e,t,n){var r=function(e,t){var n={},r=0;return e.childNodes.forEach((function(e){if("g"===e.tagName){var o=t[r].groupIds;if(o.length>=1){var a=o[0];n[a]=n[a]||[],n[a].push([e,r])}r+=1}})),n}(e,t),o=new Map,a=null!==n&&void 0!==n?n:1e3,i=0;return e.childNodes.forEach((function(n){if("g"===n.tagName){var c=t[i],l=c.type,s=c.strokeSharpness,u=c.width,h=c.groupIds;if(!o.has(n))if(h.length>=1){var p=h[0],f=r[p],b=5e3/(f.length+1);B(e,n,l,s,u,a,b),a+=b,o.set(n,!0),f.forEach((function(n){var r=Object(d.a)(n,2),i=r[0],c=r[1],l=t[c],s=l.type,u=l.strokeSharpness,h=l.width;o.has(i)||(B(e,i,s,u,h,a,b),a+=b,o.set(i,!0))})),delete r[p]}else B(e,n,l,s,u,a,500),a+=500,o.set(n,!0);i+=1}})),{finishedMs:a+1e3}}(o,r,n);return console.log(o),t&&(n=a.finishedMs),{svg:o,finishedMs:a.finishedMs}}));return l(r),r}),[]);return Object(o.useEffect)((function(){Object(u.a)(s.a.mark((function e(){var t,n,o,a,i,c,l,u,p,f,b,m,v,g,w,y,x;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.location.hash.slice(1),n=new URLSearchParams(t),!(o=/([0-9]+),?([a-zA-Z0-9_-]*)/.exec(n.get("json")||""))){e.next=10;break}return a=Object(d.a)(o,3),i=a[1],c=a[2],e.next=7,gn(i,c,null);case 7:l=e.sent,u=h([l]),p=Object(d.a)(u,1),f=p[0],b=f.svg,m=f.finishedMs,"no"===n.get("autoplay")&&b.setCurrentTime(m);case 10:if(!(v=/(.*\.excalidrawlib)/.exec(n.get("library")||""))){e.next=18;break}return g=Object(d.a)(v,2),w=g[1],e.next=15,kn(w);case 15:y=e.sent,x=h(y.map((function(e){return{elements:e}})),n.has("sequence")),"no"===n.get("autoplay")&&x.forEach((function(e){var t=e.svg,n=e.finishedMs;t.setCurrentTime(n)}));case 18:r(!1);case 19:case"end":return e.stop()}}),e)})))()}),[h]),{loading:n,loadedSvgList:c,loadDataList:h}},On=function(){var e=jn(),t=e.loading,n=e.loadedSvgList,o=e.loadDataList;return t?Object(r.jsx)("div",{children:"Loading..."}):Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(pn,{svgList:n,loadDataList:o}),!!n.length&&Object(r.jsx)(fn,{svgList:n})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(On,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[48,36,37]]]);
//# sourceMappingURL=main.257f4a75.chunk.js.map