(this["webpackJsonpexcalidraw-animate"]=this["webpackJsonpexcalidraw-animate"]||[]).push([[36],{30:function(e){e.exports=JSON.parse('{"labels":{"paste":"Paste","pasteCharts":"Paste charts","selectAll":"Select all","multiSelect":"Add element to selection","moveCanvas":"Move canvas","cut":"Cut","copy":"Copy","copyAsPng":"Copy to clipboard as PNG","copyAsSvg":"Copy to clipboard as SVG","bringForward":"Bring forward","sendToBack":"Send to back","bringToFront":"Bring to front","sendBackward":"Send backward","delete":"Delete","copyStyles":"Copy styles","pasteStyles":"Paste styles","stroke":"Stroke","background":"Background","fill":"Fill","strokeWidth":"Stroke width","strokeShape":"Stroke shape","strokeShape_gel":"Gel pen","strokeShape_fountain":"Fountain pen","strokeShape_brush":"Brush pen","strokeStyle":"Stroke style","strokeStyle_solid":"Solid","strokeStyle_dashed":"Dashed","strokeStyle_dotted":"Dotted","sloppiness":"Sloppiness","opacity":"Opacity","textAlign":"Text align","edges":"Edges","sharp":"Sharp","round":"Round","arrowheads":"Arrowheads","arrowhead_none":"None","arrowhead_arrow":"Arrow","arrowhead_bar":"Bar","arrowhead_dot":"Dot","fontSize":"Font size","fontFamily":"Font family","onlySelected":"Only selected","withBackground":"With background","exportEmbedScene":"Embed scene into exported file","exportEmbedScene_details":"Scene data will be saved into the exported PNG/SVG file so that the scene can be restored from it.\\nWill increase exported file size.","addWatermark":"Add \\"Made with Excalidraw\\"","handDrawn":"Hand-drawn","normal":"Normal","code":"Code","small":"Small","medium":"Medium","large":"Large","veryLarge":"Very large","solid":"Solid","hachure":"Hachure","crossHatch":"Cross-hatch","thin":"Thin","bold":"Bold","left":"Left","center":"Center","right":"Right","extraBold":"Extra bold","architect":"Architect","artist":"Artist","cartoonist":"Cartoonist","fileTitle":"File name","colorPicker":"Color picker","canvasBackground":"Canvas background","drawingCanvas":"Drawing canvas","layers":"Layers","actions":"Actions","language":"Language","liveCollaboration":"Live collaboration","duplicateSelection":"Duplicate","untitled":"Untitled","name":"Name","yourName":"Your name","madeWithExcalidraw":"Made with Excalidraw","group":"Group selection","ungroup":"Ungroup selection","collaborators":"Collaborators","showGrid":"Show grid","addToLibrary":"Add to library","removeFromLibrary":"Remove from library","libraryLoadingMessage":"Loading library\u2026","libraries":"Browse libraries","loadingScene":"Loading scene\u2026","align":"Align","alignTop":"Align top","alignBottom":"Align bottom","alignLeft":"Align left","alignRight":"Align right","centerVertically":"Center vertically","centerHorizontally":"Center horizontally","distributeHorizontally":"Distribute horizontally","distributeVertically":"Distribute vertically","flipHorizontal":"Flip horizontal","flipVertical":"Flip vertical","viewMode":"View mode","toggleExportColorScheme":"Toggle export color scheme","share":"Share","toggleTheme":"Toggle theme"},"buttons":{"clearReset":"Reset the canvas","export":"Export","exportToPng":"Export to PNG","exportToSvg":"Export to SVG","copyToClipboard":"Copy to clipboard","copyPngToClipboard":"Copy PNG to clipboard","scale":"Scale","save":"Save","saveAs":"Save as","load":"Load","getShareableLink":"Get shareable link","close":"Close","selectLanguage":"Select language","scrollBackToContent":"Scroll back to content","zoomIn":"Zoom in","zoomOut":"Zoom out","resetZoom":"Reset zoom","menu":"Menu","done":"Done","edit":"Edit","undo":"Undo","redo":"Redo","resetLibrary":"Reset library","createNewRoom":"Create new room","fullScreen":"Full screen","darkMode":"Dark mode","lightMode":"Light mode","zenMode":"Zen mode","exitZenMode":"Exit zen mode"},"alerts":{"clearReset":"This will clear the whole canvas. Are you sure?","couldNotCreateShareableLink":"Couldn\'t create shareable link.","couldNotCreateShareableLinkTooBig":"Couldn\'t create shareable link: the scene is too big","couldNotLoadInvalidFile":"Couldn\'t load invalid file","importBackendFailed":"Importing from backend failed.","cannotExportEmptyCanvas":"Cannot export empty canvas.","couldNotCopyToClipboard":"Couldn\'t copy to clipboard. Try using Chrome browser.","decryptFailed":"Couldn\'t decrypt data.","uploadedSecurly":"The upload has been secured with end-to-end encryption, which means that Excalidraw server and third parties can\'t read the content.","loadSceneOverridePrompt":"Loading external drawing will replace your existing content. Do you wish to continue?","collabStopOverridePrompt":"Stopping the session will overwrite your previous, locally stored drawing. Are you sure?\\n\\n(If you want to keep your local drawing, simply close the browser tab instead.)","errorLoadingLibrary":"There was an error loading the third party library.","errorAddingToLibrary":"Couldn\'t add item to the library","errorRemovingFromLibrary":"Couldn\'t remove item from the library","confirmAddLibrary":"This will add {{numShapes}} shape(s) to your library. Are you sure?","imageDoesNotContainScene":"Importing images isn\'t supported at the moment.\\n\\nDid you want to import a scene? This image does not seem to contain any scene data. Have you enabled this during export?","cannotRestoreFromImage":"Scene couldn\'t be restored from this image file","invalidSceneUrl":"Couldn\'t import scene from the supplied URL. It\'s either malformed, or doesn\'t contain valid Excalidraw JSON data.","resetLibrary":"This will clear your library. Are you sure?"},"toolBar":{"selection":"Selection","rectangle":"Rectangle","diamond":"Diamond","ellipse":"Ellipse","arrow":"Arrow","line":"Line","freedraw":"Draw","text":"Text","library":"Library","lock":"Keep selected tool active after drawing"},"headings":{"canvasActions":"Canvas actions","selectedShapeActions":"Selected shape actions","shapes":"Shapes"},"hints":{"linearElement":"Click to start multiple points, drag for single line","freeDraw":"Click and drag, release when you\'re finished","text":"Tip: you can also add text by double-clicking anywhere with the selection tool","linearElementMulti":"Click on last point or press Escape or Enter to finish","lockAngle":"You can constrain angle by holding SHIFT","resize":"You can constrain proportions by holding SHIFT while resizing,\\nhold ALT to resize from the center","rotate":"You can constrain angles by holding SHIFT while rotating","lineEditor_info":"Double-click or press Enter to edit points","lineEditor_pointSelected":"Press Delete to remove point, CtrlOrCmd+D to duplicate, or drag to move","lineEditor_nothingSelected":"Select a point to move or remove, or hold Alt and click to add new points"},"canvasError":{"cannotShowPreview":"Cannot show preview","canvasTooBig":"The canvas may be too big.","canvasTooBigTip":"Tip: try moving the farthest elements a bit closer together."},"errorSplash":{"headingMain_pre":"Encountered an error. Try ","headingMain_button":"reloading the page.","clearCanvasMessage":"If reloading doesn\'t work, try ","clearCanvasMessage_button":"clearing the canvas.","clearCanvasCaveat":" This will result in loss of work ","trackedToSentry_pre":"The error with identifier ","trackedToSentry_post":" was tracked on our system.","openIssueMessage_pre":"We were very cautious not to include your scene information on the error. If your scene is not private, please consider following up on our ","openIssueMessage_button":"bug tracker.","openIssueMessage_post":" Please include information below by copying and pasting into the GitHub issue.","sceneContent":"Scene content:"},"roomDialog":{"desc_intro":"You can invite people to your current scene to collaborate with you.","desc_privacy":"Don\'t worry, the session uses end-to-end encryption, so whatever you draw will stay private. Not even our server will be able to see what you come up with.","button_startSession":"Start session","button_stopSession":"Stop session","desc_inProgressIntro":"Live-collaboration session is now in progress.","desc_shareLink":"Share this link with anyone you want to collaborate with:","desc_exitSession":"Stopping the session will disconnect you from the room, but you\'ll be able to continue working with the scene, locally. Note that this won\'t affect other people, and they\'ll still be able to collaborate on their version.","shareTitle":"Join a live collaboration session on Excalidraw"},"errorDialog":{"title":"Error"},"helpDialog":{"blog":"Read our blog","click":"click","curvedArrow":"Curved arrow","curvedLine":"Curved line","documentation":"Documentation","drag":"drag","editor":"Editor","github":"Found an issue? Submit","howto":"Follow our guides","or":"or","preventBinding":"Prevent arrow binding","shapes":"Shapes","shortcuts":"Keyboard shortcuts","textFinish":"Finish editing (text)","textNewLine":"Add new line (text)","title":"Help","view":"View","zoomToFit":"Zoom to fit all elements","zoomToSelection":"Zoom to selection"},"encrypted":{"tooltip":"Your drawings are end-to-end encrypted so Excalidraw\'s servers will never see them.","link":"Blog post on end-to-end encryption in Excalidraw"},"stats":{"angle":"Angle","element":"Element","elements":"Elements","height":"Height","scene":"Scene","selected":"Selected","storage":"Storage","title":"Stats for nerds","total":"Total","version":"Version","versionCopy":"Click to copy","versionNotAvailable":"Version not available","width":"Width"},"toast":{"copyStyles":"Copied styles.","copyToClipboard":"Copied to clipboard.","copyToClipboardAsPng":"Copied {{exportSelection}} to clipboard as PNG\\n({{exportColorScheme}})","fileSaved":"File saved.","fileSavedToFilename":"Saved to {filename}","canvas":"canvas","selection":"selection"}}')},31:function(e){e.exports=JSON.parse('{"ar-SA":84,"bg-BG":92,"ca-ES":99,"de-DE":100,"el-GR":97,"en":100,"es-ES":99,"fa-IR":87,"fi-FI":99,"fr-FR":100,"he-IL":88,"hi-IN":91,"hu-HU":80,"id-ID":100,"it-IT":100,"ja-JP":96,"kab-KAB":99,"ko-KR":91,"lv-LV":0,"my-MM":75,"nb-NO":100,"nl-NL":100,"nn-NO":100,"oc-FR":100,"pa-IN":93,"pl-PL":94,"pt-BR":100,"pt-PT":99,"ro-RO":100,"ru-RU":97,"sk-SK":100,"sv-SE":100,"tr-TR":100,"uk-UA":100,"zh-CN":100,"zh-TW":99}')},32:function(e,t,n){e.exports={themeFilter:"invert(93%) hue-rotate(180deg)"}},4:function(e,t,n){"use strict";n.d(t,"l",(function(){return i})),n.d(t,"n",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"h",(function(){return l})),n.d(t,"a",(function(){return u})),n.d(t,"k",(function(){return d})),n.d(t,"p",(function(){return h})),n.d(t,"d",(function(){return p})),n.d(t,"c",(function(){return f})),n.d(t,"e",(function(){return b})),n.d(t,"g",(function(){return m})),n.d(t,"f",(function(){return v})),n.d(t,"m",(function(){return g})),n.d(t,"i",(function(){return w})),n.d(t,"j",(function(){return y})),n.d(t,"o",(function(){return x}));var r,a=n(32),o=n.n(a),i=8,c=Math.PI/12,s={TEXT:"text",CROSSHAIR:"crosshair",GRABBING:"grabbing",POINTER:"pointer",MOVE:"move",AUTO:""};!function(e){e.COPY="copy",e.PASTE="paste",e.CUT="cut",e.KEYDOWN="keydown",e.KEYUP="keyup",e.MOUSE_MOVE="mousemove",e.RESIZE="resize",e.UNLOAD="unload",e.BLUR="blur",e.DRAG_OVER="dragover",e.DROP="drop",e.GESTURE_END="gestureend",e.BEFORE_UNLOAD="beforeunload",e.GESTURE_START="gesturestart",e.GESTURE_CHANGE="gesturechange",e.POINTER_MOVE="pointermove",e.POINTER_UP="pointerup",e.STATE_CHANGE="statechange",e.WHEEL="wheel",e.TOUCH_START="touchstart",e.TOUCH_END="touchend",e.HASHCHANGE="hashchange",e.VISIBILITY_CHANGE="visibilitychange",e.SCROLL="scroll"}(r||(r={}));var l={TEST:"test",DEVELOPMENT:"development"},u={SHAPE_ACTIONS_MENU:"App-menu__left"},d={1:"Virgil",2:"Helvetica",3:"Cascadia"},h="Segoe UI Emoji",p=20,f=1,b="left",m="top",v="{version}",g={excalidraw:"application/vnd.excalidraw+json",excalidrawlib:"application/vnd.excalidrawlib+json"},w={excalidraw:"excalidraw",excalidrawClipboard:"excalidraw/clipboard",excalidrawLibrary:"excalidrawlib"},y=window.location.origin,x=o.a.themeFilter},42:function(e,t,n){},43:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){var r={"./ar-SA.json":[50,0],"./bg-BG.json":[51,1],"./ca-ES.json":[52,2],"./de-DE.json":[53,3],"./el-GR.json":[54,4],"./en.json":[30],"./es-ES.json":[55,5],"./fa-IR.json":[56,6],"./fi-FI.json":[57,7],"./fr-FR.json":[58,8],"./he-IL.json":[59,9],"./hi-IN.json":[60,10],"./hu-HU.json":[61,11],"./id-ID.json":[62,12],"./it-IT.json":[63,13],"./ja-JP.json":[64,14],"./kab-KAB.json":[65,15],"./ko-KR.json":[66,16],"./lv-LV.json":[67,17],"./my-MM.json":[68,18],"./nb-NO.json":[69,19],"./nl-NL.json":[70,20],"./nn-NO.json":[71,21],"./oc-FR.json":[72,22],"./pa-IN.json":[73,23],"./percentages.json":[31],"./pl-PL.json":[74,24],"./pt-BR.json":[75,25],"./pt-PT.json":[76,26],"./ro-RO.json":[77,27],"./ru-RU.json":[78,28],"./sk-SK.json":[79,29],"./sv-SE.json":[80,30],"./tr-TR.json":[81,31],"./uk-UA.json":[82,32],"./zh-CN.json":[83,33],"./zh-TW.json":[84,34]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n.t(a,3)}))}a.keys=function(){return Object.keys(r)},a.id=47,e.exports=a},48:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var r=n(6),a=n(9),o=n.n(a),i=n(23),c=n.n(i),s=(n(42),n(43),n(3)),l=n.n(s),u=n(5),d=n(0),h=n(1),p=n(13),f=(n(45),n(46),function(e){var t=e.link,n=e.size,a=e.fill,o=e.color;return Object(r.jsx)("a",{href:t,className:"GitHubCorner-container","aria-label":"View source on GitHub",target:"_blank",rel:"noopener noreferrer",children:Object(r.jsxs)("svg",{width:n||80,height:n||80,viewBox:"0 0 250 250",style:{fill:a||"#151513",color:o||"#fff",position:"absolute",top:0,border:0,right:0},"aria-hidden":"true",children:[Object(r.jsx)("path",{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"}),Object(r.jsx)("path",{d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2",fill:"currentColor",style:{transformOrigin:"130px 106px"},className:"GitHubCorner-octo-arm"}),Object(r.jsx)("path",{d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z",fill:"currentColor",className:"GitHubCorner-octo-body"})]})})}),b=n(2),m=n(8),v=function(e){return[m.red[e],m.pink[e],m.grape[e],m.violet[e],m.indigo[e],m.blue[e],m.cyan[e],m.teal[e],m.green[e],m.lime[e],m.yellow[e],m.orange[e]]},g=([m.white,m.gray[0],m.gray[1]].concat(Object(h.a)(v(0))),["transparent",m.gray[4],m.gray[6]].concat(Object(h.a)(v(6))),[m.black,m.gray[8],m.gray[7]].concat(Object(h.a)(v(9))),n(4)),w=(/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),/^Win/.test(window.navigator.platform),"http://www.w3.org/2000/svg"),y=null,x=function(){if(y)return y;var e=new Date,t=e.getFullYear(),n="".concat(e.getMonth()+1).padStart(2,"0"),r="".concat(e.getDate()).padStart(2,"0"),a="".concat(e.getHours()).padStart(2,"0"),o="".concat(e.getMinutes()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(r,"-").concat(a).concat(o)},S=function(e){var t=e.fontFamily;return"".concat(g.k[t],", ").concat(g.p)},k=function(e){var t=e.fontSize,n=e.fontFamily;return"".concat(t,"px ").concat(S({fontFamily:n}))},j=function(e,t){var n=document.createElement("div"),r=document.body;n.style.position="absolute",n.style.whiteSpace="pre",n.style.font=t,r.appendChild(n),n.innerText=e.split("\n").map((function(e){return e||" "})).join("\n");var a=n.offsetWidth,o=n.offsetHeight,i=document.createElement("span");i.style.display="inline-block",i.style.overflow="hidden",i.style.width="1px",i.style.height="1px",n.appendChild(i);var c=i.offsetTop+i.offsetHeight;return document.body.removeChild(n),{width:a,height:o,baseline:c}},O=function(e,t){return Math.abs(e-t)},E=function(e,t){var n=e.clientX,r=e.clientY,a=t.zoom,o=t.offsetLeft,i=t.offsetTop,c=t.scrollX,s=t.scrollY,l=1/a.value;return{x:(n-a.translation.x-o)*l-c,y:(r-a.translation.y-i)*l-s}},A=function(e,t){var n=e.sceneX,r=e.sceneY,a=t.zoom,o=t.offsetLeft,i=t.offsetTop,c=t.scrollX,s=t.scrollY;return{x:(n+c+o)*a.value+a.translation.x,y:(r+s+i)*a.value+a.translation.y}},M=new RegExp("^[^".concat("A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02b8\u0300-\u0590\u0800-\u1fff\u2c00-\ufb1c\ufdfe-\ufe6f\ufefd-\uffff","]*[").concat("\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc","]")),C=function(e){return M.test(e)},N=function(e){var t=Object(d.a)(e,2);return{x:t[0],y:t[1]}},I=function(e){return null!=e&&"text"===e.type},T=function(e){return null!=e&&L(e.type)},L=function(e){return"freedraw"===e},P=function(e){return null!=e&&D(e.type)},D=function(e){return"arrow"===e||"line"===e},B=function(e){return null!=e&&R(e.type)},R=function(e){return"arrow"===e},z=function(e){return null!=e&&("rectangle"===e.type||"diamond"===e.type||"ellipse"===e.type||"text"===e.type)},F=n(7),_=(n(33),function(e,t,n,r,a){return[(e-n)*Math.cos(a)-(t-r)*Math.sin(a)+n,(e-n)*Math.sin(a)+(t-r)*Math.cos(a)+r]}),W=function(e,t,n){return _(e[0],e[1],t[0],t[1],n)},U=function(e,t,n,r){var a=n-e,o=r-t;return Math.hypot(a,o)},G=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(e.length>=3){var n=[e[0],e[e.length-1]],r=n[0],a=n[1],o=U(r[0],r[1],a[0],a[1]);return o<=g.l/t}return!1},Y=function(e,t,n){var r=e.length;if(r<3)return!1;for(var a=[Number.MAX_SAFE_INTEGER,n],o=[t,n],i=0,c=0;c<r;c++){var s=e[c],l=e[(c+1)%r];if(V(s,l,o,a)){if(0===X(s,o,l))return H(s,o,l);i++}}return i%2===1},H=function(e,t,n){return t[0]<=Math.max(e[0],n[0])&&t[0]>=Math.min(e[0],n[0])&&t[1]<=Math.max(e[1],n[1])&&t[1]>=Math.min(e[1],n[1])},X=function(e,t,n){var r=(t[1]-e[1])*(n[0]-t[0])-(t[0]-e[0])*(n[1]-t[1]);return 0===r?0:r>0?1:2},V=function(e,t,n,r){var a=X(e,t,n),o=X(e,t,r),i=X(n,r,e),c=X(n,r,t);return a!==o&&i!==c||(!(0!==a||!H(e,n,t))||(!(0!==o||!H(e,r,t))||(!(0!==i||!H(n,e,r))||!(0!==c||!H(n,t,r)))))},Z=n(15),K=function(e){return T(e)?$(e):P(e)?ee(e):[e.x,e.y,e.x+e.width,e.y+e.height]},J=function(e){var t,n=Object(F.a)(e.sets);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("path"===r.type)return r.ops}}catch(a){n.e(a)}finally{n.f()}return e.sets[0].ops},q=function(e,t){var n=[0,0],r=e.reduce((function(e,r){var a=r.op,o=r.data;if("move"===a)n=o;else if("bcurveTo"===a){var i=[o[0],o[1]],c=[o[2],o[3]],s=[o[4],o[5]],l=n;n=s;for(var u=function(e,t){return Math.pow(1-e,3)*s[t]+3*e*Math.pow(1-e,2)*c[t]+3*Math.pow(e,2)*(1-e)*i[t]+l[t]*Math.pow(e,3)},h=0;h<=1;){var p=u(h,0),f=u(h,1);if(t){var b=t(p,f),m=Object(d.a)(b,2);p=m[0],f=m[1]}e.minY=Math.min(e.minY,f),e.minX=Math.min(e.minX,p),e.maxX=Math.max(e.maxX,p),e.maxY=Math.max(e.maxY,f),h+=.1}}return e}),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});return[r.minX,r.minY,r.maxX,r.maxY]},Q=function(e){var t,n=1/0,r=1/0,a=-1/0,o=-1/0,i=Object(F.a)(e);try{for(i.s();!(t=i.n()).done;){var c=Object(d.a)(t.value,2),s=c[0],l=c[1];n=Math.min(n,s),r=Math.min(r,l),a=Math.max(a,s),o=Math.max(o,l)}}catch(u){i.e(u)}finally{i.f()}return[n,r,a,o]},$=function(e){var t=Q(e.points),n=Object(d.a)(t,4),r=n[0],a=n[1],o=n[2],i=n[3];return[r+e.x,a+e.y,o+e.x,i+e.y]},ee=function(e){var t;if(e.points.length<2||!Se(e)){var n=e.points.reduce((function(e,t){var n=Object(d.a)(t,2),r=n[0],a=n[1];return e.minY=Math.min(e.minY,a),e.minX=Math.min(e.minX,r),e.maxX=Math.max(e.maxX,r),e.maxY=Math.max(e.maxY,a),e}),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}),r=n.minX,a=n.minY,o=n.maxX,i=n.maxY;t=[r+e.x,a+e.y,o+e.x,i+e.y]}else{var c=Se(e),s=J(c[0]),l=q(s),u=Object(d.a)(l,4),h=u[0],p=u[1],f=u[2],b=u[3];t=[h+e.x,p+e.y,f+e.x,b+e.y]}return t},te=function(e){var t,n=K(e),r=Object(d.a)(n,4),a=r[0],o=r[1],i=r[2],c=r[3],s=(a+i)/2,l=(o+c)/2;if(T(e)){var u=Q(e.points.map((function(t){var n=Object(d.a)(t,2),r=n[0],a=n[1];return _(r,a,s-e.x,l-e.y,e.angle)}))),h=Object(d.a)(u,4),p=h[0],f=h[1],b=h[2],m=h[3];return[p+e.x,f+e.y,b+e.x,m+e.y]}if(P(e))t=function(e,t,n){if(e.points.length<2||!Se(e)){var r=e.points.reduce((function(r,a){var o=Object(d.a)(a,2),i=o[0],c=o[1],s=_(e.x+i,e.y+c,t,n,e.angle),l=Object(d.a)(s,2);return i=l[0],c=l[1],r.minY=Math.min(r.minY,c),r.minX=Math.min(r.minX,i),r.maxX=Math.max(r.maxX,i),r.maxY=Math.max(r.maxY,c),r}),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});return[r.minX,r.minY,r.maxX,r.maxY]}var a=Se(e),o=J(a[0]);return q(o,(function(r,a){return _(e.x+r,e.y+a,t,n,e.angle)}))}(e,s,l);else if("diamond"===e.type){var v=_(s,o,s,l,e.angle),g=Object(d.a)(v,2),w=g[0],y=g[1],x=_(s,c,s,l,e.angle),S=Object(d.a)(x,2),k=S[0],j=S[1],O=_(a,l,s,l,e.angle),E=Object(d.a)(O,2),A=E[0],M=E[1],C=_(i,l,s,l,e.angle),N=Object(d.a)(C,2),I=N[0],L=N[1];t=[Math.min(w,k,A,I),Math.min(y,j,M,L),Math.max(w,k,A,I),Math.max(y,j,M,L)]}else if("ellipse"===e.type){var D=(i-a)/2,B=(c-o)/2,R=Math.cos(e.angle),z=Math.sin(e.angle),F=Math.hypot(D*R,B*z),W=Math.hypot(B*R,D*z);t=[s-F,l-W,s+F,l+W]}else{var U=_(a,o,s,l,e.angle),G=Object(d.a)(U,2),Y=G[0],H=G[1],X=_(a,c,s,l,e.angle),V=Object(d.a)(X,2),Z=V[0],$=V[1],ee=_(i,c,s,l,e.angle),te=Object(d.a)(ee,2),ne=te[0],re=te[1],ae=_(i,o,s,l,e.angle),oe=Object(d.a)(ae,2),ie=oe[0],ce=oe[1];t=[Math.min(Y,Z,ne,ie),Math.min(H,$,re,ce),Math.max(Y,Z,ne,ie),Math.max(H,$,re,ce)]}return t},ne=function(e){if(!e.length)return[0,0,0,0];var t=1/0,n=-1/0,r=1/0,a=-1/0;return e.forEach((function(e){var o=te(e),i=Object(d.a)(o,4),c=i[0],s=i[1],l=i[2],u=i[3];t=Math.min(t,c),r=Math.min(r,s),n=Math.max(n,l),a=Math.max(a,u)})),[t,r,n,a]},re=function(e,t,n){var r=Z.a.generator(),a="sharp"===n?r.linearPath(t,ke(e)):r.curve(t,ke(e)),o=J(a),i=q(o),c=Object(d.a)(i,4),s=c[0],l=c[1],u=c[2],h=c[3];return[s+e.x,l+e.y,u+e.x,h+e.y]},ae=n(30),oe=n(31),ie={code:"en",label:"English"},ce=[{code:"ar-SA",label:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",rtl:!0},{code:"bg-BG",label:"\u0411\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438"},{code:"ca-ES",label:"Catal\xe0"},{code:"de-DE",label:"Deutsch"},{code:"el-GR",label:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac"},{code:"es-ES",label:"Espa\xf1ol"},{code:"fa-IR",label:"\u0641\u0627\u0631\u0633\u06cc",rtl:!0},{code:"fi-FI",label:"Suomi"},{code:"fr-FR",label:"Fran\xe7ais"},{code:"he-IL",label:"\u05e2\u05d1\u05e8\u05d9\u05ea",rtl:!0},{code:"hi-IN",label:"\u0939\u093f\u0928\u094d\u0926\u0940"},{code:"hu-HU",label:"Magyar"},{code:"id-ID",label:"Bahasa Indonesia"},{code:"it-IT",label:"Italiano"},{code:"ja-JP",label:"\u65e5\u672c\u8a9e"},{code:"kab-KAB",label:"Taqbaylit"},{code:"ko-KR",label:"\ud55c\uad6d\uc5b4"},{code:"my-MM",label:"Burmese"},{code:"nb-NO",label:"Norsk bokm\xe5l"},{code:"nl-NL",label:"Nederlands"},{code:"nn-NO",label:"Norsk nynorsk"},{code:"oc-FR",label:"Occitan"},{code:"pa-IN",label:"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40"},{code:"pl-PL",label:"Polski"},{code:"pt-BR",label:"Portugu\xeas Brasileiro"},{code:"pt-PT",label:"Portugu\xeas"},{code:"ro-RO",label:"Rom\xe2n\u0103"},{code:"ru-RU",label:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439"},{code:"sk-SK",label:"Sloven\u010dina"},{code:"sv-SE",label:"Svenska"},{code:"tr-TR",label:"T\xfcrk\xe7e"},{code:"uk-UA",label:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430"},{code:"zh-CN",label:"\u7b80\u4f53\u4e2d\u6587"},{code:"zh-TW",label:"\u7e41\u9ad4\u4e2d\u6587"},{code:"lv-LV",label:"Latvie\u0161u"}].concat([ie]).sort((function(e,t){return e.label>t.label?1:-1})).filter((function(e){return oe[e.code]>=85})),se="__test__";"production"===g.h.DEVELOPMENT&&ce.unshift({code:se,label:"test language"},{code:"".concat(se,".rtl"),label:"\u202atest language (rtl)\u202c",rtl:!0});var le=ie,ue={},de=function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(void 0===e[r])return;e=e[r]}if("string"===typeof e)return e},he=function(e,t){if(le.code.startsWith(se)){var n=t?"".concat(e,"(").concat(JSON.stringify(t).slice(1,-1),")"):e;return"\u202a[[".concat(n,"]]\u202c")}var r=e.split("."),a=de(ue,r)||de(ae,r);if(void 0===a)throw new Error("Can't find translation for ".concat(e));if(t)for(var o in t)a=a.replace("{{".concat(o,"}}"),t[o]);return a},pe=function(){return{theme:"light",collaborators:new Map,currentChartType:"bar",currentItemBackgroundColor:"transparent",currentItemEndArrowhead:"arrow",currentItemFillStyle:"hachure",currentItemFontFamily:g.c,currentItemFontSize:g.d,currentItemLinearStrokeSharpness:"round",currentItemOpacity:100,currentItemRoughness:1,currentItemStartArrowhead:null,currentItemStrokeColor:m.black,currentItemStrokeSharpness:"sharp",currentItemStrokeStyle:"solid",currentItemStrokeWidth:1,currentItemTextAlign:g.e,cursorButton:"up",draggingElement:null,editingElement:null,editingGroupId:null,editingLinearElement:null,elementLocked:!1,elementType:"selection",errorMessage:null,exportBackground:!0,exportEmbedScene:!1,exportWithDarkMode:!1,fileHandle:null,gridSize:null,isBindingEnabled:!0,isLibraryOpen:!1,isLoading:!1,isResizing:!1,isRotating:!1,lastPointerDownWith:"mouse",multiElement:null,name:"".concat(he("labels.untitled"),"-").concat(x()),openMenu:null,pasteDialog:{shown:!1,data:null},previousSelectedElementIds:{},resizingElement:null,scrolledOutside:!1,scrollX:0,scrollY:0,selectedElementIds:{},selectedGroupIds:{},selectionElement:null,shouldAddWatermark:!1,shouldCacheIgnoreZoom:!1,showHelpDialog:!1,showStats:!1,startBoundElement:null,suggestedBindings:[],toastMessage:null,viewBackgroundColor:m.white,zenModeEnabled:!1,zoom:{value:1,translation:{x:0,y:0}},viewModeEnabled:!1}},fe={theme:{browser:!0,export:!1},collaborators:{browser:!1,export:!1},currentChartType:{browser:!0,export:!1},currentItemBackgroundColor:{browser:!0,export:!1},currentItemEndArrowhead:{browser:!0,export:!1},currentItemFillStyle:{browser:!0,export:!1},currentItemFontFamily:{browser:!0,export:!1},currentItemFontSize:{browser:!0,export:!1},currentItemLinearStrokeSharpness:{browser:!0,export:!1},currentItemOpacity:{browser:!0,export:!1},currentItemRoughness:{browser:!0,export:!1},currentItemStartArrowhead:{browser:!0,export:!1},currentItemStrokeColor:{browser:!0,export:!1},currentItemStrokeSharpness:{browser:!0,export:!1},currentItemStrokeStyle:{browser:!0,export:!1},currentItemStrokeWidth:{browser:!0,export:!1},currentItemTextAlign:{browser:!0,export:!1},cursorButton:{browser:!0,export:!1},draggingElement:{browser:!1,export:!1},editingElement:{browser:!1,export:!1},editingGroupId:{browser:!0,export:!1},editingLinearElement:{browser:!1,export:!1},elementLocked:{browser:!0,export:!1},elementType:{browser:!0,export:!1},errorMessage:{browser:!1,export:!1},exportBackground:{browser:!0,export:!1},exportEmbedScene:{browser:!0,export:!1},exportWithDarkMode:{browser:!0,export:!1},fileHandle:{browser:!1,export:!1},gridSize:{browser:!0,export:!0},height:{browser:!1,export:!1},isBindingEnabled:{browser:!1,export:!1},isLibraryOpen:{browser:!1,export:!1},isLoading:{browser:!1,export:!1},isResizing:{browser:!1,export:!1},isRotating:{browser:!1,export:!1},lastPointerDownWith:{browser:!0,export:!1},multiElement:{browser:!1,export:!1},name:{browser:!0,export:!1},offsetLeft:{browser:!1,export:!1},offsetTop:{browser:!1,export:!1},openMenu:{browser:!0,export:!1},pasteDialog:{browser:!1,export:!1},previousSelectedElementIds:{browser:!0,export:!1},resizingElement:{browser:!1,export:!1},scrolledOutside:{browser:!0,export:!1},scrollX:{browser:!0,export:!1},scrollY:{browser:!0,export:!1},selectedElementIds:{browser:!0,export:!1},selectedGroupIds:{browser:!0,export:!1},selectionElement:{browser:!1,export:!1},shouldAddWatermark:{browser:!0,export:!1},shouldCacheIgnoreZoom:{browser:!0,export:!1},showHelpDialog:{browser:!1,export:!1},showStats:{browser:!0,export:!1},startBoundElement:{browser:!1,export:!1},suggestedBindings:{browser:!1,export:!1},toastMessage:{browser:!1,export:!1},viewBackgroundColor:{browser:!0,export:!0},width:{browser:!1,export:!1},zenModeEnabled:{browser:!0,export:!1},zoom:{browser:!0,export:!1},viewModeEnabled:{browser:!1,export:!1}},be=function(e,t){var n,r={},a=Object(F.a)(Object.keys(e));try{for(a.s();!(n=a.n()).done;){var o=n.value,i=fe[o];(null===i||void 0===i?void 0:i[t])&&(r[o]=e[o])}}catch(c){a.e(c)}finally{a.f()}return r},me=function(e){return be(e,"export")},ve=n(34),ge=(pe(),function(e){return[8,8+e]}),we=function(e){return[1.5,6+e]},ye=new WeakMap,xe=new WeakMap,Se=function(e){return xe.get(e)},ke=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={seed:e.seed,strokeLineDash:"dashed"===e.strokeStyle?ge(e.strokeWidth):"dotted"===e.strokeStyle?we(e.strokeWidth):void 0,disableMultiStroke:"solid"!==e.strokeStyle,strokeWidth:"solid"!==e.strokeStyle?e.strokeWidth+.5:e.strokeWidth,fillWeight:e.strokeWidth/2,hachureGap:4*e.strokeWidth,roughness:e.roughness,stroke:e.strokeColor,preserveVertices:t};switch(e.type){case"rectangle":case"diamond":case"ellipse":return n.fillStyle=e.fillStyle,n.fill="transparent"===e.backgroundColor?void 0:e.backgroundColor,"ellipse"===e.type&&(n.curveFitting=1),n;case"line":return G(e.points)&&(n.fillStyle=e.fillStyle,n.fill="transparent"===e.backgroundColor?void 0:e.backgroundColor),n;case"freedraw":case"arrow":return n;default:throw new Error("Unimplemented type ".concat(e.type))}},je=function(e,t){var n=xe.get(e)||null;if(!n){switch(ye.delete(e),e.type){case"rectangle":if("round"===e.strokeSharpness){var r=e.width,a=e.height,o=.25*Math.min(r,a);n=t.path("M ".concat(o," 0 L ").concat(r-o," 0 Q ").concat(r," 0, ").concat(r," ").concat(o," L ").concat(r," ").concat(a-o," Q ").concat(r," ").concat(a,", ").concat(r-o," ").concat(a," L ").concat(o," ").concat(a," Q 0 ").concat(a,", 0 ").concat(a-o," L 0 ").concat(o," Q 0 0, ").concat(o," 0"),ke(e,!0))}else n=t.rectangle(0,0,e.width,e.height,ke(e));break;case"diamond":var i=function(e){var t=Math.floor(e.width/2)+1,n=e.width,r=Math.floor(e.height/2)+1;return[t,0,n,r,t,e.height,0,r]}(e),c=Object(d.a)(i,8),s=c[0],l=c[1],u=c[2],p=c[3],f=c[4],m=c[5],v=c[6],g=c[7];n=t.polygon([[s,l],[u,p],[f,m],[v,g]],ke(e));break;case"ellipse":n=t.ellipse(e.width/2,e.height/2,e.width,e.height,ke(e));break;case"line":case"arrow":var w=ke(e),y=e.points.length?e.points:[[0,0]];if(n="sharp"===e.strokeSharpness?w.fill?[t.polygon(y,w)]:[t.linearPath(y,w)]:[t.curve(y,w)],"arrow"===e.type){var x=e.startArrowhead,S=void 0===x?null:x,k=e.endArrowhead,j=void 0===k?"arrow":k,O=function(e,n,r,a){var o=function(e,t,n,r){var a=J(t[0]);if(a.length<1)return null;var o="start"===n?1:a.length-1,i=a[o].data,c=[i[4],i[5]],s=[i[2],i[3]],l=[i[0],i[1]],u=a[o-1],h=[0,0];"move"===u.op?h=u.data:"bcurveTo"===u.op&&(h=[u.data[4],u.data[5]]);var p=function(e,t){return Math.pow(1-e,3)*c[t]+3*e*Math.pow(1-e,2)*s[t]+3*Math.pow(e,2)*(1-e)*l[t]+h[t]*Math.pow(e,3)},f="start"===n?h:c,b=Object(d.a)(f,2),m=b[0],v=b[1],g=[p(.3,0),p(.3,1)],w=g[0],y=g[1],x=Math.hypot(m-w,v-y),S=(m-w)/x,k=(v-y)/x,j={arrow:30,bar:15,dot:15}[r],O=e.points.reduce((function(e,t,n,r){var a=Object(d.a)(t,2),o=a[0],i=a[1],c=n>0?r[n-1]:[0,0],s=Object(d.a)(c,2),l=s[0],u=s[1];return e+Math.hypot(o-l,i-u)}),0),E=Math.min(j,O/2),A=m-S*E,M=v-k*E;if("dot"===r)return[m,v,Math.hypot(M-v,A-m)+e.strokeWidth];var C={arrow:20,bar:90}[r],N=_(A,M,m,v,-C*Math.PI/180),I=Object(d.a)(N,2),T=I[0],L=I[1],P=_(A,M,m,v,C*Math.PI/180),D=Object(d.a)(P,2);return[m,v,T,L,D[0],D[1]]}(e,n,r,a);if(null===o)return[];if("dot"===a){var i=Object(d.a)(o,3),c=i[0],s=i[1],l=i[2];return[t.circle(c,s,l,Object(b.a)(Object(b.a)({},w),{},{fill:e.strokeColor,fillStyle:"solid",stroke:"none"}))]}var u=Object(d.a)(o,6),h=u[0],p=u[1],f=u[2],m=u[3],v=u[4],g=u[5];if("dotted"===e.strokeStyle){var y=we(e.strokeWidth-1);w.strokeLineDash=[y[0],y[1]-1]}else delete w.strokeLineDash;return[t.line(f,m,h,p,w),t.line(v,g,h,p,w)]};if(null!==S){var E,A=O(e,n,"start",S);(E=n).push.apply(E,Object(h.a)(A))}if(null!==j){var M,C=O(e,n,"end",j);(M=n).push.apply(M,Object(h.a)(C))}}break;case"freedraw":Ae(e),n=[];break;case"text":n=[]}xe.set(e,n)}},Oe=function(e,t,n,r,a){var o=K(e),i=Object(d.a)(o,4),c=i[0],s=i[1],l=i[2],u=i[3],h=(l-c)/2-(e.x-c),p=(u-s)/2-(e.y-s),f=180*e.angle/Math.PI,b=t.generator;switch(e.type){case"selection":throw new Error("Selection rendering is not supported for SVG");case"rectangle":case"diamond":case"ellipse":je(e,b);var m=t.draw(Se(e)),v=e.opacity/100;1!==v&&(m.setAttribute("stroke-opacity","".concat(v)),m.setAttribute("fill-opacity","".concat(v))),m.setAttribute("stroke-linecap","round"),m.setAttribute("transform","translate(".concat(r||0," ").concat(a||0,") rotate(").concat(f," ").concat(h," ").concat(p,")")),n.appendChild(m);break;case"line":case"arrow":je(e,b);var g=n.ownerDocument.createElementNS(w,"g"),y=e.opacity/100;g.setAttribute("stroke-linecap","round"),Se(e).forEach((function(n){var o=t.draw(n);1!==y&&(o.setAttribute("stroke-opacity","".concat(y)),o.setAttribute("fill-opacity","".concat(y))),o.setAttribute("transform","translate(".concat(r||0," ").concat(a||0,") rotate(").concat(f," ").concat(h," ").concat(p,")")),"line"===e.type&&G(e.points)&&"transparent"!==e.backgroundColor&&o.setAttribute("fill-rule","evenodd"),g.appendChild(o)})),n.appendChild(g);break;case"freedraw":Ae(e);var x=e.opacity/100,k=n.ownerDocument.createElementNS(w,"g");1!==x&&(k.setAttribute("stroke-opacity","".concat(x)),k.setAttribute("fill-opacity","".concat(x))),k.setAttribute("transform","translate(".concat(r||0," ").concat(a||0,") rotate(").concat(f," ").concat(h," ").concat(p,")"));var j=n.ownerDocument.createElementNS(w,"path");k.setAttribute("stroke","none"),k.setAttribute("fill",e.strokeColor),j.setAttribute("d",Me(e)),k.appendChild(j),n.appendChild(k);break;default:if(!I(e))throw new Error("Unimplemented type ".concat(e.type));var O=e.opacity/100,E=n.ownerDocument.createElementNS(w,"g");1!==O&&(E.setAttribute("stroke-opacity","".concat(O)),E.setAttribute("fill-opacity","".concat(O))),E.setAttribute("transform","translate(".concat(r||0," ").concat(a||0,") rotate(").concat(f," ").concat(h," ").concat(p,")"));for(var A=e.text.replace(/\r\n?/g,"\n").split("\n"),M=e.height/A.length,N=e.height-e.baseline,T="center"===e.textAlign?e.width/2:"right"===e.textAlign?e.width:0,L=C(e.text)?"rtl":"ltr",P="center"===e.textAlign?"middle":"right"===e.textAlign||"rtl"===L?"end":"start",D=0;D<A.length;D++){var B=n.ownerDocument.createElementNS(w,"text");B.textContent=A[D],B.setAttribute("x","".concat(T)),B.setAttribute("y","".concat((D+1)*M-N)),B.setAttribute("font-family",S(e)),B.setAttribute("font-size","".concat(e.fontSize,"px")),B.setAttribute("fill",e.strokeColor),B.setAttribute("text-anchor",P),B.setAttribute("style","white-space: pre;"),B.setAttribute("direction",L),E.appendChild(B)}n.appendChild(E)}},Ee=new WeakMap([]);function Ae(e){var t=Me(e),n=new Path2D(t);return Ee.set(e,n),n}function Me(e){var t=e.simulatePressure?e.points:e.points.length?e.points.map((function(t,n){var r=Object(d.a)(t,2);return[r[0],r[1],e.pressures[n]]})):[[0,0,0]],n={simulatePressure:e.simulatePressure,size:6*e.strokeWidth,thinning:.5,smoothing:.5,streamline:.5,easing:function(e){return e*(2-e)},last:!0},r=Object(ve.a)(t,n),a=[],o=Object(d.a)(r,2),i=o[0],c=o[1];a.push("M",i[0],i[1],"Q");for(var s=0;s<r.length;s++)a.push(i[0],i[1],(i[0]+c[0])/2,(i[1]+c[1])/2),i=c,c=r[s];return c=r[0],a.push(i[0],i[1],(i[0]+c[0])/2,(i[1]+c[1])/2),a.push("Z"),a.join(" ")}var Ce=function(e,t,n,r,a){t.setAttribute("opacity","0");var o=e.ownerDocument.createElementNS(w,"animate");o.setAttribute("attributeName","opacity"),o.setAttribute("from","1"),o.setAttribute("to","1"),o.setAttribute("begin","".concat(n,"ms")),o.setAttribute("dur","".concat(r,"ms")),a&&o.setAttribute("fill","freeze"),t.appendChild(o)},Ne=function(e,t,n,r,a){var o,i=function(){var e=window.location.hash.slice(1),t=new URLSearchParams(e),n=t.get("pointerImg"),r=t.get("pointerWidth"),a=t.get("pointerHeight");return n?{img:n,width:r,height:a}:null}();if(i){var c=e.ownerDocument.createElementNS(w,"image");c.setAttribute("href",i.img),i.width&&c.setAttribute("width",i.width),i.height&&c.setAttribute("height",i.height),Ce(e,c,r,a);var s=e.ownerDocument.createElementNS(w,"animateMotion");s.setAttribute("path",function(e){var t=e.match(/(M[^C]*C[^M]*)/g);if(!t)return e;if(t.length<=2)return t[t.length-1];var n=t.reduce((function(e,t,n){var r=t.match(/M([\d.-]+) ([\d.-]+) C([\d.-]+) ([\d.-]+)/)||[],a=Object(d.a)(r,5),o=a[1],i=a[2],c=a[3],s=a[4],l=Math.hypot(Number(c)-Number(o),Number(s)-Number(i));return l>e[1]?[n,l]:e}),[0,0]);return t[Object(d.a)(n,1)[0]]}(n)),s.setAttribute("begin","".concat(r,"ms")),s.setAttribute("dur","".concat(a,"ms")),c.appendChild(s),null===(o=t.parentNode)||void 0===o||o.appendChild(c)}},Ie=function(e,t,n,r){for(var a,o,i=t.getAttribute("d")||"",c=(null===(a=i.match(/M/g))||void 0===a?void 0:a.length)||0,s=((null===(o=i.match(/C/g))||void 0===o?void 0:o.length)||0)/c,l=i,u=function(a){var o=i.replace(new RegExp(["M(\\S+) (\\S+)","((?: C\\S+ \\S+, \\S+ \\S+, \\S+ \\S+){","".concat(a),"})","(?: C\\S+ \\S+, \\S+ \\S+, \\S+ \\S+){1,}"].join(""),"g"),(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[3]?t[3].match(/.* (\S+) (\S+)$/).slice(1,3):[t[1],t[2]],o=Object(d.a)(r,2),i=o[0],c=o[1];return"M".concat(t[1]," ").concat(t[2]).concat(t[3])+" C".concat(i," ").concat(c,", ").concat(i," ").concat(c,", ").concat(i," ").concat(c).repeat(s-a)}));0===a&&t.setAttribute("d",o);var c=e.ownerDocument.createElementNS(w,"animate");c.setAttribute("attributeName","d"),c.setAttribute("from",o),c.setAttribute("to",l),c.setAttribute("begin","".concat(n+a*(r/s),"ms")),c.setAttribute("dur","".concat(r/s,"ms")),c.setAttribute("fill","freeze"),t.appendChild(c),l=o},h=s-1;h>=0;h-=1)u(h);Ne(e,t,i,n,r),Ce(e,t,n,r,!0)},Te=function(e,t,n,r){var a=t.getAttribute("d")||"";if(a.includes("C"))Ie(e,t,n,r);else{var o=a.replace(new RegExp(["M(\\S+) (\\S+)","((?: L\\S+ \\S+){1,})"].join("")),(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"M".concat(t[1]," ").concat(t[2])+t[3].replace(/L\S+ \S+/g,"L".concat(t[1]," ").concat(t[2]))}));t.setAttribute("d",o);var i=e.ownerDocument.createElementNS(w,"animate");i.setAttribute("attributeName","d"),i.setAttribute("from",o),i.setAttribute("to",a),i.setAttribute("begin","".concat(n,"ms")),i.setAttribute("dur","".concat(r,"ms")),i.setAttribute("fill","freeze"),t.appendChild(i)}},Le=function(e,t,n,r){var a,o,i,c,s=t.getAttribute("d")||"",l=(null===(a=s.match(/M/g))||void 0===a?void 0:a.length)||0,u=(null===(o=s.match(/C/g))||void 0===o?void 0:o.length)||0;l===u+1&&(l=(null===(i=(s=s.replace(/^M\S+ \S+ M/,"M")).match(/M/g))||void 0===i?void 0:i.length)||0,u=(null===(c=s.match(/C/g))||void 0===c?void 0:c.length)||0);if(l!==u)throw new Error("unexpected m/c counts");for(var p=t.getAttribute("stroke-dasharray")?1:Math.min(2,l),f=l/p,b=s,m=function(a){var o=s.replace(new RegExp(["((?:","M(\\S+) (\\S+) C\\S+ \\S+, \\S+ \\S+, \\S+ \\S+ ?".repeat(p),"){","".concat(a),"})","M(\\S+) (\\S+) C\\S+ \\S+, \\S+ \\S+, \\S+ \\S+ ?".repeat(p),".*"].join("")),(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"".concat(t[1])+Object(h.a)(Array(p).keys()).map((function(e){var n=t.slice(2+2*p+2*e),r=Object(d.a)(n,2),a=r[0],o=r[1];return"M".concat(a," ").concat(o," C").concat(a," ").concat(o,", ").concat(a," ").concat(o,", ").concat(a," ").concat(o," ")})).join("").repeat(f-a)}));0===a&&t.setAttribute("d",o);var i=e.ownerDocument.createElementNS(w,"animate");i.setAttribute("attributeName","d"),i.setAttribute("from",o),i.setAttribute("to",b),i.setAttribute("begin","".concat(n+a*(r/f),"ms")),i.setAttribute("dur","".concat(r/f,"ms")),i.setAttribute("fill","freeze"),t.appendChild(i),b=o,Ne(e,t,s.replace(new RegExp(["(?:","M\\S+ \\S+ C\\S+ \\S+, \\S+ \\S+, \\S+ \\S+ ?".repeat(p),"){","".concat(a),"}","(M\\S+ \\S+ C\\S+ \\S+, \\S+ \\S+, \\S+ \\S+) ?".repeat(p),".*"].join("")),"$1"),n+a*(r/f),r/f)},v=f-1;v>=0;v-=1)m(v);Ce(e,t,n,r,!0)},Pe=0,De=function(e,t,n,r,a,o){var i=e.ownerDocument.createElementNS(w,"path"),c=e.ownerDocument.createElementNS(w,"animate");c.setAttribute("attributeName","d"),c.setAttribute("from",n),c.setAttribute("to",r),c.setAttribute("begin","".concat(a,"ms")),c.setAttribute("dur","".concat(o,"ms")),i.appendChild(c),t.appendChild(i)},Be=function(e,t,n,r,a){var o=t.childNodes,i=o.length;o.forEach((function(t){!function(e,t,n,r,a){var o;if("start"!==(n.getAttribute("text-anchor")||"start")){var i=n.getAttribute("opacity")||"1.0",c=e.ownerDocument.createElementNS(w,"animate");return c.setAttribute("attributeName","opacity"),c.setAttribute("from","0.0"),c.setAttribute("to",i),c.setAttribute("begin","".concat(r,"ms")),c.setAttribute("dur","".concat(a,"ms")),c.setAttribute("fill","freeze"),n.appendChild(c),void n.setAttribute("opacity","0.0")}var s=Number(n.getAttribute("x")||0),l=Number(n.getAttribute("y")||0);Pe+=1;var u=e.ownerDocument.createElementNS(w,"path");u.setAttribute("id","pathForText"+Pe);var d=e.ownerDocument.createElementNS(w,"animate");d.setAttribute("attributeName","d"),d.setAttribute("from","m".concat(s," ").concat(l," h0")),d.setAttribute("to","m".concat(s," ").concat(l," h").concat(t)),d.setAttribute("begin","".concat(r,"ms")),d.setAttribute("dur","".concat(a,"ms")),d.setAttribute("fill","freeze"),u.appendChild(d);var h=e.ownerDocument.createElementNS(w,"textPath");h.setAttribute("href","#pathForText"+Pe),h.textContent=n.textContent,n.textContent=" ",null===(o=function(e,t){for(var n=e.childNodes,r=0;r<n.length;++r)if(n[r].tagName===t)return n[r];return null}(e,"defs"))||void 0===o||o.appendChild(u),n.appendChild(h),Ne(e,n,"m".concat(s," ").concat(l," h").concat(t),r,a)}(e,n,t,r,a/i),r+=a/i}))},Re=function(e,t,n,r,a){var o=n.type,i=n.strokeSharpness,c=n.width;"line"===o?function(e,t,n,r,a){var o="sharp"!==n?Ie:Le,i=t.childNodes;i[0].getAttribute("fill-rule")?(o(e,i[0].childNodes[1],r,.75*a),r+=.75*a,Te(e,i[0].childNodes[0],r,.25*a)):o(e,i[0].childNodes[0],r,a)}(e,t,i,r,a):"arrow"===o?function(e,t,n,r,a){var o="sharp"!==n?Ie:Le,i=t.childNodes.length;o(e,t.childNodes[0].childNodes[0],r,a/(i+2)*3),r+=a/(i+2)*3;for(var c=1;c<i;c+=1)for(var s=t.childNodes[c].childNodes.length,l=0;l<s;l+=1)Ie(e,t.childNodes[c].childNodes[l],r,a/(i+2)/s),r+=a/(i+2)/s}(e,t,i,r,a):"rectangle"===o||"diamond"===o?function(e,t,n,r){t.childNodes[1]?(Le(e,t.childNodes[1],n,.75*r),n+=.75*r,Te(e,t.childNodes[0],n,.25*r)):Le(e,t.childNodes[0],n,r)}(e,t,r,a):"ellipse"===o?function(e,t,n,r){t.childNodes[1]?(Ie(e,t.childNodes[1],n,.75*r),n+=.75*r,Te(e,t.childNodes[0],n,.25*r)):Ie(e,t.childNodes[0],n,r)}(e,t,r,a):"text"===o?Be(e,t,c,r,a):"freedraw"===n.type&&function(e,t,n,r,a){var o=t.childNodes[0];o.setAttribute("opacity","0");var i=e.ownerDocument.createElementNS(w,"animate");i.setAttribute("attributeName","opacity"),i.setAttribute("from","0"),i.setAttribute("to","1"),i.setAttribute("calcMode","discrete"),i.setAttribute("begin","".concat(r+a-1,"ms")),i.setAttribute("dur","".concat(1,"ms")),i.setAttribute("fill","freeze"),o.appendChild(i);for(var c=n.points.length,s=o.getAttribute("d"),l=c-1;l>=0;l-=1){var u=l>0?Me(Object(b.a)(Object(b.a)({},n),{},{points:n.points.slice(0,l)})):"M 0 0";De(e,t,u,s,r+l*(a/c),a/c),s=u}}(e,t,n,r,a)},ze=function(e,t){var n=e.id.match(new RegExp("".concat(t,":(-?\\d+)")));return n&&Number(n[1])||0},Fe=function(e,t,n){var r,a=function(e,t){var n={},r=0;return e.childNodes.forEach((function(e){if("g"===e.tagName){var a=t[r].groupIds;if(a.length>=1){var o=a[0];n[o]=n[o]||[],n[o].push([e,r])}r+=1}})),n}(e,t),o=new Map,i=null!==n&&void 0!==n?n:1e3,c=(r=e.childNodes,Object(h.a)(r).filter((function(e){return"g"===e.tagName})));if(c.length!==t.length)throw new Error("element length mismatch");var s=new Map(c.map((function(e,n){return[e,t[n]]})));return function(e,t){return Object(h.a)(e).sort((function(n,r){var a=e.indexOf(n),o=e.indexOf(r);return ze(t[a],"animateOrder")-ze(t[o],"animateOrder")}))}(c,t).forEach((function(n){var r=s.get(n),c=r.groupIds;if(!o.has(n))if(c.length>=1){var l=c[0],u=a[l],h=ze(r,"animateDuration")||5e3/(u.length+1);Re(e,n,r,i,h),i+=h,o.set(n,!0),u.forEach((function(n){var r=Object(d.a)(n,2),a=r[0],c=r[1],s=ze(t[c],"animateDuration")||5e3/(u.length+1);o.has(a)||(Re(e,a,t[c],i,s),i+=s,o.set(a,!0))})),delete a[l]}else{var p=ze(r,"animateDuration")||500;Re(e,n,r,i,p),i+=p,o.set(n,!0)}})),{finishedMs:i+1e3}},_e=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.getCurrentTime(),t.setCurrentTime(0),r=(new XMLSerializer).serializeToString(t),t.setCurrentTime(n),e.next=6,Object(p.b)(new Blob([r],{type:"image/svg+xml"}),{fileName:"excalidraw-animate.svg",extensions:[".svg"]});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),We=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.b)(new Blob([t],{type:"video/webm"}),{fileName:"excalidraw-animate.webm",extensions:[".webm"]});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ue=function(e){return new Promise(function(){var t=Object(u.a)(l.a.mark((function t(n,r){var a,o,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.mediaDevices.getDisplayMedia({video:{cursor:"never",displaySurface:"browser"}});case 3:a=t.sent,(o=new MediaRecorder(a)).ondataavailable=function(e){n(e.data)},i=0,e.forEach((function(e){var t=e.svg,n=e.finishedMs;i=Math.max(i,n),t.pauseAnimations(),t.setCurrentTime(0)})),o.start(),e.forEach((function(e){e.svg.unpauseAnimations()})),setTimeout((function(){o.stop(),a.getVideoTracks()[0].stop()}),i),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),r(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,n){return t.apply(this,arguments)}}())},Ge=n(10),Ye=n(11),He=function(e){return"string"===typeof e},Xe=function(){function e(){Object(Ge.a)(this,e),this.callbacks=new Set,this.nonDeletedElements=[],this.elements=[],this.elementsMap=new Map}return Object(Ye.a)(e,[{key:"getElementsIncludingDeleted",value:function(){return this.elements}},{key:"getElements",value:function(){return this.nonDeletedElements}},{key:"getElement",value:function(e){return this.elementsMap.get(e)||null}},{key:"getNonDeletedElement",value:function(e){var t=this.getElement(e);return t&&sn(t)?t:null}},{key:"getNonDeletedElements",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.getNonDeletedElement(e);null!=r&&n.push(r)})),n}},{key:"replaceAllElements",value:function(t){var n=this;this.elements=t,this.elementsMap.clear(),t.forEach((function(t){n.elementsMap.set(t.id,t),e.mapElementToScene(t,n)})),this.nonDeletedElements=cn(this.elements),this.informMutation()}},{key:"informMutation",value:function(){for(var e=0,t=Array.from(this.callbacks);e<t.length;e++){(0,t[e])()}}},{key:"addCallback",value:function(e){var t=this;if(this.callbacks.has(e))throw new Error;return this.callbacks.add(e),function(){if(!t.callbacks.has(e))throw new Error;t.callbacks.delete(e)}}},{key:"destroy",value:function(){var t=this;e.sceneMapById.forEach((function(n,r){n===t&&e.sceneMapById.delete(r)})),this.callbacks.clear()}}],[{key:"mapElementToScene",value:function(e,t){He(e)?this.sceneMapById.set(e,t):this.sceneMapByElement.set(e,t)}},{key:"getScene",value:function(e){return He(e)?this.sceneMapById.get(e)||null:this.sceneMapByElement.get(e)||null}}]),e}();Xe.sceneMapByElement=new WeakMap,Xe.sceneMapById=new Map;var Ve=Xe,Ze=n(16),Ke=n(36),Je=new Ze.a(Date.now()),qe=function(){return Math.floor(Je.next()*Math.pow(2,31))},Qe=function(){return Object(Ke.a)()},$e=function(e,t){var n,r=!1,a=t.points;for(var o in"undefined"!==typeof a&&(t=Object(b.a)(Object(b.a)({},function(e){var t=e.map((function(e){return e[0]})),n=e.map((function(e){return e[1]}));return{width:Math.max.apply(Math,Object(h.a)(t))-Math.min.apply(Math,Object(h.a)(t)),height:Math.max.apply(Math,Object(h.a)(n))-Math.min.apply(Math,Object(h.a)(n))}}(a)),t)),t){var i=t[o];if("undefined"!==typeof i){if(e[o]===i&&("object"!==typeof i||null===i||"groupIds"===o))continue;if("points"===o){var c=e[o],s=i;if(c.length===s.length){for(var l=!1,u=c.length;--u;){var d=c[u],p=s[u];if(d[0]!==p[0]||d[1]!==p[1]){l=!0;break}}if(!l)continue}}e[o]=i,r=!0}}r&&("undefined"===typeof t.height&&"undefined"===typeof t.width&&"undefined"===typeof a||function(e){xe.delete(e)}(e),e.version++,e.versionNonce=qe(),null===(n=Ve.getScene(e))||void 0===n||n.informMutation())},et=function(e,t){var n=!1;for(var r in t){var a=t[r];if("undefined"!==typeof a){if(e[r]===a&&("object"!==typeof a||null===a||"groupIds"===r))continue;n=!0}}return n?Object(b.a)(Object(b.a)(Object(b.a)({},e),t),{},{version:e.version+1,versionNonce:qe()}):e},tt=function(e){return P(e)||T(e)?e.points.length<2:0===e.width&&0===e.height},nt=n(28),rt=n(12),at=function(e,t,n){if(!(e=on(e)).length)return{scrollX:0,scrollY:0};var r=ne(e),a=Object(d.a)(r,4),o=a[0],i=a[1],c=a[2],s=a[3];if(function(e,t,n){var r=Object(d.a)(n,4),a=r[0],o=r[1],i=r[2],c=r[3],s=A({sceneX:a,sceneY:o},e),l=s.x,u=s.y,h=A({sceneX:i,sceneY:c},e),p=h.x,f=h.y;return p-l>e.width||f-u>e.height}(t,0,[o,i,c,s])){var l=function(e,t){if(!e.length)return[0,0,0,0];var n=1/0,r=e[0];return e.forEach((function(e){var a=te(e),o=Object(d.a)(a,4),i=o[0],c=o[1],s=o[2],l=o[3],u=U((i+s)/2,(c+l)/2,t.x,t.y);u<n&&(n=u,r=e)})),te(r)}(e,E({clientX:t.scrollX,clientY:t.scrollY},t)),u=Object(d.a)(l,4);o=u[0],i=u[1],c=u[2],s=u[3]}return function(e){var t=e.scenePoint,n=e.viewportDimensions,r=e.zoom;return{scrollX:n.width/2*(1/r.value)-t.x-r.translation.x*(1/r.value),scrollY:n.height/2*(1/r.value)-t.y-r.translation.y*(1/r.value)}}({scenePoint:{x:(o+c)/2,y:(i+s)/2},viewportDimensions:{width:t.width,height:t.height},zoom:t.zoom})},ot=function(e,t){var n,r,a=t.x,o=t.y,i=t.strokeColor,c=t.backgroundColor,s=t.fillStyle,l=t.strokeWidth,u=t.strokeStyle,d=t.roughness,h=t.opacity,p=t.width,f=void 0===p?0:p,b=t.height,m=void 0===b?0:b,v=t.angle,g=void 0===v?0:v,w=t.groupIds,y=void 0===w?[]:w,x=t.strokeSharpness,S=t.boundElementIds,k=void 0===S?null:S,j=Object(nt.a)(t,["x","y","strokeColor","backgroundColor","fillStyle","strokeWidth","strokeStyle","roughness","opacity","width","height","angle","groupIds","strokeSharpness","boundElementIds"]);return{id:j.id||Qe(),type:e,x:a,y:o,width:f,height:m,angle:g,strokeColor:i,backgroundColor:c,fillStyle:s,strokeWidth:l,strokeStyle:u,roughness:d,opacity:h,groupIds:y,strokeSharpness:x,seed:null!==(n=j.seed)&&void 0!==n?n:qe(),version:j.version||1,versionNonce:null!==(r=j.versionNonce)&&void 0!==r?r:0,isDeleted:!1,boundElementIds:k}},it=function(e,t){return{x:"center"===e.textAlign?t.width/2:"right"===e.textAlign?t.width:0,y:"middle"===e.verticalAlign?t.height/2:0}},ct=function(e,t){return[0,0,0,0,t,e,1,0]},st=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[0,0,0,0,0,0,0,0];if(t<0||t>7)throw new Error("Expected `index` betwen 0 and 7, got `".concat(t,"`"));return 0!==e&&(n[t]=e),n},lt=function(e){return[e[0],e[1],e[2],e[3],-e[4],-e[5],-e[6],-e[7]]},ut=function(e,t){return wt(t)?[e[0]+t,e[1],e[2],e[3],e[4],e[5],e[6],e[7]]:[e[0]+t[0],e[1]+t[1],e[2]+t[2],e[3]+t[3],e[4]+t[4],e[5]+t[5],e[6]+t[6],e[7]+t[7]]},dt=function(e,t){return wt(t)?[e[0]-t,e[1],e[2],e[3],e[4],e[5],e[6],e[7]]:[e[0]-t[0],e[1]-t[1],e[2]-t[2],e[3]-t[3],e[4]-t[4],e[5]-t[5],e[6]-t[6],e[7]-t[7]]},ht=function(e,t){return wt(t)?[e[0]*t,e[1]*t,e[2]*t,e[3]*t,e[4]*t,e[5]*t,e[6]*t,e[7]*t]:[pt(e,t),t[1]*e[0]+t[0]*e[1]-t[4]*e[2]+t[5]*e[3]+t[2]*e[4]-t[3]*e[5]-t[7]*e[6]-t[6]*e[7],t[2]*e[0]+t[0]*e[2]-t[6]*e[3]+t[3]*e[6],t[3]*e[0]+t[6]*e[2]+t[0]*e[3]-t[2]*e[6],t[4]*e[0]+t[2]*e[1]-t[1]*e[2]+t[7]*e[3]+t[0]*e[4]+t[6]*e[5]-t[5]*e[6]+t[3]*e[7],t[5]*e[0]-t[3]*e[1]+t[7]*e[2]+t[1]*e[3]-t[6]*e[4]+t[0]*e[5]+t[4]*e[6]+t[2]*e[7],t[6]*e[0]+t[3]*e[2]-t[2]*e[3]+t[0]*e[6],t[7]*e[0]+t[6]*e[1]+t[5]*e[2]+t[4]*e[3]+t[3]*e[4]+t[2]*e[5]+t[1]*e[6]+t[0]*e[7]]},pt=function(e,t){return t[0]*e[0]+t[2]*e[2]+t[3]*e[3]-t[6]*e[6]},ft=function(e,t){return[bt(e,t),e[1]*t[7]+e[4]*t[5]-e[5]*t[4]+e[7]*t[1],e[2]*t[7]-e[4]*t[6]+e[6]*t[4]+e[7]*t[2],e[3]*t[7]+e[5]*t[6]-e[6]*t[5]+e[7]*t[3],e[4]*t[7]+e[7]*t[4],e[5]*t[7]+e[7]*t[5],e[6]*t[7]+e[7]*t[6],e[7]*t[7]]},bt=function(e,t){return e[0]*t[7]+e[1]*t[6]+e[2]*t[5]+e[3]*t[4]+e[4]*t[3]+e[5]*t[2]+e[6]*t[1]+e[7]*t[0]},mt=function(e,t){return[t[0]*e[0]+t[2]*e[2]+t[3]*e[3]-t[6]*e[6],t[1]*e[0]+t[0]*e[1]-t[4]*e[2]+t[5]*e[3]+t[2]*e[4]-t[3]*e[5]-t[7]*e[6]-t[6]*e[7],t[2]*e[0]+t[0]*e[2]-t[6]*e[3]+t[3]*e[6],t[3]*e[0]+t[6]*e[2]+t[0]*e[3]-t[2]*e[6],t[4]*e[0]+t[7]*e[3]+t[0]*e[4]+t[3]*e[7],t[5]*e[0]+t[7]*e[2]+t[0]*e[5]+t[2]*e[7],t[6]*e[0]+t[0]*e[6],t[7]*e[0]+t[0]*e[7]]},vt=function(e){return Math.sqrt(Math.abs(e[0]*e[0]-e[2]*e[2]-e[3]*e[3]+e[6]*e[6]))},gt=function(e){var t=vt(e);if(0===t||1===t)return e;var n=e[6]<0?-1:1;return ht(e,n/t)},wt=function(e){return"number"===typeof e},yt=(st(1,1),st(1,2),st(1,3),st(1,4),st(1,5),st(1,6),st(1,7),function(e,t,n){return gt([0,n,e,t,0,0,0,0])}),xt=function(e,t){return gt(ft(t,e))},St=function(e,t){return mt(e,t)},kt=function(e){var t=Object(d.a)(e,2),n=t[0];return[0,0,0,0,t[1],n,1,0]},jt=function(e){return[e[5],e[4]]},Ot=function(e,t){return bt(e,t)},Et=function(e){return[0,0,0,0,e[4],e[5],0,0]},At=function(e,t){return ut(ht(e,Math.sin(t/2)),Math.cos(t/2))},Mt=function(e,t){return gt(ht(ht(e,t),lt(e)))},Ct=n(17),Nt=function(e,t){var n=t.x,r=t.y,a=It(e,e.width,e.height);return Tt({element:e,point:[n,r],threshold:a,check:Dt})},It=function(e,t,n){var r=("diamond"===e.type?1/Math.sqrt(2):1)*Math.min(t,n);return Math.max(16,Math.min(.25*r,32))},Tt=function(e){switch(e.element.type){case"rectangle":case"text":case"diamond":case"ellipse":var t=Lt(e.element,e.point);return e.check(t,e.threshold);case"freedraw":return!!e.check(Bt(e.element,e.point),e.threshold)&&_t(e.element,e.point,e.threshold);case"arrow":case"line":return Wt(e);case"selection":return console.warn("This should not happen, we need to investigate why it does."),!1}},Lt=function(e,t){switch(e.type){case"rectangle":case"text":return Bt(e,t);case"diamond":return Rt(e,t);case"ellipse":return zt(e,t)}},Pt=function(e,t){return e<t},Dt=function(e,t){return 0<=e&&e<t},Bt=function(e,t){var n=Ut(e,t),r=Object(d.a)(n,4),a=r[1],o=r[2],i=r[3];return Math.max(Ot(a,yt(0,1,-i)),Ot(a,yt(1,0,-o)))},Rt=function(e,t){var n=Ut(e,t),r=Object(d.a)(n,4),a=r[1],o=r[2],i=r[3],c=yt(i,o,-i*o);return Ot(a,c)},zt=function(e,t){var n,r=Ft(e,t),a=Object(d.a)(r,2),o=a[0],i=a[1];return n=i,-Math.sign(n[1])*Ot(o,i)},Ft=function(e,t){var n=Ut(e,t),r=Object(d.a)(n,4),a=r[1],o=r[2],i=r[3],c=jt(a),s=Object(d.a)(c,2),l=s[0],u=s[1],h=.707,p=.707,f=o,b=i;[0,1,2,3].forEach((function(e){var t=f*h,n=b*p,r=(f*f-b*b)*Math.pow(h,3)/f,a=(b*b-f*f)*Math.pow(p,3)/b,o=t-r,i=n-a,c=l-r,s=u-a,d=Math.hypot(i,o),m=Math.hypot(s,c);h=Math.min(1,Math.max(0,(c*d/m+r)/f)),p=Math.min(1,Math.max(0,(s*d/m+a)/b));var v=Math.hypot(p,h);h/=v,p/=v}));var m,v=ct(f*h,b*p);return[a,St(xt(a,m=v),m)]},_t=function(e,t,n){var r,a;if(0===e.angle)r=t[0]-e.x,a=t[1]-e.y;else{var o=K(e),i=Object(d.a)(o,4),c=i[0],s=i[1],l=i[2],u=i[3],h=W(t,[c+(l-c)/2,s+(u-s)/2],-e.angle);r=h[0]-e.x,a=h[1]-e.y}var p,f=Object(d.a)(e.points,2),b=f[0],m=f[1];if(2===e.points.length)return U(b[0],b[1],r,a)<n||U(m[0],m[1],r,a)<n;for(var v=1;v<e.points.length-1;v++){var g=[m[0]-b[0],m[1]-b[1]],w=Math.hypot(g[1],g[0]),y=[g[0]/w,g[1]/w],x=[r-b[0],a-b[1]],S=(x[0]*y[0]+x[1]*y[1])/Math.hypot(y[1],y[0]);p=[b[0]+y[0]*S,b[1]+y[1]*S];var k=U(p[0],p[1],b[0],b[1]),j=U(p[0],p[1],m[0],m[1]);if(p=j<k&&k>w?m:k<j&&j>w?b:p,Math.hypot(a-p[1],r-p[0])<n)return!0;b=m,m=e.points[v+1]}return!1},Wt=function(e){var t=e.element,n=e.threshold;if(!Se(t))return!1;var r=Ut(e.element,e.point),a=Object(d.a)(r,4),o=a[0],i=a[1],c=a[2],s=a[3],l=yt(0,1,-s),u=yt(1,0,-c);if(!Pt(Ot(i,l),n)||!Pt(Ot(i,u),n))return!1;var h=jt(o),p=Object(d.a)(h,2),f=p[0],b=p[1],m=Se(t);if(e.check===Pt&&m.some((function(e){return Xt(e,f,b,t.strokeSharpness)})))return!0;return m.some((function(e){return Vt(e,f,b,n)}))},Ut=function(e,t){var n,r=kt(t),a=K(e),o=Yt(a),i=At(o,e.angle),c=Mt(i,r),s=function(e){return[0,0,0,0,Math.abs(e[4]),Math.abs(e[5]),1,0]}(dt(c,Et(o))),l=(n=e.x,[0,0,0,0,e.y,n,0,0]),u=dt(c,l),h=Object(d.a)(a,4),p=h[0],f=h[1];return[u,s,(h[2]-p)/2,(h[3]-f)/2]},Gt=function(e){var t,n=K(e),r=Yt(n),a=At(r,e.angle),o=lt([1,0,0,0,-.5*(t=Et(r))[5],.5*t[4],0,0]);return ht(o,a)},Yt=function(e){var t=Object(d.a)(e,4),n=t[0],r=t[1],a=t[2],o=t[3];return ct((n+a)/2,(r+o)/2)},Ht=function(e,t,n){var r=Gt(e),a=Mt(r,kt(t)),o=Mt(r,kt(n)),i=xt(a,o),c=e.height/e.width,s=e.width/2,l=e.height/2,u=i[2],d=i[3],h=i[1],p=Math.abs(d),f=Math.abs(u);switch(e.type){case"rectangle":case"text":return h/(s*(f+c*p));case"diamond":return p<f?h/(f*s):h/(p*l);case"ellipse":return h/(s*Math.sqrt(Math.pow(u,2)+Math.pow(c,2)*Math.pow(d,2)))}},Xt=function(e,t,n,r){var a,o=J(e),i=[],c=!1,s=Object(F.a)(o);try{for(s.s();!(a=s.n()).done;){var l=a.value;"move"===l.op?(c=!c)&&i.push([l.data[0],l.data[1]]):"bcurveTo"===l.op&&c&&(i.push([l.data[0],l.data[1]]),i.push([l.data[2],l.data[3]]),i.push([l.data[4],l.data[5]]))}}catch(d){s.e(d)}finally{s.f()}if(i.length>=4){if("sharp"===r)return Y(i,t,n);var u=Object(Ct.a)(i,10,5);return Y(u,t,n)}return!1},Vt=function(e,t,n,r){var a=J(e),o=[0,0];return a.some((function(e,a){var i=e.op,c=e.data;if("move"===i)o=c;else if("bcurveTo"===i){var s=[c[0],c[1]],l=[c[2],c[3]],u=[c[4],c[5]],h=o;return o=u,function(e,t,n,r,a,o){for(var i=Object(d.a)(a,2),c=i[0],s=i[1],l=function(a,o){return Math.pow(1-a,3)*r[o]+3*a*Math.pow(1-a,2)*n[o]+3*Math.pow(a,2)*(1-a)*t[o]+e[o]*Math.pow(a,3)},u=0;u<=1;){var h=l(u,0),p=l(u,1);if(Math.sqrt(Math.pow(h-c,2)+Math.pow(p-s,2))<o)return!0;u+=.01}return!1}(h,s,l,u,[t,n],r)}return!1}))},Zt=function(){function e(t,n){Object(Ge.a)(this,e),this.elementId=void 0,this.activePointIndex=void 0,this.isDragging=void 0,this.lastUncommittedPoint=void 0,this.pointerOffset=void 0,this.startBindingElement=void 0,this.endBindingElement=void 0,this.elementId=t.id,Ve.mapElementToScene(this.elementId,n),e.normalizePoints(t),this.activePointIndex=null,this.lastUncommittedPoint=null,this.isDragging=!1,this.pointerOffset={x:0,y:0},this.startBindingElement="keep",this.endBindingElement="keep"}return Object(Ye.a)(e,null,[{key:"getElement",value:function(e){var t,n=null===(t=Ve.getScene(e))||void 0===t?void 0:t.getNonDeletedElement(e);return n||null}},{key:"handlePointDragging",value:function(t,n,r,a,o){if(!t.editingLinearElement)return!1;var i=t.editingLinearElement,c=i.activePointIndex,s=i.elementId,l=i.isDragging,u=e.getElement(s);if(!u)return!1;if(null!=c&&c>-1){!1===l&&n({editingLinearElement:Object(b.a)(Object(b.a)({},i),{},{isDragging:!0})});var d=e.createPointAt(u,r-i.pointerOffset.x,a-i.pointerOffset.y,t.gridSize);return e.movePoint(u,c,d),B(u)&&o(u,0===c?"start":"end"),!0}return!1}},{key:"handlePointerUp",value:function(t,n,r){var a=n.elementId,o=n.activePointIndex,i=n.isDragging,c=e.getElement(a);if(!c)return n;var s={};if(i&&(0===o||o===c.points.length-1)){G(c.points,r.zoom.value)&&e.movePoint(c,o,0===o?c.points[c.points.length-1]:c.points[0]);var l=Jt(r)?rn(N(e.getPointAtIndexGlobalCoordinates(c,o)),Ve.getScene(c)):null;s=Object(rt.a)({},0===o?"startBindingElement":"endBindingElement",l)}return Object(b.a)(Object(b.a)(Object(b.a)({},n),s),{},{isDragging:!1,pointerOffset:{x:0,y:0}})}},{key:"handlePointerDown",value:function(t,n,r,a,o){var i={didAddPoint:!1,hitElement:null};if(!n.editingLinearElement)return i;var c=n.editingLinearElement.elementId,s=e.getElement(c);if(!s)return i;if(t.altKey)return null==n.editingLinearElement.lastUncommittedPoint&&$e(s,{points:[].concat(Object(h.a)(s.points),[e.createPointAt(s,o.x,o.y,n.gridSize)])}),a.resumeRecording(),r({editingLinearElement:Object(b.a)(Object(b.a)({},n.editingLinearElement),{},{activePointIndex:s.points.length-1,lastUncommittedPoint:null,endBindingElement:rn(o,Ve.getScene(s))})}),i.didAddPoint=!0,i;var l=e.getPointIndexUnderCursor(s,n.zoom,o.x,o.y);if(l>-1)i.hitElement=s;else{var u=n.editingLinearElement,p=u.startBindingElement,f=u.endBindingElement;Jt(n)&&B(s)&&qt(s,p,f)}var m=K(s),v=Object(d.a)(m,4),g=v[0],w=v[1],y=(g+v[2])/2,x=(w+v[3])/2,S=l>-1&&_(s.x+s.points[l][0],s.y+s.points[l][1],y,x,s.angle);return r({editingLinearElement:Object(b.a)(Object(b.a)({},n.editingLinearElement),{},{activePointIndex:l>-1?l:null,pointerOffset:S?{x:o.x-S[0],y:o.y-S[1]}:{x:0,y:0}})}),i}},{key:"handlePointerMove",value:function(t,n,r,a,o){var i=a.elementId,c=a.lastUncommittedPoint,s=e.getElement(i);if(!s)return a;var l=s.points,u=l[l.length-1];if(!t.altKey)return u===c&&e.movePoint(s,l.length-1,"delete"),Object(b.a)(Object(b.a)({},a),{},{lastUncommittedPoint:null});var d=e.createPointAt(s,n-a.pointerOffset.x,r-a.pointerOffset.y,o);return u===c?e.movePoint(s,s.points.length-1,d):e.movePoint(s,"new",d),Object(b.a)(Object(b.a)({},a),{},{lastUncommittedPoint:s.points[s.points.length-1]})}},{key:"getPointsGlobalCoordinates",value:function(e){var t=K(e),n=Object(d.a)(t,4),r=n[0],a=n[1],o=n[2],i=n[3],c=(r+o)/2,s=(a+i)/2;return e.points.map((function(t){var n=e.x,r=e.y,a=_(n+t[0],r+t[1],c,s,e.angle),o=Object(d.a)(a,2);return[n=o[0],r=o[1]]}))}},{key:"getPointAtIndexGlobalCoordinates",value:function(e,t){var n=t<0?e.points.length+t:t,r=K(e),a=Object(d.a)(r,4),o=a[0],i=a[1],c=(o+a[2])/2,s=(i+a[3])/2,l=e.points[n],u=e.x,h=e.y;return _(u+l[0],h+l[1],c,s,e.angle)}},{key:"pointFromAbsoluteCoords",value:function(e,t){var n=K(e),r=Object(d.a)(n,4),a=r[0],o=r[1],i=(a+r[2])/2,c=(o+r[3])/2,s=_(t[0],t[1],i,c,-e.angle),l=Object(d.a)(s,2),u=l[0],h=l[1];return[u-e.x,h-e.y]}},{key:"getPointIndexUnderCursor",value:function(e,t,n,r){for(var a=this.getPointsGlobalCoordinates(e),o=a.length;--o>-1;){var i=a[o];if(U(n,r,i[0],i[1])*t.value<this.POINT_HANDLE_SIZE/2+1)return o}return-1}},{key:"createPointAt",value:function(e,t,n,r){var a=function(e,t,n){return n?[Math.round(e/n)*n,Math.round(t/n)*n]:[e,t]}(t,n,r),o=K(e),i=Object(d.a)(o,4),c=i[0],s=i[1],l=(c+i[2])/2,u=(s+i[3])/2,h=_(a[0],a[1],l,u,-e.angle),p=Object(d.a)(h,2),f=p[0],b=p[1];return[f-e.x,b-e.y]}},{key:"normalizePoints",value:function(e){var t=e.points,n=t[0][0],r=t[0][1];$e(e,{points:t.map((function(e,t){return[e[0]-n,e[1]-r]})),x:e.x+n,y:e.y+r})}},{key:"movePointByOffset",value:function(t,n,r){var a=Object(d.a)(t.points[n],2),o=a[0],i=a[1];e.movePoint(t,n,[o+r.x,i+r.y])}},{key:"movePoint",value:function(e,t,n,r){var a,o=e.points,i=0,c=0;if("delete"===n){if("new"===t)throw new Error("invalid args in movePoint");(a=o.slice()).splice(t,1),0===t&&(i=a[0][0],c=a[0][1],a=a.map((function(e,t){return 0===t?[0,0]:[e[0]-i,e[1]-c]})))}else if("new"===t)a=[].concat(Object(h.a)(o),[n]);else{var s=n[0]-o[t][0],l=n[1]-o[t][1];a=o.map((function(e,n){return n===t?0===n?(i=s,c=l,e):(i=0,c=0,[e[0]+s,e[1]+l]):i||c?[e[0]-i,e[1]-c]:e}))}var u=re(e,a,e.strokeSharpness||"round"),d=re(e,o,e.strokeSharpness||"round"),p=(u[0]+u[2])/2,f=(u[1]+u[3])/2,m=(d[0]+d[2])/2,v=(d[1]+d[3])/2,g=_(i,c,m-p,v-f,e.angle);$e(e,Object(b.a)(Object(b.a)({},r),{},{points:a,x:e.x+g[0],y:e.y+g[1]}))}}]),e}();Zt.POINT_HANDLE_SIZE=20;var Kt,Jt=function(e){return e.isBindingEnabled},qt=function(e,t,n){var r=new Set,a=new Set;Qt(e,t,n,"start",r,a),Qt(e,n,t,"end",r,a);var o=Array.from(a).filter((function(e){return!r.has(e)}));Ve.getScene(e).getNonDeletedElements(o).forEach((function(t){var n;$e(t,{boundElementIds:null===(n=t.boundElementIds)||void 0===n?void 0:n.filter((function(t){return t!==e.id}))})}))},Qt=function(e,t,n,r,a,o){if("keep"!==t)if(null!=t)null!=n&&("keep"===n?en(e,t,r):"start"!==r&&n.id===t.id)||($t(e,t,r),a.add(t.id));else{var i=nn(e,r);null!=i&&o.add(i)}},$t=function(e,t,n){var r;$e(e,Object(rt.a)({},"start"===n?"startBinding":"endBinding",Object(b.a)({elementId:t.id},an(e,t,n)))),$e(t,{boundElementIds:Array.from(new Set([].concat(Object(h.a)(null!==(r=t.boundElementIds)&&void 0!==r?r:[]),[e.id])))})},en=function(e,t,n){var r=e["start"===n?"endBinding":"startBinding"];return tn(e,null===r||void 0===r?void 0:r.elementId,t)},tn=function(e,t,n){return t===n.id&&e.points.length<3},nn=function(e,t){var n="start"===t?"startBinding":"endBinding",r=e[n];return null==r?null:($e(e,Object(rt.a)({},n,null)),r.elementId)},rn=function(e,t){return function(e,t){for(var n=null,r=e.length-1;r>=0;--r){var a=e[r];if(!a.isDeleted&&t(a)){n=a;break}}return n}(t.getElements(),(function(t){return z(t)&&Nt(t,e)}))},an=function(e,t,n){var r="start"===n?-1:1,a=-1===r?0:e.points.length-1,o=a-r,i=Zt.getPointAtIndexGlobalCoordinates(e,a),c=Zt.getPointAtIndexGlobalCoordinates(e,o);return{focus:Ht(t,c,i),gap:Math.max(1,Lt(t,i))}},on=function(e){return e.filter((function(e){return!e.isDeleted&&!tt(e)}))},cn=function(e){return e.filter((function(e){return!e.isDeleted}))},sn=function(e){return!e.isDeleted},ln=function(e){return cn(e).map((function(e){return D(e.type)?Object(b.a)(Object(b.a)({},e),{},{lastCommittedPoint:null}):e}))},un=function(e){return ln(e)},dn=n(18),hn=n(20),pn=n(35),fn=(Error,{selection:!0,text:!0,rectangle:!0,diamond:!0,ellipse:!0,line:!0,arrow:!0,freedraw:!0}),bn=function(e,t){var n,r,a,o,i,c,s,l,u={type:t.type||e.type,version:e.version||1,versionNonce:null!==(n=e.versionNonce)&&void 0!==n?n:0,isDeleted:null!==(r=e.isDeleted)&&void 0!==r&&r,id:e.id||Qe(),fillStyle:e.fillStyle||"hachure",strokeWidth:e.strokeWidth||1,strokeStyle:null!==(a=e.strokeStyle)&&void 0!==a?a:"solid",roughness:null!==(o=e.roughness)&&void 0!==o?o:1,opacity:null==e.opacity?100:e.opacity,angle:e.angle||0,x:e.x||0,y:e.y||0,strokeColor:e.strokeColor,backgroundColor:e.backgroundColor,width:e.width||0,height:e.height||0,seed:null!==(i=e.seed)&&void 0!==i?i:1,groupIds:null!==(c=e.groupIds)&&void 0!==c?c:[],strokeSharpness:null!==(s=e.strokeSharpness)&&void 0!==s?s:D(e.type)?"round":"sharp",boundElementIds:null!==(l=e.boundElementIds)&&void 0!==l?l:[]};return Object(b.a)(Object(b.a)(Object(b.a)({},u),function(e){var t={width:e.width,height:e.height,x:e.x,y:e.y};if(e.width<0){var n=Math.abs(e.width);t.width=n,t.x=e.x-n}if(e.height<0){var r=Math.abs(e.height);t.height=r,t.y=e.y-r}return t}(u)),t)},mn=function(e){var t;switch(e.type){case"text":var n=e.fontSize,r=e.fontFamily;if("font"in e){var a=e.font.split(" "),o=Object(d.a)(a,2),i=o[0],c=o[1];n=parseInt(i,10),r=function(e){for(var t=0,n=Object.entries(g.k);t<n.length;t++){var r=Object(d.a)(n[t],2),a=r[0];if(r[1].includes(e))return parseInt(a)}return g.c}(c)}return bn(e,{fontSize:n,fontFamily:r,text:null!==(t=e.text)&&void 0!==t?t:"",baseline:e.baseline,textAlign:e.textAlign||g.e,verticalAlign:e.verticalAlign||g.g});case"freedraw":return bn(e,{points:e.points,lastCommittedPoint:null,simulatePressure:e.simulatePressure,pressures:e.pressures});case"line":case"draw":case"arrow":var s=e.startArrowhead,l=void 0===s?null:s,u=e.endArrowhead,h=void 0===u?"arrow"===e.type?"arrow":null:u;return bn(e,{type:"draw"===e.type?"line":e.type,startBinding:e.startBinding,endBinding:e.endBinding,points:!Array.isArray(e.points)||e.points.length<2?[[0,0],[e.width,e.height]]:e.points,lastCommittedPoint:null,startArrowhead:l,endArrowhead:h});case"ellipse":case"rectangle":case"diamond":return bn(e,{})}},vn=function(e){return(e||[]).reduce((function(e,t){if("selection"!==t.type&&!tt(t)){var n=mn(t);n&&e.push(n)}return e}),[])},gn=function(e,t){e=e||{};var n,r=pe(),a={},o=Object(F.a)(Object.entries(r));try{for(o.s();!(n=o.n()).done;){var i=Object(d.a)(n.value,2),c=i[0],s=i[1],l=e[c],u=t?t[c]:void 0;a[c]=void 0!==l?l:void 0!==u?u:s}}catch(h){o.e(h)}finally{o.f()}return Object(b.a)(Object(b.a)({},a),{},{elementType:fn[a.elementType]?a.elementType:"selection",zoom:"number"===typeof e.zoom?{value:e.zoom,translation:r.zoom.translation}:e.zoom||r.zoom})},wn=function(e,t){return{elements:vn(null===e||void 0===e?void 0:e.elements),appState:gn(null===e||void 0===e?void 0:e.appState,t||null)}},yn=function(){var e=Object(u.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("image/png"!==t.type){e.next=18;break}return e.prev=1,e.next=4,Promise.all([n.e(39),n.e(35)]).then(n.bind(null,123));case 4:return e.next=6,e.sent.decodePngMetadata(t);case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(1),"INVALID"!==e.t0.message){e.next=15;break}throw new Error(he("alerts.imageDoesNotContainScene"));case 15:throw new Error(he("alerts.cannotRestoreFromImage"));case 16:e.next=43;break;case 18:if(!("text"in Blob)){e.next=24;break}return e.next=21,t.text();case 21:r=e.sent,e.next=27;break;case 24:return e.next=26,new Promise((function(e){var n=new FileReader;n.readAsText(t,"utf8"),n.onloadend=function(){n.readyState===FileReader.DONE&&e(n.result)}}));case 26:r=e.sent;case 27:if("image/svg+xml"!==t.type){e.next=43;break}return e.prev=28,e.next=31,Promise.all([n.e(39),n.e(35)]).then(n.bind(null,123));case 31:return e.next=33,e.sent.decodeSvgMetadata({svg:r});case 33:return e.abrupt("return",e.sent);case 36:if(e.prev=36,e.t1=e.catch(28),"INVALID"!==e.t1.message){e.next=42;break}throw new Error(he("alerts.imageDoesNotContainScene"));case 42:throw new Error(he("alerts.cannotRestoreFromImage"));case 43:return e.abrupt("return",r);case 44:case"end":return e.stop()}}),e,null,[[1,9],[28,36]])})));return function(t){return e.apply(this,arguments)}}(),xn=function(){var e=Object(u.a)(l.a.mark((function e(t,n){var r,a,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn(t);case 2:if(r=e.sent,e.prev=3,a=JSON.parse(r),jn(a)){e.next=7;break}throw new Error(he("alerts.couldNotLoadInvalidFile"));case 7:return o=wn({elements:un(a.elements||[]),appState:Object(b.a)(Object(b.a)({theme:null===n||void 0===n?void 0:n.theme,fileHandle:!t.type.startsWith("image/")&&t.handle||null},me(a.appState||{})),n?at(a.elements||[],n):{})},n),e.abrupt("return",o);case 11:throw e.prev=11,e.t0=e.catch(3),console.error(e.t0.message),new Error(he("alerts.couldNotLoadInvalidFile"));case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t,n){return e.apply(this,arguments)}}(),Sn=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn(t);case 2:if(n=e.sent,(r=JSON.parse(n)).type===g.i.excalidrawLibrary){e.next=6;break}throw new Error(he("alerts.couldNotLoadInvalidFile"));case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),kn=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.a)({description:"Excalidraw files"});case 2:return n=e.sent,e.abrupt("return",xn(n,t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),jn=function(e){return(null===e||void 0===e?void 0:e.type)===g.i.excalidraw&&(!e.elements||Array.isArray(e.elements)&&(!e.appState||"object"===typeof e.appState))},On=function(e){return"object"===typeof e&&e&&e.type===g.i.excalidrawLibrary&&1===e.version},En=/#json=([0-9]+),?([a-zA-Z0-9_-]*)|^http.*\.excalidrawlib$/,An=function(e){var t,n=(t=[]).concat.apply(t,Object(h.a)(e.map((function(e){return function(e){var t=[],n=[],r=function e(t){if("animate"===t.tagName){var r=/([0-9.]+)ms/.exec(t.getAttribute("begin")||"");r&&n.push(Number(r[1]))}t.childNodes.forEach((function(t){e(t)}))};return e.childNodes.forEach((function(e){"g"===e.tagName?(r(e),n.length&&(t.push(Math.min.apply(Math,n)),n.splice(0))):"defs"===e.tagName&&e.childNodes.forEach((function(e){r(e),n.length&&(t.push(Math.min.apply(Math,n)),n.splice(0))}))})),t}(e.svg).map((function(e){return Math.floor(100*e)/100}))}))));return Object(h.a)(new Set(n)).sort((function(e,t){return e-t}))},Mn=function(e){var t=e.svgList,n=e.loadDataList,o=Object(a.useState)(!1),i=Object(d.a)(o,2),c=i[0],s=i[1],h=Object(a.useState)(!1),b=Object(d.a)(h,2),m=b[0],v=b[1],g=Object(a.useState)(!1),w=Object(d.a)(g,2),y=w[0],x=w[1],S=Object(a.useState)(""),k=Object(d.a)(S,2),j=k[0],O=k[1],E=Object(a.useState)(),A=Object(d.a)(E,2),M=A[0],C=A[1];Object(a.useEffect)((function(){C(void 0)}),[t]),Object(a.useEffect)((function(){t.forEach((function(e){var t=e.svg;m?t.pauseAnimations():t.unpauseAnimations()}))}),[t,m]),Object(a.useEffect)((function(){var e=window.location.hash.slice(1);"no"!==new URLSearchParams(e).get("toolbar")?s(!0):s("never")}),[]);var N=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kn(void 0);case 2:t=e.sent,n([t]);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(u.a)(l.a.mark((function e(){var t,r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.a)({description:"Excalidraw library files",extensions:[".json",".excalidrawlib"],mimeTypes:["application/json"]});case 2:return t=e.sent,e.next=5,Sn(t);case 5:if((r=e.sent)&&r.library){e.next=9;break}return window.alert("Unable to load library"),e.abrupt("return");case 9:a=r.library.map((function(e){return cn(vn(e))})),n(a.map((function(e){return{elements:e}})));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=Object(a.useCallback)((function(){t.length&&v((function(e){return!e}))}),[t]),L=Object(a.useRef)(),P=Object(a.useCallback)((function(){if(t.length){var e=An(t),n=1e3*t[0].svg.getCurrentTime(),r=e.find((function(e){return e>=n+100}));r||(r=n+500),clearTimeout(L.current),t.forEach((function(e){e.svg.unpauseAnimations()})),L.current=setTimeout((function(){t.forEach((function(e){var t=e.svg;t.pauseAnimations(),t.setCurrentTime(r/1e3)})),v(!0)}),r-n)}}),[t]),D=Object(a.useCallback)((function(){t.forEach((function(e){e.svg.setCurrentTime(0)}))}),[t]);Object(a.useEffect)((function(){var e=function(e){"p"===e.key.toLowerCase()?T():"s"===e.key.toLowerCase()?P():"r"===e.key.toLowerCase()?D():"q"===e.key.toLowerCase()?s((function(e){return"boolean"===typeof e?!e:e})):s((function(e){return"boolean"===typeof e||e}))};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[T,P,D]);var B=function(){var e=Object(u.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return");case 2:if(!M){e.next=6;break}return e.next=5,We(M);case 5:return e.abrupt("return");case 6:return x(!0),s(!1),e.prev=8,e.next=11,Ue(t);case 11:n=e.sent,C(n),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8),console.log(e.t0);case 18:s(!0),x(!1);case 20:case"end":return e.stop()}}),e,null,[[8,15]])})));return function(){return e.apply(this,arguments)}}();return!0!==c?null:Object(r.jsxs)("div",{className:"Toolbar",children:[Object(r.jsxs)("div",{className:"Toolbar-loader",children:[Object(r.jsx)("button",{type:"button",onClick:N,children:"Load File"}),Object(r.jsx)("span",{children:"OR"}),Object(r.jsx)("button",{type:"button",onClick:I,children:"Load Library"}),Object(r.jsx)("span",{children:"OR"}),Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=En.exec(j);t?(t[1]?window.location.hash=t[0]:window.location.hash="library=".concat(t[0]),window.location.reload()):window.alert("Invalid link")},children:[Object(r.jsx)("input",{placeholder:"Enter link...",value:j,onChange:function(e){return O(e.target.value)}}),Object(r.jsx)("button",{type:"submit",disabled:!En.test(j),children:"Animate!"})]})]}),!!t.length&&Object(r.jsxs)("div",{className:"Toolbar-controller",children:[Object(r.jsx)("button",{type:"button",onClick:T,children:m?"Play (P)":"Pause (P)"}),Object(r.jsx)("button",{type:"button",onClick:P,children:"Step (S)"}),Object(r.jsx)("button",{type:"button",onClick:D,children:"Reset (R)"}),Object(r.jsx)("button",{type:"button",onClick:function(){s((function(e){return"boolean"!==typeof e&&e}))},children:"Hide Toolbar (Q)"}),Object(r.jsx)("button",{type:"button",onClick:function(){t.length&&t.forEach((function(e){var t=e.svg;_e(t)}))},children:"Export to SVG"}),Object(r.jsx)("button",{type:"button",onClick:B,disabled:y,children:y?"Processing...":M?"Export to WebM":"Prepare WebM"})]}),Object(r.jsx)(f,{link:"https://github.com/dai-shi/excalidraw-animate",size:40})]})},Cn=(n(48),function(e){var t=e.svgList,n=Object(a.useRef)(null);Object(a.useEffect)((function(){return t.forEach((function(e){var t=e.svg;n.current&&n.current.appendChild(t)})),function(){t.forEach((function(e){e.svg.remove()}))}}),[t]),Object(a.useEffect)((function(){var e=window.location.hash.slice(1);if("no"===new URLSearchParams(e).get("autoplay")&&n.current){var r=n.current,a=function(){t.forEach((function(e){var t=e.svg;t.setCurrentTime(0),t.unpauseAnimations()}))};return r.addEventListener("click",a),function(){r.removeEventListener("click",a)}}}),[t]);var o=Math.ceil(Math.sqrt(t.length)),i="repeat(".concat(o,", ").concat(100/o,"%)");return Object(r.jsx)("div",{className:"Viewer",style:{gridTemplateColumns:i,gridTemplateRows:i},ref:n})}),Nn=function(e,t){return window.crypto.subtle.importKey("jwk",{alg:"A128GCM",ext:!0,k:e,key_ops:["encrypt","decrypt"],kty:"oct"},{name:"AES-GCM",length:128},!1,[t])},In=function(){var e=Object(u.a)(l.a.mark((function e(t,n,r){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nn(r,"decrypt");case 2:return a=e.sent,e.abrupt("return",window.crypto.subtle.decrypt({name:"AES-GCM",iv:t},a,n));case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Tn=function(){var e=Object(u.a)(l.a.mark((function e(t,n){var r,a,o,i,c,s,u,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(n?"".concat("https://json.excalidraw.com/api/v2/").concat(t):"".concat("https://json.excalidraw.com/api/v1/").concat(t,".json"));case 3:if((r=e.sent).ok){e.next=7;break}return window.alert(he("alerts.importBackendFailed")),e.abrupt("return",{});case 7:if(!n){e.next=29;break}return e.next=10,r.arrayBuffer();case 10:return o=e.sent,e.prev=11,c=o.slice(0,12),s=o.slice(12,o.byteLength),e.next=16,In(c,s,n);case 16:i=e.sent,e.next=25;break;case 19:return e.prev=19,e.t0=e.catch(11),u=new Uint8Array(12),e.next=24,In(u,o,n);case 24:i=e.sent;case 25:d=new window.TextDecoder("utf-8").decode(new Uint8Array(i)),a=JSON.parse(d),e.next=32;break;case 29:return e.next=31,r.json();case 31:a=e.sent;case 32:return e.abrupt("return",{elements:a.elements||null,appState:a.appState||null});case 35:return e.prev=35,e.t1=e.catch(0),window.alert(he("alerts.importBackendFailed")),console.error(e.t1),e.abrupt("return",{});case 40:case"end":return e.stop()}}),e,null,[[0,35],[11,19]])})));return function(t,n){return e.apply(this,arguments)}}(),Ln=function(){var e=Object(u.a)(l.a.mark((function e(t,n,r){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t){e.next=9;break}return e.t0=wn,e.next=4,Tn(t,n);case 4:e.t1=e.sent,e.t2=null===r||void 0===r?void 0:r.appState,a=(0,e.t0)(e.t1,e.t2),e.next=10;break;case 9:a=wn(r||null,null);case 10:return e.abrupt("return",{elements:a.elements,appState:a.appState,commitToHistory:!1});case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();!function(e){e.ACTIVE="active",e.AWAY="away",e.IDLE="idle"}(Kt||(Kt={}));!function(){var e=document.createElement("canvas").getContext("2d");if(!e)return!1;e.fillStyle="#f00",e.textBaseline="top",e.font="32px Arial",e.fillText("\ud83d\ude00",0,0),e.getImageData(12,12,1,1).data[0]}();var Pn=function(e,t){var n=t.exportBackground,r=t.exportPadding,a=void 0===r?10:r,o=t.viewBackgroundColor,i=t.exportWithDarkMode,c=t.scale,s=void 0===c?1:c,l=t.shouldAddWatermark,u=t.metadata,h=void 0===u?"":u,p=Dn(e,l),f=Rn(p,a,l),b=Object(d.a)(f,4),m=b[0],v=b[1],y=b[2],x=b[3],S=document.createElementNS(w,"svg");if(S.setAttribute("version","1.1"),S.setAttribute("xmlns",w),S.setAttribute("viewBox","0 0 ".concat(y," ").concat(x)),S.setAttribute("width","".concat(y*s)),S.setAttribute("height","".concat(x*s)),i&&S.setAttribute("filter",g.o),S.innerHTML="\n  ".concat("\x3c!-- svg-source:excalidraw --\x3e","\n  ").concat(h,'\n  <defs>\n    <style>\n      @font-face {\n        font-family: "Virgil";\n        src: url("https://excalidraw.com/Virgil.woff2");\n      }\n      @font-face {\n        font-family: "Cascadia";\n        src: url("https://excalidraw.com/Cascadia.woff2");\n      }\n    </style>\n  </defs>\n  '),n&&o){var k=S.ownerDocument.createElementNS(w,"rect");k.setAttribute("x","0"),k.setAttribute("y","0"),k.setAttribute("width","".concat(y)),k.setAttribute("height","".concat(x)),k.setAttribute("fill",o),S.appendChild(k)}return function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.offsetX,o=void 0===a?0:a,i=r.offsetY,c=void 0===i?0:i;n&&e.forEach((function(e){if(!e.isDeleted)try{Oe(e,t,n,e.x+o,e.y+c)}catch(r){console.error(r)}}))}(p,Z.a.svg(S),S,{offsetX:-m+a,offsetY:-v+a}),S},Dn=function(e,t){var n=Object(h.a)(e);if(t){var r=ne(e),a=Object(d.a)(r,4),o=a[2],i=a[3];n=[].concat(Object(h.a)(n),[Bn(o,i)])}return n},Bn=function(e,t){return function(e){var t=j(e.text,k(e)),n=it(e,t);return et(Object(b.a)(Object(b.a)({},ot("text",e)),{},{text:e.text,fontSize:e.fontSize,fontFamily:e.fontFamily,textAlign:e.textAlign,verticalAlign:e.verticalAlign,x:e.x-n.x,y:e.y-n.y,width:t.width,height:t.height,baseline:t.baseline}),{})}({text:he("labels.madeWithExcalidraw"),fontSize:16,fontFamily:g.c,textAlign:"right",verticalAlign:g.g,x:e,y:t+16,strokeColor:m.gray[5],backgroundColor:"transparent",fillStyle:"hachure",strokeWidth:1,strokeStyle:"solid",roughness:1,opacity:100,strokeSharpness:"sharp"})},Rn=function(e,t,n){var r=ne(e),a=Object(d.a)(r,4),o=a[0],i=a[1],c=a[2],s=a[3];return[o,i,O(o,c)+2*t,O(i,s)+t+(n?0:t)]},zn=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r,a,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:return n=e.sent,e.next=6,n.blob();case 6:return r=e.sent,e.t0=JSON,e.next=10,r.text();case 10:if(e.t1=e.sent,a=e.t0.parse.call(e.t0,e.t1),On(a)){e.next=14;break}throw new Error;case 14:return e.next=16,Sn(r);case 16:if((o=e.sent)&&o.library){e.next=19;break}throw new Error;case 19:return e.abrupt("return",o.library.map((function(e){return cn(vn(e))})));case 22:return e.prev=22,e.t2=e.catch(0),window.alert("Unable to load library"),e.abrupt("return",[]);case 26:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t){return e.apply(this,arguments)}}(),Fn=function(){var e=function(){var e=Object(a.useState)(!0),t=Object(d.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)([]),i=Object(d.a)(o,2),c=i[0],s=i[1],h=Object(a.useCallback)((function(e,t){var n,r=e.map((function(e){var r=cn(e.elements),a=Pn(r,(null===e||void 0===e?void 0:e.appState)||{exportBackground:!0,exportPadding:30,viewBackgroundColor:"white",shouldAddWatermark:!1}),o=Fe(a,r,n);return console.log(a),t&&(n=o.finishedMs),{svg:a,finishedMs:o.finishedMs}}));return s(r),r}),[]);return Object(a.useEffect)((function(){Object(u.a)(l.a.mark((function e(){var t,n,a,o,i,c,s,u,p,f,b,m,v,g,w,y,x;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.location.hash.slice(1),n=new URLSearchParams(t),!(a=/([0-9]+),?([a-zA-Z0-9_-]*)/.exec(n.get("json")||""))){e.next=10;break}return o=Object(d.a)(a,3),i=o[1],c=o[2],e.next=7,Ln(i,c,null);case 7:s=e.sent,u=h([s]),p=Object(d.a)(u,1),f=p[0],b=f.svg,m=f.finishedMs,"no"===n.get("autoplay")&&b.setCurrentTime(m);case 10:if(!(v=/(.*\.excalidrawlib)/.exec(n.get("library")||""))){e.next=18;break}return g=Object(d.a)(v,2),w=g[1],e.next=15,zn(w);case 15:y=e.sent,x=h(y.map((function(e){return{elements:e}})),n.has("sequence")),"no"===n.get("autoplay")&&x.forEach((function(e){var t=e.svg,n=e.finishedMs;t.setCurrentTime(n)}));case 18:r(!1);case 19:case"end":return e.stop()}}),e)})))()}),[h]),{loading:n,loadedSvgList:c,loadDataList:h}}(),t=e.loading,n=e.loadedSvgList,o=e.loadDataList;return t?Object(r.jsx)("div",{children:"Loading..."}):Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(Mn,{svgList:n,loadDataList:o}),!!n.length&&Object(r.jsx)(Cn,{svgList:n})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(Fn,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[49,37,38]]]);
//# sourceMappingURL=main.d236e51e.chunk.js.map