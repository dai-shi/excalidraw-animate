(this["webpackJsonpexcalidraw-animate"]=this["webpackJsonpexcalidraw-animate"]||[]).push([[31],{29:function(e){e.exports=JSON.parse('{"labels":{"paste":"Paste","selectAll":"Select all","multiSelect":"Add element to selection","moveCanvas":"Move canvas","copy":"Copy","copyAsPng":"Copy to clipboard as PNG","copyAsSvg":"Copy to clipboard as SVG","bringForward":"Bring forward","sendToBack":"Send to back","bringToFront":"Bring to front","sendBackward":"Send backward","delete":"Delete","copyStyles":"Copy styles","pasteStyles":"Paste styles","stroke":"Stroke","background":"Background","fill":"Fill","strokeWidth":"Stroke width","strokeStyle":"Stroke style","strokeStyle_solid":"Solid","strokeStyle_dashed":"Dashed","strokeStyle_dotted":"Dotted","sloppiness":"Sloppiness","opacity":"Opacity","textAlign":"Text align","edges":"Edges","sharp":"Sharp","round":"Round","fontSize":"Font size","fontFamily":"Font family","onlySelected":"Only selected","withBackground":"With Background","exportEmbedScene":"Embed scene into exported file","exportEmbedScene_details":"Scene data will be saved into the exported PNG/SVG file so that the scene can be restored from it.\\nWill increase exported file size.","addWatermark":"Add \\"Made with Excalidraw\\"","handDrawn":"Hand-drawn","normal":"Normal","code":"Code","small":"Small","medium":"Medium","large":"Large","veryLarge":"Very large","solid":"Solid","hachure":"Hachure","crossHatch":"Cross-hatch","thin":"Thin","bold":"Bold","left":"Left","center":"Center","right":"Right","extraBold":"Extra bold","architect":"Architect","artist":"Artist","cartoonist":"Cartoonist","fileTitle":"File title","colorPicker":"Color picker","canvasBackground":"Canvas background","drawingCanvas":"Drawing canvas","layers":"Layers","actions":"Actions","language":"Language","createRoom":"Share a live-collaboration session","duplicateSelection":"Duplicate","untitled":"Untitled","name":"Name","yourName":"Your name","madeWithExcalidraw":"Made with Excalidraw","group":"Group selection","ungroup":"Ungroup selection","collaborators":"Collaborators","toggleGridMode":"Toggle grid mode","addToLibrary":"Add to library","removeFromLibrary":"Remove from library","libraryLoadingMessage":"Loading library...","loadingScene":"Loading scene...","align":"Align","alignTop":"Align top","alignBottom":"Align bottom","alignLeft":"Align left","alignRight":"Align right","centerVertically":"Center vertically","centerHorizontally":"Center horizontally","distributeHorizontally":"Distribute horizontally","distributeVertically":"Distribute vertically"},"buttons":{"clearReset":"Reset the canvas","export":"Export","exportToPng":"Export to PNG","exportToSvg":"Export to SVG","copyToClipboard":"Copy to clipboard","copyPngToClipboard":"Copy PNG to clipboard","scale":"Scale","save":"Save","saveAs":"Save as","load":"Load","getShareableLink":"Get shareable link","close":"Close","selectLanguage":"Select language","scrollBackToContent":"Scroll back to content","zoomIn":"Zoom in","zoomOut":"Zoom out","resetZoom":"Reset zoom","menu":"Menu","done":"Done","edit":"Edit","undo":"Undo","redo":"Redo","roomDialog":"Start live collaboration","createNewRoom":"Create new room","toggleFullScreen":"Toggle full screen","toggleDarkMode":"Toggle dark mode","toggleZenMode":"Toggle zen mode","exitZenMode":"Exit zen mode"},"alerts":{"clearReset":"This will clear the whole canvas. Are you sure?","couldNotCreateShareableLink":"Couldn\'t create shareable link.","couldNotCreateShareableLinkTooBig":"Couldn\'t create shareable link: the scene is too big","couldNotLoadInvalidFile":"Couldn\'t load invalid file","importBackendFailed":"Importing from backend failed.","cannotExportEmptyCanvas":"Cannot export empty canvas.","couldNotCopyToClipboard":"Couldn\'t copy to clipboard. Try using Chrome browser.","decryptFailed":"Couldn\'t decrypt data.","uploadedSecurly":"The upload has been secured with end-to-end encryption, which means that Excalidraw server and third parties can\'t read the content.","loadSceneOverridePrompt":"Loading external drawing will replace your existing content. Do you wish to continue?","errorLoadingLibrary":"There was an error loading the third party library.","confirmAddLibrary":"This will add {{numShapes}} shape(s) to your library. Are you sure?","imageDoesNotContainScene":"Image file doesn\'t contain scene data. Have you enabled this during export?","cannotRestoreFromImage":"Scene couldn\'t be restored from this image file"},"toolBar":{"selection":"Selection","draw":"Free draw","rectangle":"Rectangle","diamond":"Diamond","ellipse":"Ellipse","arrow":"Arrow","line":"Line","text":"Text","library":"Library","lock":"Keep selected tool active after drawing"},"headings":{"canvasActions":"Canvas actions","selectedShapeActions":"Selected shape actions","shapes":"Shapes"},"hints":{"linearElement":"Click to start multiple points, drag for single line","freeDraw":"Click and drag, release when you\'re finished","text":"Tip: you can also add text by double-clicking anywhere with the selection tool","linearElementMulti":"Click on last point or press Escape or Enter to finish","resize":"You can constrain proportions by holding SHIFT while resizing,\\nhold ALT to resize from the center","rotate":"You can constrain angles by holding SHIFT while rotating","lineEditor_info":"Double-click or press Enter to edit points","lineEditor_pointSelected":"Press Delete to remove point, CtrlOrCmd+D to duplicate, or drag to move","lineEditor_nothingSelected":"Select a point to move or remove, or hold Alt and click to add new points"},"canvasError":{"cannotShowPreview":"Cannot show preview","canvasTooBig":"The canvas may be too big.","canvasTooBigTip":"Tip: try moving the farthest elements a bit closer together."},"errorSplash":{"headingMain_pre":"Encountered an error. Try ","headingMain_button":"reloading the page.","clearCanvasMessage":"If reloading doesn\'t work, try ","clearCanvasMessage_button":"clearing the canvas.","clearCanvasCaveat":" This will result in loss of work ","trackedToSentry_pre":"The error with identifier ","trackedToSentry_post":" was tracked on our system.","openIssueMessage_pre":"We were very cautious not to include your scene information on the error. If your scene is not private, please consider following up on our ","openIssueMessage_button":"bug tracker.","openIssueMessage_post":" Please include information below by copying and pasting into the GitHub issue.","sceneContent":"Scene content:"},"roomDialog":{"desc_intro":"You can invite people to your current scene to collaborate with you.","desc_privacy":"Don\'t worry, the session uses end-to-end encryption, so whatever you draw will stay private. Not even our server will be able to see what you come up with.","button_startSession":"Start session","button_stopSession":"Stop session","desc_inProgressIntro":"Live-collaboration session is now in progress.","desc_shareLink":"Share this link with anyone you want to collaborate with:","desc_exitSession":"Stopping the session will disconnect you from the room, but you\'ll be able to continue working with the scene, locally. Note that this won\'t affect other people, and they\'ll still be able to collaborate on their version."},"errorDialog":{"title":"Error"},"shortcutsDialog":{"title":"Keyboard shortcuts","shapes":"Shapes","or":"or","click":"click","drag":"drag","curvedArrow":"Curved arrow","curvedLine":"Curved line","editor":"Editor","view":"View","blog":"Read our blog","howto":"Follow our guides","github":"Found an issue? Submit","textNewLine":"Add new line (text)","textFinish":"Finish editing (text)","zoomToFit":"Zoom to fit all elements","preventBinding":"Prevent arrow binding"},"encrypted":{"tooltip":"Your drawings are end-to-end encrypted so Excalidraw\'s servers will never see them."},"charts":{"noNumericColumn":"You pasted a spreadsheet without a numeric column.","tooManyColumns":"You pasted a spreadsheet with more than two columns."}}')},30:function(e){e.exports=JSON.parse('{"ar-SA":98,"bg-BG":68,"ca-ES":90,"de-DE":100,"el-GR":95,"en":100,"es-ES":90,"fa-IR":100,"fi-FI":100,"fr-FR":100,"he-IL":77,"hi-IN":87,"hu-HU":49,"id-ID":100,"it-IT":100,"ja-JP":98,"ko-KR":76,"my-MM":98,"nb-NO":99,"nl-NL":89,"nn-NO":90,"pl-PL":89,"pt-PT":93,"ro-RO":100,"ru-RU":85,"sk-SK":98,"sv-SE":100,"tr-TR":91,"uk-UA":100,"zh-CN":92,"zh-TW":100}')},31:function(e,t,n){var r={"./ar-SA.json":[49,0],"./bg-BG.json":[50,1],"./ca-ES.json":[51,2],"./de-DE.json":[52,3],"./el-GR.json":[53,4],"./en.json":[29],"./es-ES.json":[54,5],"./fa-IR.json":[55,6],"./fi-FI.json":[56,7],"./fr-FR.json":[57,8],"./he-IL.json":[58,9],"./hi-IN.json":[59,10],"./hu-HU.json":[60,11],"./id-ID.json":[61,12],"./it-IT.json":[62,13],"./ja-JP.json":[63,14],"./ko-KR.json":[64,15],"./my-MM.json":[65,16],"./nb-NO.json":[66,17],"./nl-NL.json":[67,18],"./nn-NO.json":[68,19],"./percentages.json":[30],"./pl-PL.json":[69,20],"./pt-PT.json":[70,21],"./ro-RO.json":[71,22],"./ru-RU.json":[72,23],"./sk-SK.json":[73,24],"./sv-SE.json":[74,25],"./tr-TR.json":[75,26],"./uk-UA.json":[76,27],"./zh-CN.json":[77,28],"./zh-TW.json":[78,29]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n.t(a,3)}))}a.keys=function(){return Object.keys(r)},a.id=31,e.exports=a},42:function(e,t,n){},43:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var r=n(6),a=n(11),o=n.n(a),i=n(32),c=n.n(i),l=(n(42),n(43),n(1)),s=n.n(l),u=n(4),d=n(0),p=n(12),h=(n(45),n(46),function(e){var t=e.link,n=e.size,a=e.fill,o=e.color;return Object(r.jsx)("a",{href:t,className:"GitHubCorner-container","aria-label":"View source on GitHub",target:"_blank",rel:"noopener noreferrer",children:Object(r.jsxs)("svg",{width:n||80,height:n||80,viewBox:"0 0 250 250",style:{fill:a||"#151513",color:o||"#fff",position:"absolute",top:0,border:0,right:0},"aria-hidden":"true",children:[Object(r.jsx)("path",{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"}),Object(r.jsx)("path",{d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2",fill:"currentColor",style:{transformOrigin:"130px 106px"},className:"GitHubCorner-octo-arm"}),Object(r.jsx)("path",{d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z",fill:"currentColor",className:"GitHubCorner-octo-body"})]})})}),f=new Map,b=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.match(/url\(".*?"\);/g)||[],e.next=3,Promise.all(n.map((function(e){return new Promise((function(t,n){e=e.slice(5,-3),f.has(e)?t(f.get(e)):fetch(e).then((function(e){return e.blob()})).then((function(r){var a=new FileReader;a.onload=function(){var n="url(".concat(a.result,");");f.set(e,n),t(n)},a.onerror=n,a.readAsDataURL(r)})).catch(n)}))})));case 3:return r=e.sent,e.abrupt("return",t.replace(/url\(".*?"\);/g,(function(){return r.shift()})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(e,t,n,r){return new Promise((function(a,o){t.pauseAnimations();var i=[],c=function(){var l=Object(u.a)(s.a.mark((function l(u){var d,p;return s.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(!(u>n)){l.next=4;break}return t.unpauseAnimations(),a(i),l.abrupt("return");case 4:return t.setCurrentTime(u/1e3),l.next=7,b(e.innerHTML);case 7:d=l.sent,(p=new Image).src="data:image/svg+xml;base64,"+btoa(d),p.onload=function(){i.push(p),c(u+1e3/r)},p.onerror=function(e){window.alert("Unexpected error while preparing images"),o(e)};case 12:case"end":return l.stop()}}),l)})));return function(e){return l.apply(this,arguments)}}();c(0)}))},m=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.getCurrentTime(),t.setCurrentTime(0),r=(new XMLSerializer).serializeToString(t),t.setCurrentTime(n),e.next=6,Object(p.b)(new Blob([r],{type:"svg"}),{fileName:"excalidraw-animate.svg"});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(e,t){return new Promise(function(){var n=Object(u.a)(s.a.mark((function n(r){var a,o,i,c,l,h,f,b,m,v,w,y;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=e.parentNode){n.next=5;break}return window.alert("svg is not displayed"),r(),n.abrupt("return");case 5:return n.next=7,g(o,e,t,60);case 7:i=n.sent,c=(null===(a=e.getAttribute("viewBox"))||void 0===a?void 0:a.match(/0 0 (\S+) (\S+)/))||[],l=Object(d.a)(c,3),h=l[1],f=l[2],(b=document.createElement("canvas")).setAttribute("width","".concat(h,"px")),b.setAttribute("height","".concat(f,"px")),m=b.getContext("2d"),v=b.captureStream(),(w=new MediaRecorder(v)).ondataavailable=function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.b)(new Blob([t.data],{type:t.data.type}),{fileName:"excalidraw-animate.webm"});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w.start(),y=0,function e(){if(y>=i.length)return w.stop(),void r();null===m||void 0===m||m.drawImage(i[y],0,0),y+=1,setTimeout(e,1e3/60)}();case 20:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())},w=n(7),y=n(8),x=n(2),S=function(e){return[y.red[e],y.pink[e],y.grape[e],y.violet[e],y.indigo[e],y.blue[e],y.cyan[e],y.teal[e],y.green[e],y.lime[e],y.yellow[e],y.orange[e]]},k=([y.white,y.gray[0],y.gray[1]].concat(Object(x.a)(S(0))),["transparent",y.gray[4],y.gray[6]].concat(Object(x.a)(S(6))),[y.black,y.gray[8],y.gray[7]].concat(Object(x.a)(S(9))),n(5)),j="http://www.w3.org/2000/svg",O=null,E=function(){if(O)return O;var e=new Date,t=e.getFullYear(),n="".concat(e.getMonth()+1).padStart(2,"0"),r="".concat(e.getDate()).padStart(2,"0"),a="".concat(e.getHours()).padStart(2,"0"),o="".concat(e.getMinutes()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(r,"-").concat(a).concat(o)},C=function(e){var t=e.fontFamily;return"".concat(k.g[t],", ").concat(k.l)},M=function(e){var t=e.fontSize,n=e.fontFamily;return"".concat(t,"px ").concat(C({fontFamily:n}))},A=function(e,t){var n=document.createElement("div"),r=document.body;n.style.position="absolute",n.style.whiteSpace="pre",n.style.font=t,r.appendChild(n),n.innerText=e.split("\n").map((function(e){return e||" "})).join("\n");var a=n.offsetWidth,o=n.offsetHeight,i=document.createElement("span");i.style.display="inline-block",i.style.overflow="hidden",i.style.width="1px",i.style.height="1px",n.appendChild(i);var c=i.offsetTop+i.offsetHeight;return document.body.removeChild(n),{width:a,height:o,baseline:c}},I=function(e,t){return Math.abs(e-t)},L=function(e,t){var n=e.clientX,r=e.clientY,a=t.zoom,o=t.offsetLeft,i=t.offsetTop,c=t.scrollX,l=t.scrollY,s=1/a.value;return{x:(n-a.translation.x-o)*s-c,y:(r-a.translation.y-i)*s-l}},N=function(e,t){var n=e.sceneX,r=e.sceneY,a=t.zoom,o=t.offsetLeft,i=t.offsetTop,c=t.scrollX,l=t.scrollY;return{x:(n+c+o)*a.value+a.translation.x,y:(r+l+i)*a.value+a.translation.y}},T=new RegExp("^[^".concat("A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02b8\u0300-\u0590\u0800-\u1fff\u2c00-\ufb1c\ufdfe-\ufe6f\ufefd-\uffff","]*[").concat("\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc","]")),P=function(e){return T.test(e)},D=function(e){var t=Object(d.a)(e,2);return{x:t[0],y:t[1]}},R=n(35),B="action",z=window.gtag?function(e,t,n,r){window.gtag("event",e,{event_category:t,event_label:n,value:r})}:function(e,t,n,r){console.info("Track Event",e,t,n,r)},_=n(29),F=n(30),G=[{lng:"en",label:"English"}].concat([{lng:"ar-SA",label:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",rtl:!0},{lng:"bg-BG",label:"\u0411\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438"},{lng:"ca-ES",label:"Catalan"},{lng:"de-DE",label:"Deutsch"},{lng:"el-GR",label:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac"},{lng:"es-ES",label:"Espa\xf1ol"},{lng:"fa-IR",label:"\u0641\u0627\u0631\u0633\u06cc",rtl:!0},{lng:"fi-FI",label:"Suomi"},{lng:"fr-FR",label:"Fran\xe7ais"},{lng:"he-IL",label:"\u05e2\u05d1\u05e8\u05d9\u05ea",rtl:!0},{lng:"hi-IN",label:"\u0939\u093f\u0928\u094d\u0926\u0940"},{lng:"hu-HU",label:"Magyar"},{lng:"id-ID",label:"Bahasa Indonesia"},{lng:"it-IT",label:"Italiano"},{lng:"ja-JP",label:"\u65e5\u672c\u8a9e"},{lng:"ko-KR",label:"\ud55c\uad6d\uc5b4"},{lng:"my-MM",label:"Burmese"},{lng:"nb-NO",label:"Norsk bokm\xe5l"},{lng:"nl-NL",label:"Nederlands"},{lng:"nn-NO",label:"Norsk nynorsk"},{lng:"pl-PL",label:"Polski"},{lng:"pt-PT",label:"Portugu\xeas"},{lng:"ro-RO",label:"Rom\xe2n\u0103"},{lng:"ru-RU",label:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439"},{lng:"sk-SK",label:"Sloven\u010dina"},{lng:"sv-SE",label:"Svenska"},{lng:"tr-TR",label:"T\xfcrk\xe7e"},{lng:"uk-UA",label:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430"},{lng:"zh-CN",label:"\u7b80\u4f53\u4e2d\u6587"},{lng:"zh-TW",label:"\u7e41\u9ad4\u4e2d\u6587"}].sort((function(e,t){return e.label>t.label?1:-1}))).filter((function(e){return F[e.lng]>85})),Y=(G[0],{}),U=(G[0],function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(void 0===e[r])return;e=e[r]}if("string"===typeof e)return e}),X=function(e,t){var n=e.split("."),r=U(Y,n)||U(_,n);if(void 0===r)throw new Error("Can't find translation for ".concat(e));if(t)for(var a in t)r=r.replace("{{".concat(a,"}}"),t[a]);return r},W=new R.a;W.init({languageUtils:{formatLanguageCode:function(e){return e},isWhitelisted:function(){return!0}},checkWhitelist:!1});var H=function(){return{appearance:"light",isLoading:!1,errorMessage:null,draggingElement:null,resizingElement:null,multiElement:null,editingElement:null,startBoundElement:null,editingLinearElement:null,elementType:"selection",elementLocked:!1,exportBackground:!0,exportEmbedScene:!1,shouldAddWatermark:!1,currentItemStrokeColor:y.black,currentItemBackgroundColor:"transparent",currentItemFillStyle:"hachure",currentItemStrokeWidth:1,currentItemStrokeStyle:"solid",currentItemRoughness:1,currentItemOpacity:100,currentItemFontSize:k.d,currentItemFontFamily:k.c,currentItemTextAlign:k.e,currentItemStrokeSharpness:"sharp",currentItemLinearStrokeSharpness:"round",viewBackgroundColor:y.white,scrollX:0,scrollY:0,cursorX:0,cursorY:0,cursorButton:"up",scrolledOutside:!1,name:"".concat(X("labels.untitled"),"-").concat(E()),username:"",isBindingEnabled:!0,isCollaborating:!1,isResizing:!1,isRotating:!1,selectionElement:null,zoom:{value:1,translation:{x:0,y:0}},openMenu:null,lastPointerDownWith:"mouse",selectedElementIds:{},previousSelectedElementIds:{},collaborators:new Map,shouldCacheIgnoreZoom:!1,showShortcutsDialog:!1,suggestedBindings:[],zenModeEnabled:!1,gridSize:null,editingGroupId:null,selectedGroupIds:{},width:window.innerWidth,height:window.innerHeight,isLibraryOpen:!1,fileHandle:null}},V={appearance:{browser:!0,export:!1},collaborators:{browser:!1,export:!1},currentItemBackgroundColor:{browser:!0,export:!1},currentItemFillStyle:{browser:!0,export:!1},currentItemFontFamily:{browser:!0,export:!1},currentItemFontSize:{browser:!0,export:!1},currentItemOpacity:{browser:!0,export:!1},currentItemRoughness:{browser:!0,export:!1},currentItemStrokeColor:{browser:!0,export:!1},currentItemStrokeStyle:{browser:!0,export:!1},currentItemStrokeWidth:{browser:!0,export:!1},currentItemTextAlign:{browser:!0,export:!1},currentItemStrokeSharpness:{browser:!0,export:!1},currentItemLinearStrokeSharpness:{browser:!0,export:!1},cursorButton:{browser:!0,export:!1},cursorX:{browser:!0,export:!1},cursorY:{browser:!0,export:!1},draggingElement:{browser:!1,export:!1},editingElement:{browser:!1,export:!1},startBoundElement:{browser:!1,export:!1},editingGroupId:{browser:!0,export:!1},editingLinearElement:{browser:!1,export:!1},elementLocked:{browser:!0,export:!1},elementType:{browser:!0,export:!1},errorMessage:{browser:!1,export:!1},exportBackground:{browser:!0,export:!1},exportEmbedScene:{browser:!0,export:!1},gridSize:{browser:!0,export:!0},height:{browser:!1,export:!1},isBindingEnabled:{browser:!1,export:!1},isCollaborating:{browser:!1,export:!1},isLibraryOpen:{browser:!1,export:!1},isLoading:{browser:!1,export:!1},isResizing:{browser:!1,export:!1},isRotating:{browser:!1,export:!1},lastPointerDownWith:{browser:!0,export:!1},multiElement:{browser:!1,export:!1},name:{browser:!0,export:!1},openMenu:{browser:!0,export:!1},previousSelectedElementIds:{browser:!0,export:!1},resizingElement:{browser:!1,export:!1},scrolledOutside:{browser:!0,export:!1},scrollX:{browser:!0,export:!1},scrollY:{browser:!0,export:!1},selectedElementIds:{browser:!0,export:!1},selectedGroupIds:{browser:!0,export:!1},selectionElement:{browser:!1,export:!1},shouldAddWatermark:{browser:!0,export:!1},shouldCacheIgnoreZoom:{browser:!0,export:!1},showShortcutsDialog:{browser:!1,export:!1},suggestedBindings:{browser:!1,export:!1},username:{browser:!0,export:!1},viewBackgroundColor:{browser:!0,export:!0},width:{browser:!1,export:!1},zenModeEnabled:{browser:!0,export:!1},zoom:{browser:!0,export:!1},offsetTop:{browser:!1,export:!1},offsetLeft:{browser:!1,export:!1},fileHandle:{browser:!1,export:!1}},J=function(e,t){var n,r={},a=Object(w.a)(Object.keys(e));try{for(a.s();!(n=a.n()).done;){var o=n.value,i=V[o];i||console.error('_clearAppStateForStorage: appState key "'.concat(o,'" config doesn\'t exist for "').concat(t,'" export type')),(null===i||void 0===i?void 0:i[t])&&(r[o]=e[o])}}catch(c){a.e(c)}finally{a.f()}return r},Z=function(e){return J(e,"export")},K=n(3),$=function(e){return null!=e&&"text"===e.type},q=function(e){return null!=e&&Q(e.type)},Q=function(e){return"arrow"===e||"line"===e||"draw"===e},ee=function(e){return null!=e&&te(e.type)},te=function(e){return"arrow"===e},ne=function(e){return null!=e&&("rectangle"===e.type||"diamond"===e.type||"ellipse"===e.type||"text"===e.type)},re=(n(33),function(e,t,n,r,a){return[(e-n)*Math.cos(a)-(t-r)*Math.sin(a)+n,(e-n)*Math.sin(a)+(t-r)*Math.cos(a)+r]}),ae=function(e,t,n,r){var a=n-e,o=r-t;return Math.hypot(a,o)},oe=function(e){if(e.length>=3){var t=[e[0],e[e.length-1]],n=t[0],r=t[1];return ae(n[0],n[1],r[0],r[1])<=k.h}return!1},ie=function(e,t,n){var r=e.length;if(r<3)return!1;for(var a=[Number.MAX_SAFE_INTEGER,n],o=[t,n],i=0,c=0;c<r;c++){var l=e[c],s=e[(c+1)%r];if(se(l,s,o,a)){if(0===le(l,o,s))return ce(l,o,s);i++}}return i%2===1},ce=function(e,t,n){return t[0]<=Math.max(e[0],n[0])&&t[0]>=Math.min(e[0],n[0])&&t[1]<=Math.max(e[1],n[1])&&t[1]>=Math.min(e[1],n[1])},le=function(e,t,n){var r=(t[1]-e[1])*(n[0]-t[0])-(t[0]-e[0])*(n[1]-t[1]);return 0===r?0:r>0?1:2},se=function(e,t,n,r){var a=le(e,t,n),o=le(e,t,r),i=le(n,r,e),c=le(n,r,t);return a!==o&&i!==c||(!(0!==a||!ce(e,n,t))||(!(0!==o||!ce(e,r,t))||(!(0!==i||!ce(n,e,r))||!(0!==c||!ce(n,t,r)))))},ue=n(15),de=function(e){return q(e)?fe(e):[e.x,e.y,e.x+e.width,e.y+e.height]},pe=function(e){var t,n=Object(w.a)(e.sets);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("path"===r.type)return r.ops}}catch(a){n.e(a)}finally{n.f()}return e.sets[0].ops},he=function(e,t){var n=[0,0],r=e.reduce((function(e,r){var a=r.op,o=r.data;if("move"===a)n=o;else if("bcurveTo"===a){var i=[o[0],o[1]],c=[o[2],o[3]],l=[o[4],o[5]],s=n;n=l;for(var u=function(e,t){return Math.pow(1-e,3)*l[t]+3*e*Math.pow(1-e,2)*c[t]+3*Math.pow(e,2)*(1-e)*i[t]+s[t]*Math.pow(e,3)},p=0;p<=1;){var h=u(p,0),f=u(p,1);if(t){var b=t(h,f),g=Object(d.a)(b,2);h=g[0],f=g[1]}e.minY=Math.min(e.minY,f),e.minX=Math.min(e.minX,h),e.maxX=Math.max(e.maxX,h),e.maxY=Math.max(e.maxY,f),p+=.1}}return e}),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});return[r.minX,r.minY,r.maxX,r.maxY]},fe=function(e){if(e.points.length<2||!Se(e)){var t=e.points.reduce((function(e,t){var n=Object(d.a)(t,2),r=n[0],a=n[1];return e.minY=Math.min(e.minY,a),e.minX=Math.min(e.minX,r),e.maxX=Math.max(e.maxX,r),e.maxY=Math.max(e.maxY,a),e}),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}),n=t.minX,r=t.minY,a=t.maxX,o=t.maxY;return[n+e.x,r+e.y,a+e.x,o+e.y]}var i=Se(e),c=pe(i[0]),l=he(c),s=Object(d.a)(l,4),u=s[0],p=s[1],h=s[2],f=s[3];return[u+e.x,p+e.y,h+e.x,f+e.y]},be=function(e){var t=de(e),n=Object(d.a)(t,4),r=n[0],a=n[1],o=n[2],i=n[3],c=(r+o)/2,l=(a+i)/2;if(q(e))return function(e,t,n){if(e.points.length<2||!Se(e)){var r=e.points.reduce((function(r,a){var o=Object(d.a)(a,2),i=o[0],c=o[1],l=re(e.x+i,e.y+c,t,n,e.angle),s=Object(d.a)(l,2);return i=s[0],c=s[1],r.minY=Math.min(r.minY,c),r.minX=Math.min(r.minX,i),r.maxX=Math.max(r.maxX,i),r.maxY=Math.max(r.maxY,c),r}),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});return[r.minX,r.minY,r.maxX,r.maxY]}var a=Se(e),o=pe(a[0]);return he(o,(function(r,a){return re(e.x+r,e.y+a,t,n,e.angle)}))}(e,c,l);if("diamond"===e.type){var s=re(c,a,c,l,e.angle),u=Object(d.a)(s,2),p=u[0],h=u[1],f=re(c,i,c,l,e.angle),b=Object(d.a)(f,2),g=b[0],m=b[1],v=re(r,l,c,l,e.angle),w=Object(d.a)(v,2),y=w[0],x=w[1],S=re(o,l,c,l,e.angle),k=Object(d.a)(S,2),j=k[0],O=k[1];return[Math.min(p,g,y,j),Math.min(h,m,x,O),Math.max(p,g,y,j),Math.max(h,m,x,O)]}if("ellipse"===e.type){var E=(o-r)/2,C=(i-a)/2,M=Math.cos(e.angle),A=Math.sin(e.angle),I=Math.hypot(E*M,C*A),L=Math.hypot(C*M,E*A);return[c-I,l-L,c+I,l+L]}var N=re(r,a,c,l,e.angle),T=Object(d.a)(N,2),P=T[0],D=T[1],R=re(r,i,c,l,e.angle),B=Object(d.a)(R,2),z=B[0],_=B[1],F=re(o,i,c,l,e.angle),G=Object(d.a)(F,2),Y=G[0],U=G[1],X=re(o,a,c,l,e.angle),W=Object(d.a)(X,2),H=W[0],V=W[1];return[Math.min(P,z,Y,H),Math.min(D,_,U,V),Math.max(P,z,Y,H),Math.max(D,_,U,V)]},ge=function(e){if(!e.length)return[0,0,0,0];var t=1/0,n=-1/0,r=1/0,a=-1/0;return e.forEach((function(e){var o=be(e),i=Object(d.a)(o,4),c=i[0],l=i[1],s=i[2],u=i[3];t=Math.min(t,c),r=Math.min(r,l),n=Math.max(n,s),a=Math.max(a,u)})),[t,r,n,a]},me=function(e,t,n){var r=ue.a.generator(),a="sharp"===n?r.linearPath(t,ke(e)):r.curve(t,ke(e)),o=pe(a),i=he(o),c=Object(d.a)(i,4),l=c[0],s=c[1],u=c[2],p=c[3];return[l+e.x,s+e.y,u+e.x,p+e.y]},ve=(H(),[12,8]),we=[3,6],ye=new WeakMap,xe=new WeakMap,Se=function(e){return xe.get(e)},ke=function(e){var t={seed:e.seed,strokeLineDash:"dashed"===e.strokeStyle?ve:"dotted"===e.strokeStyle?we:void 0,disableMultiStroke:"solid"!==e.strokeStyle,strokeWidth:"solid"!==e.strokeStyle?e.strokeWidth+.5:e.strokeWidth,fillWeight:e.strokeWidth/2,hachureGap:4*e.strokeWidth,roughness:e.roughness,stroke:e.strokeColor};switch(e.type){case"rectangle":case"diamond":case"ellipse":return t.fillStyle=e.fillStyle,t.fill="transparent"===e.backgroundColor?void 0:e.backgroundColor,"ellipse"===e.type&&(t.curveFitting=1),t;case"line":case"draw":return oe(e.points)&&(t.fillStyle=e.fillStyle,t.fill="transparent"===e.backgroundColor?void 0:e.backgroundColor),t;case"arrow":return t;default:throw new Error("Unimplemented type ".concat(e.type))}},je=function(e,t){var n=xe.get(e)||null;if(!n){switch(ye.delete(e),e.type){case"rectangle":if("round"===e.strokeSharpness){var r=e.width,a=e.height,o=.25*Math.min(r,a);n=t.path("M ".concat(o," 0 L ").concat(r-o," 0 Q ").concat(r," 0, ").concat(r," ").concat(o," L ").concat(r," ").concat(a-o," Q ").concat(r," ").concat(a,", ").concat(r-o," ").concat(a," L ").concat(o," ").concat(a," Q 0 ").concat(a,", 0 ").concat(a-o," L 0 ").concat(o," Q 0 0, ").concat(o," 0"),ke(e))}else n=t.rectangle(0,0,e.width,e.height,ke(e));break;case"diamond":var i=function(e){var t=Math.floor(e.width/2)+1,n=e.width,r=Math.floor(e.height/2)+1;return[t,0,n,r,t,e.height,0,r]}(e),c=Object(d.a)(i,8),l=c[0],s=c[1],u=c[2],p=c[3],h=c[4],f=c[5],b=c[6],g=c[7];n=t.polygon([[l,s],[u,p],[h,f],[b,g]],ke(e));break;case"ellipse":n=t.ellipse(e.width/2,e.height/2,e.width,e.height,ke(e));break;case"line":case"draw":case"arrow":var m=ke(e),v=e.points.length?e.points:[[0,0]];if(n="sharp"===e.strokeSharpness?m.fill?[t.polygon(v,m)]:[t.linearPath(v,m)]:[t.curve(v,m)],"arrow"===e.type){var w=function(e,t){var n=pe(t[0]);if(n.length<1)return null;var r=n[n.length-1].data,a=[r[4],r[5]],o=[r[2],r[3]],i=[r[0],r[1]],c=n[n.length-2],l=[0,0];"move"===c.op?l=c.data:"bcurveTo"===c.op&&(l=[c.data[4],c.data[5]]);var s=function(e,t){return Math.pow(1-e,3)*a[t]+3*e*Math.pow(1-e,2)*o[t]+3*Math.pow(e,2)*(1-e)*i[t]+l[t]*Math.pow(e,3)},u=a[0],p=a[1],h=[s(.3,0),s(.3,1)],f=h[0],b=h[1],g=Math.hypot(u-f,p-b),m=(u-f)/g,v=(p-b)/g,w=e.points.reduce((function(e,t,n,r){var a=Object(d.a)(t,2),o=a[0],i=a[1],c=n>0?r[n-1]:[0,0],l=Object(d.a)(c,2),s=l[0],u=l[1];return e+Math.hypot(o-s,i-u)}),0),y=Math.min(30,w/2),x=u-m*y,S=p-v*y,k=re(x,S,u,p,-20*Math.PI/180),j=Object(d.a)(k,2),O=j[0],E=j[1],C=re(x,S,u,p,20*Math.PI/180),M=Object(d.a)(C,2);return[u,p,O,E,M[0],M[1]]}(e,n);if(w){var y,x=Object(d.a)(w,6),S=x[0],k=x[1],j=x[2],O=x[3],E=x[4],C=x[5];"dotted"===e.strokeStyle?m.strokeLineDash=[3,4]:delete m.strokeLineDash,(y=n).push.apply(y,[t.line(j,O,S,k,m),t.line(E,C,S,k,m)])}}break;case"text":n=[]}xe.set(e,n)}},Oe=function(e,t,n,r,a){var o=de(e),i=Object(d.a)(o,4),c=i[0],l=i[1],s=i[2],u=i[3],p=(s-c)/2-(e.x-c),h=(u-l)/2-(e.y-l),f=180*e.angle/Math.PI,b=t.generator;switch(e.type){case"selection":throw new Error("Selection rendering is not supported for SVG");case"rectangle":case"diamond":case"ellipse":je(e,b);var g=t.draw(Se(e)),m=e.opacity/100;1!==m&&(g.setAttribute("stroke-opacity","".concat(m)),g.setAttribute("fill-opacity","".concat(m))),g.setAttribute("transform","translate(".concat(r||0," ").concat(a||0,") rotate(").concat(f," ").concat(p," ").concat(h,")")),n.appendChild(g);break;case"line":case"draw":case"arrow":je(e,b);var v=n.ownerDocument.createElementNS(j,"g"),w=e.opacity/100;Se(e).forEach((function(n){var o=t.draw(n);1!==w&&(o.setAttribute("stroke-opacity","".concat(w)),o.setAttribute("fill-opacity","".concat(w))),o.setAttribute("transform","translate(".concat(r||0," ").concat(a||0,") rotate(").concat(f," ").concat(p," ").concat(h,")")),"line"!==e.type&&"draw"!==e.type||!oe(e.points)||"transparent"===e.backgroundColor||o.setAttribute("fill-rule","evenodd"),v.appendChild(o)})),n.appendChild(v);break;default:if(!$(e))throw new Error("Unimplemented type ".concat(e.type));var y=e.opacity/100,x=n.ownerDocument.createElementNS(j,"g");1!==y&&(x.setAttribute("stroke-opacity","".concat(y)),x.setAttribute("fill-opacity","".concat(y))),x.setAttribute("transform","translate(".concat(r||0," ").concat(a||0,") rotate(").concat(f," ").concat(p," ").concat(h,")"));for(var S=e.text.replace(/\r\n?/g,"\n").split("\n"),k=e.height/S.length,O=e.height-e.baseline,E="center"===e.textAlign?e.width/2:"right"===e.textAlign?e.width:0,M=P(e.text)?"rtl":"ltr",A="center"===e.textAlign?"middle":"right"===e.textAlign||"rtl"===M?"end":"start",I=0;I<S.length;I++){var L=n.ownerDocument.createElementNS(j,"text");L.textContent=S[I],L.setAttribute("x","".concat(E)),L.setAttribute("y","".concat((I+1)*k-O)),L.setAttribute("font-family",C(e)),L.setAttribute("font-size","".concat(e.fontSize,"px")),L.setAttribute("fill",e.strokeColor),L.setAttribute("text-anchor",A),L.setAttribute("style","white-space: pre;"),L.setAttribute("direction",M),x.appendChild(L)}n.appendChild(x)}},Ee=n(9),Ce=n(10),Me=function(e){return"string"===typeof e},Ae=function(){function e(){Object(Ee.a)(this,e),this.callbacks=new Set,this.nonDeletedElements=[],this.elements=[],this.elementsMap=new Map}return Object(Ce.a)(e,[{key:"getElementsIncludingDeleted",value:function(){return this.elements}},{key:"getElements",value:function(){return this.nonDeletedElements}},{key:"getElement",value:function(e){return this.elementsMap.get(e)||null}},{key:"getNonDeletedElement",value:function(e){var t=this.getElement(e);return t&&Xt(t)?t:null}},{key:"getNonDeletedElements",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.getNonDeletedElement(e);null!=r&&n.push(r)})),n}},{key:"replaceAllElements",value:function(t){var n=this;this.elements=t,this.elementsMap.clear(),t.forEach((function(t){n.elementsMap.set(t.id,t),e.mapElementToScene(t,n)})),this.nonDeletedElements=Ut(this.elements),this.informMutation()}},{key:"informMutation",value:function(){for(var e=0,t=Array.from(this.callbacks);e<t.length;e++){(0,t[e])()}}},{key:"addCallback",value:function(e){var t=this;if(this.callbacks.has(e))throw new Error;return this.callbacks.add(e),function(){if(!t.callbacks.has(e))throw new Error;t.callbacks.delete(e)}}},{key:"destroy",value:function(){var t=this;e.sceneMapById.forEach((function(n,r){n===t&&e.sceneMapById.delete(r)})),this.callbacks.clear()}}],[{key:"mapElementToScene",value:function(e,t){Me(e)?this.sceneMapById.set(e,t):this.sceneMapByElement.set(e,t)}},{key:"getScene",value:function(e){return Me(e)?this.sceneMapById.get(e)||null:this.sceneMapByElement.get(e)||null}}]),e}();Ae.sceneMapByElement=new WeakMap,Ae.sceneMapById=new Map;var Ie=Ae,Le=n(16),Ne=n(34),Te=n.n(Ne),Pe=new Le.a(Date.now()),De=function(){return Math.floor(Pe.next()*Math.pow(2,31))},Re=function(){return Te()()},Be=function(e,t){var n,r=!1,a=t.points;for(var o in"undefined"!==typeof a&&(t=Object(K.a)(Object(K.a)({},function(e){var t=e.map((function(e){return e[0]})),n=e.map((function(e){return e[1]}));return{width:Math.max.apply(Math,Object(x.a)(t))-Math.min.apply(Math,Object(x.a)(t)),height:Math.max.apply(Math,Object(x.a)(n))-Math.min.apply(Math,Object(x.a)(n))}}(a)),t)),t){var i=t[o];if("undefined"!==typeof i){if(e[o]===i&&("object"!==typeof i||null===i||"groupIds"===o))continue;if("points"===o){var c=e[o],l=i;if(c.length===l.length){for(var s=!1,u=c.length;--u;){var d=c[u],p=l[u];if(d[0]!==p[0]||d[1]!==p[1]){s=!0;break}}if(!s)continue}}e[o]=i,r=!0}}r&&("undefined"===typeof t.height&&"undefined"===typeof t.width&&"undefined"===typeof a||function(e){xe.delete(e)}(e),e.version++,e.versionNonce=De(),null===(n=Ie.getScene(e))||void 0===n||n.informMutation())},ze=function(e,t){return Object(K.a)(Object(K.a)(Object(K.a)({},e),t),{},{version:e.version+1,versionNonce:De()})},_e=function(e){return q(e)?e.points.length<2:0===e.width&&0===e.height},Fe=n(27),Ge=n(13),Ye=function(e){return Math.floor(e)},Ue=function(e,t,n){if(!e.length)return{scrollX:Ye(0),scrollY:Ye(0)};var r=ge(e),a=Object(d.a)(r,4),o=a[0],i=a[1],c=a[2],l=a[3];if(function(e,t,n){var r=Object(d.a)(n,4),a=r[0],o=r[1],i=r[2],c=r[3],l=N({sceneX:a,sceneY:o},e),s=l.x,u=l.y,p=N({sceneX:i,sceneY:c},e),h=p.x,f=p.y;return h-s>e.width||f-u>e.height}(t,0,[o,i,c,l])){var s=function(e,t){if(!e.length)return[0,0,0,0];var n=1/0,r=e[0];return e.forEach((function(e){var a=be(e),o=Object(d.a)(a,4),i=o[0],c=o[1],l=o[2],s=o[3],u=ae((i+l)/2,(c+s)/2,t.x,t.y);u<n&&(n=u,r=e)})),be(r)}(e,L({clientX:t.scrollX,clientY:t.scrollY},t)),u=Object(d.a)(s,4);o=u[0],i=u[1],c=u[2],l=u[3]}return function(e){var t=e.scenePoint,n=e.viewportDimensions,r=e.zoom;return{scrollX:Ye(n.width/2*(1/r.value)-t.x-r.translation.x*(1/r.value)),scrollY:Ye(n.height/2*(1/r.value)-t.y-r.translation.y*(1/r.value))}}({scenePoint:{x:(o+c)/2,y:(i+l)/2},viewportDimensions:{width:t.width,height:t.height},zoom:t.zoom})},Xe=function(e,t){var n,r,a=t.x,o=t.y,i=t.strokeColor,c=t.backgroundColor,l=t.fillStyle,s=t.strokeWidth,u=t.strokeStyle,d=t.roughness,p=t.opacity,h=t.width,f=void 0===h?0:h,b=t.height,g=void 0===b?0:b,m=t.angle,v=void 0===m?0:m,w=t.groupIds,y=void 0===w?[]:w,x=t.strokeSharpness,S=t.boundElementIds,k=void 0===S?null:S,j=Object(Fe.a)(t,["x","y","strokeColor","backgroundColor","fillStyle","strokeWidth","strokeStyle","roughness","opacity","width","height","angle","groupIds","strokeSharpness","boundElementIds"]);return{id:j.id||Re(),type:e,x:a,y:o,width:f,height:g,angle:v,strokeColor:i,backgroundColor:c,fillStyle:l,strokeWidth:s,strokeStyle:u,roughness:d,opacity:p,groupIds:y,strokeSharpness:x,seed:null!==(n=j.seed)&&void 0!==n?n:De(),version:j.version||1,versionNonce:null!==(r=j.versionNonce)&&void 0!==r?r:0,isDeleted:!1,boundElementIds:k}},We=function(e,t){return{x:"center"===e.textAlign?t.width/2:"right"===e.textAlign?t.width:0,y:"middle"===e.verticalAlign?t.height/2:0}},He=function(e){var t=A(e.text,M(e)),n=We(e,t);return ze(Object(K.a)(Object(K.a)({},Xe("text",e)),{},{text:e.text,fontSize:e.fontSize,fontFamily:e.fontFamily,textAlign:e.textAlign,verticalAlign:e.verticalAlign,x:e.x-n.x,y:e.y-n.y,width:t.width,height:t.height,baseline:t.baseline}),{})},Ve=function(e,t){return[0,0,0,0,t,e,1,0]},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[0,0,0,0,0,0,0,0];if(t<0||t>7)throw new Error("Expected `index` betwen 0 and 7, got `".concat(t,"`"));return 0!==e&&(n[t]=e),n},Ze=function(e){return[e[0],e[1],e[2],e[3],-e[4],-e[5],-e[6],-e[7]]},Ke=function(e,t){return ot(t)?[e[0]+t,e[1],e[2],e[3],e[4],e[5],e[6],e[7]]:[e[0]+t[0],e[1]+t[1],e[2]+t[2],e[3]+t[3],e[4]+t[4],e[5]+t[5],e[6]+t[6],e[7]+t[7]]},$e=function(e,t){return ot(t)?[e[0]-t,e[1],e[2],e[3],e[4],e[5],e[6],e[7]]:[e[0]-t[0],e[1]-t[1],e[2]-t[2],e[3]-t[3],e[4]-t[4],e[5]-t[5],e[6]-t[6],e[7]-t[7]]},qe=function(e,t){return ot(t)?[e[0]*t,e[1]*t,e[2]*t,e[3]*t,e[4]*t,e[5]*t,e[6]*t,e[7]*t]:[Qe(e,t),t[1]*e[0]+t[0]*e[1]-t[4]*e[2]+t[5]*e[3]+t[2]*e[4]-t[3]*e[5]-t[7]*e[6]-t[6]*e[7],t[2]*e[0]+t[0]*e[2]-t[6]*e[3]+t[3]*e[6],t[3]*e[0]+t[6]*e[2]+t[0]*e[3]-t[2]*e[6],t[4]*e[0]+t[2]*e[1]-t[1]*e[2]+t[7]*e[3]+t[0]*e[4]+t[6]*e[5]-t[5]*e[6]+t[3]*e[7],t[5]*e[0]-t[3]*e[1]+t[7]*e[2]+t[1]*e[3]-t[6]*e[4]+t[0]*e[5]+t[4]*e[6]+t[2]*e[7],t[6]*e[0]+t[3]*e[2]-t[2]*e[3]+t[0]*e[6],t[7]*e[0]+t[6]*e[1]+t[5]*e[2]+t[4]*e[3]+t[3]*e[4]+t[2]*e[5]+t[1]*e[6]+t[0]*e[7]]},Qe=function(e,t){return t[0]*e[0]+t[2]*e[2]+t[3]*e[3]-t[6]*e[6]},et=function(e,t){return[tt(e,t),e[1]*t[7]+e[4]*t[5]-e[5]*t[4]+e[7]*t[1],e[2]*t[7]-e[4]*t[6]+e[6]*t[4]+e[7]*t[2],e[3]*t[7]+e[5]*t[6]-e[6]*t[5]+e[7]*t[3],e[4]*t[7]+e[7]*t[4],e[5]*t[7]+e[7]*t[5],e[6]*t[7]+e[7]*t[6],e[7]*t[7]]},tt=function(e,t){return e[0]*t[7]+e[1]*t[6]+e[2]*t[5]+e[3]*t[4]+e[4]*t[3]+e[5]*t[2]+e[6]*t[1]+e[7]*t[0]},nt=function(e,t){return[t[0]*e[0]+t[2]*e[2]+t[3]*e[3]-t[6]*e[6],t[1]*e[0]+t[0]*e[1]-t[4]*e[2]+t[5]*e[3]+t[2]*e[4]-t[3]*e[5]-t[7]*e[6]-t[6]*e[7],t[2]*e[0]+t[0]*e[2]-t[6]*e[3]+t[3]*e[6],t[3]*e[0]+t[6]*e[2]+t[0]*e[3]-t[2]*e[6],t[4]*e[0]+t[7]*e[3]+t[0]*e[4]+t[3]*e[7],t[5]*e[0]+t[7]*e[2]+t[0]*e[5]+t[2]*e[7],t[6]*e[0]+t[0]*e[6],t[7]*e[0]+t[0]*e[7]]},rt=function(e){return Math.sqrt(Math.abs(e[0]*e[0]-e[2]*e[2]-e[3]*e[3]+e[6]*e[6]))},at=function(e){var t=rt(e);if(0===t||1===t)return e;var n=e[6]<0?-1:1;return qe(e,n/t)},ot=function(e){return"number"===typeof e},it=(Je(1,1),Je(1,2),Je(1,3),Je(1,4),Je(1,5),Je(1,6),Je(1,7),function(e,t,n){return at([0,n,e,t,0,0,0,0])}),ct=function(e,t){return at(et(t,e))},lt=function(e,t){return nt(e,t)},st=function(e){var t=Object(d.a)(e,2),n=t[0];return[0,0,0,0,t[1],n,1,0]},ut=function(e){return[e[5],e[4]]},dt=function(e,t){return tt(e,t)},pt=function(e){return[0,0,0,0,e[4],e[5],0,0]},ht=function(e,t){return Ke(qe(e,Math.sin(t/2)),Math.cos(t/2))},ft=function(e,t){return at(qe(qe(e,t),Ze(e)))},bt=n(17),gt=function(e,t){var n=t.x,r=t.y,a=mt(e,e.width,e.height);return vt({element:e,point:[n,r],threshold:a,check:xt})},mt=function(e,t,n){var r=("diamond"===e.type?1/Math.sqrt(2):1)*Math.min(t,n);return Math.max(15,Math.min(.25*r,80))},vt=function(e){switch(e.element.type){case"rectangle":case"text":case"diamond":case"ellipse":var t=wt(e.element,e.point);return e.check(t,e.threshold);case"arrow":case"line":case"draw":return Et(e);case"selection":return console.warn("This should not happen, we need to investigate why it does."),!1}},wt=function(e,t){switch(e.type){case"rectangle":case"text":return St(e,t);case"diamond":return kt(e,t);case"ellipse":return jt(e,t)}},yt=function(e,t){return e<t},xt=function(e,t){return 0<=e&&e<t},St=function(e,t){var n=Ct(e,t),r=Object(d.a)(n,4),a=r[1],o=r[2],i=r[3];return Math.max(dt(a,it(0,1,-i)),dt(a,it(1,0,-o)))},kt=function(e,t){var n=Ct(e,t),r=Object(d.a)(n,4),a=r[1],o=r[2],i=r[3],c=it(i,o,-i*o);return dt(a,c)},jt=function(e,t){var n,r=Ot(e,t),a=Object(d.a)(r,2),o=a[0],i=a[1];return n=i,-Math.sign(n[1])*dt(o,i)},Ot=function(e,t){var n=Ct(e,t),r=Object(d.a)(n,4),a=r[1],o=r[2],i=r[3],c=ut(a),l=Object(d.a)(c,2),s=l[0],u=l[1],p=.707,h=.707,f=o,b=i;[0,1,2,3].forEach((function(e){var t=f*p,n=b*h,r=(f*f-b*b)*Math.pow(p,3)/f,a=(b*b-f*f)*Math.pow(h,3)/b,o=t-r,i=n-a,c=s-r,l=u-a,d=Math.hypot(i,o),g=Math.hypot(l,c);p=Math.min(1,Math.max(0,(c*d/g+r)/f)),h=Math.min(1,Math.max(0,(l*d/g+a)/b));var m=Math.hypot(h,p);p/=m,h/=m}));var g,m=Ve(f*p,b*h);return[a,lt(ct(a,g=m),g)]},Et=function(e){var t=e.element,n=e.threshold;if(!Se(t))return!1;var r=Ct(e.element,e.point),a=Object(d.a)(r,4),o=a[0],i=a[1],c=a[2],l=a[3],s=it(0,1,-l),u=it(1,0,-c);if(!yt(dt(i,s),n)||!yt(dt(i,u),n))return!1;var p=ut(o),h=Object(d.a)(p,2),f=h[0],b=h[1],g=Se(t);if(e.check===yt&&g.some((function(e){return Lt(e,f,b,t.strokeSharpness)})))return!0;return g.some((function(e){return Nt(e,f,b,n)}))},Ct=function(e,t){var n,r=st(t),a=de(e),o=At(a),i=ht(o,e.angle),c=ft(i,r),l=function(e){return[0,0,0,0,Math.abs(e[4]),Math.abs(e[5]),1,0]}($e(c,pt(o))),s=(n=e.x,[0,0,0,0,e.y,n,0,0]),u=$e(c,s),p=Object(d.a)(a,4),h=p[0],f=p[1];return[u,l,(p[2]-h)/2,(p[3]-f)/2]},Mt=function(e){var t,n=de(e),r=At(n),a=ht(r,e.angle),o=Ze([1,0,0,0,-.5*(t=pt(r))[5],.5*t[4],0,0]);return qe(o,a)},At=function(e){var t=Object(d.a)(e,4),n=t[0],r=t[1],a=t[2],o=t[3];return Ve((n+a)/2,(r+o)/2)},It=function(e,t,n){var r=Mt(e),a=ft(r,st(t)),o=ft(r,st(n)),i=ct(a,o),c=e.height/e.width,l=e.width/2,s=e.height/2,u=i[2],d=i[3],p=i[1],h=Math.abs(d),f=Math.abs(u);switch(e.type){case"rectangle":case"text":return p/(l*(f+c*h));case"diamond":return h<f?p/(f*l):p/(h*s);case"ellipse":return p/(l*Math.sqrt(Math.pow(u,2)+Math.pow(c,2)*Math.pow(d,2)))}},Lt=function(e,t,n,r){var a,o=pe(e),i=[],c=!1,l=Object(w.a)(o);try{for(l.s();!(a=l.n()).done;){var s=a.value;"move"===s.op?(c=!c)&&i.push([s.data[0],s.data[1]]):"bcurveTo"===s.op&&c&&(i.push([s.data[0],s.data[1]]),i.push([s.data[2],s.data[3]]),i.push([s.data[4],s.data[5]]))}}catch(d){l.e(d)}finally{l.f()}if(i.length>=4){if("sharp"===r)return ie(i,t,n);var u=Object(bt.a)(i,10,5);return ie(u,t,n)}return!1},Nt=function(e,t,n,r){var a=pe(e),o=[0,0];return a.some((function(e,a){var i=e.op,c=e.data;if("move"===i)o=c;else if("bcurveTo"===i){var l=[c[0],c[1]],s=[c[2],c[3]],u=[c[4],c[5]],p=o;return o=u,function(e,t,n,r,a,o){for(var i=Object(d.a)(a,2),c=i[0],l=i[1],s=function(a,o){return Math.pow(1-a,3)*r[o]+3*a*Math.pow(1-a,2)*n[o]+3*Math.pow(a,2)*(1-a)*t[o]+e[o]*Math.pow(a,3)},u=0;u<=1;){var p=s(u,0),h=s(u,1);if(Math.sqrt(Math.pow(p-c,2)+Math.pow(h-l,2))<o)return!0;u+=.01}return!1}(p,l,s,u,[t,n],r)}return!1}))},Tt=function(){function e(t,n){Object(Ee.a)(this,e),this.elementId=void 0,this.activePointIndex=void 0,this.isDragging=void 0,this.lastUncommittedPoint=void 0,this.pointerOffset=void 0,this.startBindingElement=void 0,this.endBindingElement=void 0,this.elementId=t.id,Ie.mapElementToScene(this.elementId,n),e.normalizePoints(t),this.activePointIndex=null,this.lastUncommittedPoint=null,this.isDragging=!1,this.pointerOffset={x:0,y:0},this.startBindingElement="keep",this.endBindingElement="keep"}return Object(Ce.a)(e,null,[{key:"getElement",value:function(e){var t,n=null===(t=Ie.getScene(e))||void 0===t?void 0:t.getNonDeletedElement(e);return n||null}},{key:"handlePointDragging",value:function(t,n,r,a,o){if(!t.editingLinearElement)return!1;var i=t.editingLinearElement,c=i.activePointIndex,l=i.elementId,s=i.isDragging,u=e.getElement(l);if(!u)return!1;if(null!=c&&c>-1){!1===s&&n({editingLinearElement:Object(K.a)(Object(K.a)({},i),{},{isDragging:!0})});var d=e.createPointAt(u,r-i.pointerOffset.x,a-i.pointerOffset.y,t.gridSize);return e.movePoint(u,c,d),ee(u)&&o(u,0===c?"start":"end"),!0}return!1}},{key:"handlePointerUp",value:function(t,n,r){var a=n.elementId,o=n.activePointIndex,i=n.isDragging,c=e.getElement(a);if(!c)return n;var l={};if(i&&(0===o||o===c.points.length-1)){oe(c.points)&&e.movePoint(c,o,0===o?c.points[c.points.length-1]:c.points[0]);var s=Pt(r)?Gt(D(e.getPointAtIndexGlobalCoordinates(c,o)),Ie.getScene(c)):null;l=Object(Ge.a)({},0===o?"startBindingElement":"endBindingElement",s)}return Object(K.a)(Object(K.a)(Object(K.a)({},n),l),{},{isDragging:!1,pointerOffset:{x:0,y:0}})}},{key:"handlePointerDown",value:function(t,n,r,a,o){var i={didAddPoint:!1,hitElement:null};if(!n.editingLinearElement)return i;var c=n.editingLinearElement.elementId,l=e.getElement(c);if(!l)return i;if(t.altKey)return null==n.editingLinearElement.lastUncommittedPoint&&Be(l,{points:[].concat(Object(x.a)(l.points),[e.createPointAt(l,o.x,o.y,n.gridSize)])}),a.resumeRecording(),r({editingLinearElement:Object(K.a)(Object(K.a)({},n.editingLinearElement),{},{activePointIndex:l.points.length-1,lastUncommittedPoint:null,endBindingElement:Gt(o,Ie.getScene(l))})}),i.didAddPoint=!0,i;var s=e.getPointIndexUnderCursor(l,n.zoom,o.x,o.y);if(s>-1)i.hitElement=l;else{var u=n.editingLinearElement,p=u.startBindingElement,h=u.endBindingElement;Pt(n)&&ee(l)&&Dt(l,p,h)}var f=de(l),b=Object(d.a)(f,4),g=b[0],m=b[1],v=(g+b[2])/2,w=(m+b[3])/2,y=s>-1&&re(l.x+l.points[s][0],l.y+l.points[s][1],v,w,l.angle);return r({editingLinearElement:Object(K.a)(Object(K.a)({},n.editingLinearElement),{},{activePointIndex:s>-1?s:null,pointerOffset:y?{x:o.x-y[0],y:o.y-y[1]}:{x:0,y:0}})}),i}},{key:"handlePointerMove",value:function(t,n,r,a,o){var i=a.elementId,c=a.lastUncommittedPoint,l=e.getElement(i);if(!l)return a;var s=l.points,u=s[s.length-1];if(!t.altKey)return u===c&&e.movePoint(l,s.length-1,"delete"),Object(K.a)(Object(K.a)({},a),{},{lastUncommittedPoint:null});var d=e.createPointAt(l,n-a.pointerOffset.x,r-a.pointerOffset.y,o);return u===c?e.movePoint(l,l.points.length-1,d):e.movePoint(l,"new",d),Object(K.a)(Object(K.a)({},a),{},{lastUncommittedPoint:l.points[l.points.length-1]})}},{key:"getPointsGlobalCoordinates",value:function(e){var t=de(e),n=Object(d.a)(t,4),r=n[0],a=n[1],o=n[2],i=n[3],c=(r+o)/2,l=(a+i)/2;return e.points.map((function(t){var n=e.x,r=e.y,a=re(n+t[0],r+t[1],c,l,e.angle),o=Object(d.a)(a,2);return[n=o[0],r=o[1]]}))}},{key:"getPointAtIndexGlobalCoordinates",value:function(e,t){var n=t<0?e.points.length+t:t,r=de(e),a=Object(d.a)(r,4),o=a[0],i=a[1],c=(o+a[2])/2,l=(i+a[3])/2,s=e.points[n],u=e.x,p=e.y;return re(u+s[0],p+s[1],c,l,e.angle)}},{key:"pointFromAbsoluteCoords",value:function(e,t){var n=de(e),r=Object(d.a)(n,4),a=r[0],o=r[1],i=(a+r[2])/2,c=(o+r[3])/2,l=re(t[0],t[1],i,c,-e.angle),s=Object(d.a)(l,2),u=s[0],p=s[1];return[u-e.x,p-e.y]}},{key:"getPointIndexUnderCursor",value:function(e,t,n,r){for(var a=this.getPointsGlobalCoordinates(e),o=a.length;--o>-1;){var i=a[o];if(ae(n,r,i[0],i[1])*t.value<this.POINT_HANDLE_SIZE/2+1)return o}return-1}},{key:"createPointAt",value:function(e,t,n,r){var a=function(e,t,n){return n?[Math.round(e/n)*n,Math.round(t/n)*n]:[e,t]}(t,n,r),o=de(e),i=Object(d.a)(o,4),c=i[0],l=i[1],s=(c+i[2])/2,u=(l+i[3])/2,p=re(a[0],a[1],s,u,-e.angle),h=Object(d.a)(p,2),f=h[0],b=h[1];return[f-e.x,b-e.y]}},{key:"normalizePoints",value:function(e){var t=e.points,n=t[0][0],r=t[0][1];Be(e,{points:t.map((function(e,t){return[e[0]-n,e[1]-r]})),x:e.x+n,y:e.y+r})}},{key:"movePointByOffset",value:function(t,n,r){var a=Object(d.a)(t.points[n],2),o=a[0],i=a[1];e.movePoint(t,n,[o+r.x,i+r.y])}},{key:"movePoint",value:function(e,t,n,r){var a,o=e.points,i=0,c=0;if("delete"===n){if("new"===t)throw new Error("invalid args in movePoint");(a=o.slice()).splice(t,1),0===t&&(i=a[0][0],c=a[0][1],a=a.map((function(e,t){return 0===t?[0,0]:[e[0]-i,e[1]-c]})))}else if("new"===t)a=[].concat(Object(x.a)(o),[n]);else{var l=n[0]-o[t][0],s=n[1]-o[t][1];a=o.map((function(e,n){return n===t?0===n?(i=l,c=s,e):(i=0,c=0,[e[0]+l,e[1]+s]):i||c?[e[0]-i,e[1]-c]:e}))}var u=me(e,a,e.strokeSharpness||"round"),d=me(e,o,e.strokeSharpness||"round"),p=(u[0]+u[2])/2,h=(u[1]+u[3])/2,f=(d[0]+d[2])/2,b=(d[1]+d[3])/2,g=re(i,c,f-p,b-h,e.angle);Be(e,Object(K.a)(Object(K.a)({},r),{},{points:a,x:e.x+g[0],y:e.y+g[1]}))}}]),e}();Tt.POINT_HANDLE_SIZE=20;/Mac|iPod|iPhone|iPad/.test(window.navigator.platform);var Pt=function(e){return e.isBindingEnabled},Dt=function(e,t,n){var r=new Set,a=new Set;Rt(e,t,n,"start",r,a),Rt(e,n,t,"end",r,a);var o=Array.from(a).filter((function(e){return!r.has(e)}));Ie.getScene(e).getNonDeletedElements(o).forEach((function(t){var n;Be(t,{boundElementIds:null===(n=t.boundElementIds)||void 0===n?void 0:n.filter((function(t){return t!==e.id}))})}))},Rt=function(e,t,n,r,a,o){if("keep"!==t)if(null!=t)null!=n&&("keep"===n?zt(e,t,r):"start"!==r&&n.id===t.id)||(Bt(e,t,r),a.add(t.id));else{var i=Ft(e,r);null!=i&&o.add(i)}},Bt=function(e,t,n){var r;Be(e,Object(Ge.a)({},"start"===n?"startBinding":"endBinding",Object(K.a)({elementId:t.id},Yt(e,t,n)))),Be(t,{boundElementIds:Object(x.a)(new Set([].concat(Object(x.a)(null!==(r=t.boundElementIds)&&void 0!==r?r:[]),[e.id])))})},zt=function(e,t,n){var r=e["start"===n?"endBinding":"startBinding"];return _t(e,null===r||void 0===r?void 0:r.elementId,t)},_t=function(e,t,n){return t===n.id&&e.points.length<3},Ft=function(e,t){var n="start"===t?"startBinding":"endBinding",r=e[n];return null==r?null:(Be(e,Object(Ge.a)({},n,null)),r.elementId)},Gt=function(e,t){return function(e,t){for(var n=null,r=e.length-1;r>=0;--r){var a=e[r];if(!a.isDeleted&&t(a)){n=a;break}}return n}(t.getElements(),(function(t){return ne(t)&&gt(t,e)}))},Yt=function(e,t,n){var r="start"===n?-1:1,a=-1===r?0:e.points.length-1,o=a-r,i=Tt.getPointAtIndexGlobalCoordinates(e,a),c=Tt.getPointAtIndexGlobalCoordinates(e,o);return{focus:It(t,c,i),gap:Math.max(1,wt(t,i))}},Ut=function(e){return e.filter((function(e){return!e.isDeleted}))},Xt=function(e){return!e.isDeleted},Wt=function(e){return Ut(e).map((function(e){return Q(e.type)?Object(K.a)(Object(K.a)({},e),{},{lastCommittedPoint:null}):e}))},Ht=function(e){return Wt(e)},Vt=function(e,t){var n,r,a,o,i,c,l,s,u={type:e.type,version:e.version||1,versionNonce:null!==(n=e.versionNonce)&&void 0!==n?n:0,isDeleted:null!==(r=e.isDeleted)&&void 0!==r&&r,id:e.id||Re(),fillStyle:e.fillStyle||"hachure",strokeWidth:e.strokeWidth||1,strokeStyle:null!==(a=e.strokeStyle)&&void 0!==a?a:"solid",roughness:null!==(o=e.roughness)&&void 0!==o?o:1,opacity:null==e.opacity?100:e.opacity,angle:e.angle||0,x:e.x||0,y:e.y||0,strokeColor:e.strokeColor,backgroundColor:e.backgroundColor,width:e.width||0,height:e.height||0,seed:null!==(i=e.seed)&&void 0!==i?i:1,groupIds:null!==(c=e.groupIds)&&void 0!==c?c:[],strokeSharpness:null!==(l=e.strokeSharpness)&&void 0!==l?l:Q(e.type)?"round":"sharp",boundElementIds:null!==(s=e.boundElementIds)&&void 0!==s?s:[]};return Object(K.a)(Object(K.a)(Object(K.a)({},u),function(e){var t={width:e.width,height:e.height,x:e.x,y:e.y};if(e.width<0){var n=Math.abs(e.width);t.width=n,t.x=e.x-n}if(e.height<0){var r=Math.abs(e.height);t.height=r,t.y=e.y-r}return t}(u)),t)},Jt=function(e){var t;switch(e.type){case"text":var n=e.fontSize,r=e.fontFamily;if("font"in e){var a=e.font.split(" "),o=Object(d.a)(a,2),i=o[0],c=o[1];n=parseInt(i,10),r=function(e){for(var t=0,n=Object.entries(k.g);t<n.length;t++){var r=Object(d.a)(n[t],2),a=r[0];if(r[1].includes(e))return parseInt(a)}return k.c}(c)}return Vt(e,{fontSize:n,fontFamily:r,text:null!==(t=e.text)&&void 0!==t?t:"",baseline:e.baseline,textAlign:e.textAlign||k.e,verticalAlign:e.verticalAlign||k.f});case"draw":case"line":case"arrow":return Vt(e,{startBinding:e.startBinding,endBinding:e.endBinding,points:!Array.isArray(e.points)||e.points.length<2?[[0,0],[e.width,e.height]]:e.points,lastCommittedPoint:null});case"ellipse":case"rectangle":case"diamond":return Vt(e,{})}},Zt=function(e){return(e||[]).reduce((function(e,t){if("selection"!==t.type&&!_e(t)){var n=Jt(t);n&&e.push(n)}return e}),[])},Kt=function(e,t){e=e||{};var n,r=H(),a={},o=Object(w.a)(Object.entries(r));try{for(o.s();!(n=o.n()).done;){var i=Object(d.a)(n.value,2),c=i[0],l=i[1],s=e[c],u=t?t[c]:void 0;a[c]=void 0!==s?s:void 0!==u?u:l}}catch(p){o.e(p)}finally{o.f()}return Object(K.a)(Object(K.a)({},a),{},{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0,zoom:"number"===typeof e.zoom?{value:e.zoom,translation:r.zoom.translation}:e.zoom||r.zoom})},$t=function(e,t){return{elements:Zt(e.elements),appState:Kt(e.appState,t||null)}},qt=n(18),Qt=n(20),en=n(36),tn=(Error,function(){var e=Object(u.a)(s.a.mark((function e(t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("image/png"!==t.type){e.next=18;break}return e.prev=1,e.next=4,Promise.all([n.e(34),n.e(30)]).then(n.bind(null,117));case 4:return e.next=6,e.sent.decodePngMetadata(t);case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(1),"INVALID"!==e.t0.message){e.next=15;break}throw new Error(X("alerts.imageDoesNotContainScene"));case 15:throw new Error(X("alerts.cannotRestoreFromImage"));case 16:e.next=43;break;case 18:if(!("text"in Blob)){e.next=24;break}return e.next=21,t.text();case 21:r=e.sent,e.next=27;break;case 24:return e.next=26,new Promise((function(e){var n=new FileReader;n.readAsText(t,"utf8"),n.onloadend=function(){n.readyState===FileReader.DONE&&e(n.result)}}));case 26:r=e.sent;case 27:if("image/svg+xml"!==t.type){e.next=43;break}return e.prev=28,e.next=31,Promise.all([n.e(34),n.e(30)]).then(n.bind(null,117));case 31:return e.next=33,e.sent.decodeSvgMetadata({svg:r});case 33:return e.abrupt("return",e.sent);case 36:if(e.prev=36,e.t1=e.catch(28),"INVALID"!==e.t1.message){e.next=42;break}throw new Error(X("alerts.imageDoesNotContainScene"));case 42:throw new Error(X("alerts.cannotRestoreFromImage"));case 43:return e.abrupt("return",r);case 44:case"end":return e.stop()}}),e,null,[[1,9],[28,36]])})));return function(t){return e.apply(this,arguments)}}()),nn=function(e){var t;if("string"===typeof e)t=e;else{if(e.type)return e.type;t=e.name||""}return/\.(excalidraw|json)$/.test(t)?"application/json":/\.png$/.test(t)?"image/png":/\.jpe?g$/.test(t)?"image/jpeg":/\.svg$/.test(t)?"image/svg+xml":""},rn=function(){var e=Object(u.a)(s.a.mark((function e(t,n){var r,a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tn(t);case 2:if(r=e.sent,e.prev=3,"excalidraw"===(a=JSON.parse(r)).type){e.next=7;break}throw new Error(X("alerts.couldNotLoadInvalidFile"));case 7:return o=$t({elements:Ht(a.elements||[]),appState:Object(K.a)(Object(K.a)({appearance:null===n||void 0===n?void 0:n.appearance,fileHandle:t.handle&&["application/json",k.i.excalidraw].includes(nn(t))?t.handle:null},Z(a.appState||{})),n?Ue(a.elements||[],n):{})},n),z(B,"load",nn(t)),e.abrupt("return",o);case 12:throw e.prev=12,e.t0=e.catch(3),console.error(e.t0.message),new Error(X("alerts.couldNotLoadInvalidFile"));case 16:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t,n){return e.apply(this,arguments)}}(),an=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tn(t);case 2:if(n=e.sent,"excalidrawlib"===(r=JSON.parse(n)).type){e.next=6;break}throw new Error(X("alerts.couldNotLoadInvalidFile"));case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),on=function(){function e(){Object(Ee.a)(this,e)}return Object(Ce.a)(e,null,[{key:"importLibrary",value:function(){var t=Object(u.a)(s.a.mark((function t(n){var r,a,o,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,an(n);case 2:if((r=t.sent)&&r.library){t.next=5;break}return t.abrupt("return");case 5:return a=function(e,t){return!e.find((function(e){return e.length===t.length&&e.every((function(e,n){return e.id===t[n].id&&e.versionNonce===t[n].versionNonce}))}))},t.next=8,e.loadLibrary();case 8:o=t.sent,i=r.library.reduce((function(e,t){var n=Ut(Zt(t));return a(o,n)&&e.push(n),e}),[]),e.saveLibrary([].concat(Object(x.a)(o),Object(x.a)(i)));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),e}();on.libraryCache=null,on.resetLibrary=function(){on.libraryCache=null,localStorage.removeItem(k.k.LOCAL_STORAGE_LIBRARY)},on.loadLibrary=function(){return new Promise(function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!on.libraryCache){e.next=2;break}return e.abrupt("return",t(JSON.parse(JSON.stringify(on.libraryCache))));case 2:if(e.prev=2,n=localStorage.getItem(k.k.LOCAL_STORAGE_LIBRARY)){e.next=6;break}return e.abrupt("return",t([]));case 6:r=JSON.parse(n).map((function(e){return Zt(e)})),on.libraryCache=JSON.parse(JSON.stringify(r)),t(r),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0),t([]);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}())},on.saveLibrary=function(e){var t=on.libraryCache;try{var n=JSON.stringify(e);on.libraryCache=JSON.parse(n),localStorage.setItem(k.k.LOCAL_STORAGE_LIBRARY,n)}catch(r){on.libraryCache=t,console.error(r)}};var cn=function(){var e=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.a)({description:"Excalidraw files",extensions:[".json",".excalidraw",".png",".svg"],mimeTypes:["application/json","image/png","image/svg+xml"]});case 2:return n=e.sent,e.abrupt("return",rn(n,t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ln=function(e){return"object"===typeof e&&e&&"excalidrawlib"===e.type&&1===e.version},sn=/#json=([0-9]+),?([a-zA-Z0-9_-]*)|^http.*\.excalidrawlib$/,un=function(e){var t=e.svgList,n=e.loadDataList,o=Object(a.useState)(!1),i=Object(d.a)(o,2),c=i[0],l=i[1],f=Object(a.useState)(!1),b=Object(d.a)(f,2),g=b[0],w=b[1],y=Object(a.useState)(!1),x=Object(d.a)(y,2),S=x[0],k=x[1],j=Object(a.useState)(""),O=Object(d.a)(j,2),E=O[0],C=O[1];Object(a.useEffect)((function(){t.forEach((function(e){var t=e.svg;g?t.pauseAnimations():t.unpauseAnimations()}))}),[t,g]),Object(a.useEffect)((function(){var e=window.location.hash.slice(1);"no"!==new URLSearchParams(e).get("toolbar")?l(!0):l("never")}),[]);var M=function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cn(void 0);case 2:t=e.sent,n([t]);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(u.a)(s.a.mark((function e(){var t,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.a)({description:"Excalidraw library files",extensions:[".json",".excalidrawlib"],mimeTypes:["application/json"]});case 2:return t=e.sent,e.next=5,an(t);case 5:if((r=e.sent)&&r.library){e.next=9;break}return window.alert("Unable to load library"),e.abrupt("return");case 9:a=r.library.map((function(e){return Ut(Zt(e))})),n(a.map((function(e){return{elements:e}})));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=Object(a.useCallback)((function(){t.length&&w((function(e){return!e}))}),[t]),L=Object(a.useCallback)((function(){t.forEach((function(e){e.svg.setCurrentTime(0)}))}),[t]);Object(a.useEffect)((function(){var e=function(e){"p"===e.key.toLowerCase()?I():"r"===e.key.toLowerCase()?L():"q"===e.key.toLowerCase()?l((function(e){return"boolean"===typeof e?!e:e})):l((function(e){return"boolean"===typeof e||e}))};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[I,L]);var N=function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return");case 2:return k(!0),e.next=5,t.reduce(function(){var e=Object(u.a)(s.a.mark((function e(t,n){var r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.svg,a=n.finishedMs,e.next=3,t;case 3:return e.next=5,v(r,a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Promise.resolve());case 5:k(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return!0!==c?null:Object(r.jsxs)("div",{className:"Toolbar",children:[Object(r.jsxs)("div",{className:"Toolbar-loader",children:[Object(r.jsx)("button",{type:"button",onClick:M,children:"Load File"}),Object(r.jsx)("span",{children:"OR"}),Object(r.jsx)("button",{type:"button",onClick:A,children:"Load Library"}),Object(r.jsx)("span",{children:"OR"}),Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=sn.exec(E);t?(t[1]?window.location.hash=t[0]:window.location.hash="library=".concat(t[0]),window.location.reload()):window.alert("Invalid link")},children:[Object(r.jsx)("input",{placeholder:"Enter link...",value:E,onChange:function(e){return C(e.target.value)}}),Object(r.jsx)("button",{type:"submit",disabled:!sn.test(E),children:"Animate!"})]})]}),!!t.length&&Object(r.jsxs)("div",{className:"Toolbar-controller",children:[Object(r.jsx)("button",{type:"button",onClick:I,children:g?"Play (P)":"Pause (P)"}),Object(r.jsx)("button",{type:"button",onClick:L,children:"Reset (R)"}),Object(r.jsx)("button",{type:"button",onClick:function(){l((function(e){return"boolean"!==typeof e&&e}))},children:"Hide Toolbar (Q)"}),Object(r.jsx)("button",{type:"button",onClick:function(){t.length&&t.forEach((function(e){var t=e.svg;m(t)}))},children:"Export to SVG"}),Object(r.jsxs)("button",{type:"button",onClick:N,disabled:S,children:["Export to WebM ",S&&"(Processing...)"]})]}),Object(r.jsx)(h,{link:"https://github.com/dai-shi/excalidraw-animate",size:40})]})},dn=(n(47),function(e){var t=e.svgList,n=Object(a.useRef)(null);return Object(a.useEffect)((function(){return t.forEach((function(e){var t=e.svg;n.current&&n.current.appendChild(t)})),function(){t.forEach((function(e){e.svg.remove()}))}}),[t]),Object(a.useEffect)((function(){var e=window.location.hash.slice(1);if("no"===new URLSearchParams(e).get("autoplay")&&n.current){var r=n.current,a=function(){t.forEach((function(e){var t=e.svg;t.setCurrentTime(0),t.unpauseAnimations()}))};return r.addEventListener("click",a),function(){r.removeEventListener("click",a)}}}),[t]),Object(r.jsx)("div",{className:"Viewer",ref:n})}),pn="\x3c!-- svg-source:excalidraw --\x3e",hn=function(e,t){var n=t.exportBackground,r=t.exportPadding,a=void 0===r?10:r,o=t.viewBackgroundColor,i=t.scale,c=void 0===i?1:i,l=t.shouldAddWatermark,s=t.metadata,u=void 0===s?"":s,p=fn(e,l),h=gn(p,a,l),f=Object(d.a)(h,4),b=f[0],g=f[1],m=f[2],v=f[3],w=document.createElementNS(j,"svg");if(w.setAttribute("version","1.1"),w.setAttribute("xmlns",j),w.setAttribute("viewBox","0 0 ".concat(m," ").concat(v)),w.setAttribute("width","".concat(m*c)),w.setAttribute("height","".concat(v*c)),w.innerHTML="\n  ".concat(pn,"\n  ").concat(u,'\n  <defs>\n    <style>\n      @font-face {\n        font-family: "Virgil";\n        src: url("https://excalidraw.com/FG_Virgil.woff2");\n      }\n      @font-face {\n        font-family: "Cascadia";\n        src: url("https://excalidraw.com/Cascadia.woff2");\n      }\n    </style>\n  </defs>\n  '),n&&o){var y=w.ownerDocument.createElementNS(j,"rect");y.setAttribute("x","0"),y.setAttribute("y","0"),y.setAttribute("width","".concat(m)),y.setAttribute("height","".concat(v)),y.setAttribute("fill",o),w.appendChild(y)}return function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.offsetX,o=void 0===a?0:a,i=r.offsetY,c=void 0===i?0:i;n&&e.forEach((function(e){e.isDeleted||Oe(e,t,n,e.x+o,e.y+c)}))}(p,ue.a.svg(w),w,{offsetX:-b+a,offsetY:-g+a}),w},fn=function(e,t){var n=Object(x.a)(e);if(t){var r=ge(e),a=Object(d.a)(r,4),o=a[2],i=a[3];n=[].concat(Object(x.a)(n),[bn(o,i)])}return n},bn=function(e,t){return He({text:X("labels.madeWithExcalidraw"),fontSize:16,fontFamily:k.c,textAlign:"right",verticalAlign:k.f,x:e,y:t+16,strokeColor:y.gray[5],backgroundColor:"transparent",fillStyle:"hachure",strokeWidth:1,strokeStyle:"solid",roughness:1,opacity:100,strokeSharpness:"sharp"})},gn=function(e,t,n){var r=ge(e),a=Object(d.a)(r,4),o=a[0],i=a[1],c=a[2],l=a[3];return[o,i,I(o,c)+2*t,I(i,l)+t+(n?0:t)]},mn=("clipboard"in navigator&&navigator.clipboard,"clipboard"in navigator&&navigator.clipboard,"clipboard"in navigator&&"write"in navigator.clipboard&&"ClipboardItem"in window&&HTMLCanvasElement.prototype,function(e,t){return window.crypto.subtle.importKey("jwk",{alg:"A128GCM",ext:!0,k:e,key_ops:["encrypt","decrypt"],kty:"oct"},{name:"AES-GCM",length:128},!1,[t])}),vn=function(){var e=Object(u.a)(s.a.mark((function e(t,n){var r,a,o,i,c,l,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(n?"".concat("https://json.excalidraw.com/api/v2/").concat(t):"".concat("https://json.excalidraw.com/api/v1/").concat(t,".json"));case 3:if((r=e.sent).ok){e.next=7;break}return window.alert(X("alerts.importBackendFailed")),e.abrupt("return",{});case 7:if(!n){e.next=22;break}return e.next=10,r.arrayBuffer();case 10:return o=e.sent,e.next=13,mn(n,"decrypt");case 13:return i=e.sent,c=new Uint8Array(12),e.next=17,window.crypto.subtle.decrypt({name:"AES-GCM",iv:c},i,o);case 17:l=e.sent,u=new window.TextDecoder("utf-8").decode(new Uint8Array(l)),a=JSON.parse(u),e.next=25;break;case 22:return e.next=24,r.json();case 24:a=e.sent;case 25:return z(B,"import"),e.abrupt("return",{elements:a.elements||null,appState:a.appState||null});case 29:return e.prev=29,e.t0=e.catch(0),window.alert(X("alerts.importBackendFailed")),console.error(e.t0),e.abrupt("return",{});case 34:case"end":return e.stop()}}),e,null,[[0,29]])})));return function(t,n){return e.apply(this,arguments)}}(),wn=function(){var e=Object(u.a)(s.a.mark((function e(t,n,r){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t){e.next=9;break}return e.t0=$t,e.next=4,vn(t,n);case 4:e.t1=e.sent,e.t2=null===r||void 0===r?void 0:r.appState,a=(0,e.t0)(e.t1,e.t2),e.next=10;break;case 9:a=$t(r||{},null);case 10:return e.abrupt("return",{elements:a.elements,appState:a.appState,commitToHistory:!1});case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),yn=function(e,t,n,r){for(var a,o,i=t.getAttribute("d")||"",c=(null===(a=i.match(/M/g))||void 0===a?void 0:a.length)||0,l=((null===(o=i.match(/C/g))||void 0===o?void 0:o.length)||0)/c,s=i,u=function(a){var o=i.replace(new RegExp(["M(\\S+) (\\S+)","((?: C\\S+ \\S+, \\S+ \\S+, \\S+ \\S+){","".concat(a),"})","(?: C\\S+ \\S+, \\S+ \\S+, \\S+ \\S+){1,}"].join(""),"g"),(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[3]?t[3].match(/.* (\S+) (\S+)$/).slice(1,3):[t[1],t[2]],o=Object(d.a)(r,2),i=o[0],c=o[1];return"M".concat(t[1]," ").concat(t[2]).concat(t[3])+" C".concat(i," ").concat(c,", ").concat(i," ").concat(c,", ").concat(i," ").concat(c).repeat(l-a)}));0===a&&t.setAttribute("d",o);var c=e.ownerDocument.createElementNS(j,"animate");c.setAttribute("attributeName","d"),c.setAttribute("from",o),c.setAttribute("to",s),c.setAttribute("begin","".concat(n+a*(r/l),"ms")),c.setAttribute("dur","".concat(r/l,"ms")),c.setAttribute("fill","freeze"),t.appendChild(c),s=o},p=l-1;p>=0;p-=1)u(p)},xn=function(e,t,n,r){var a=t.getAttribute("d")||"";if(a.includes("C"))yn(e,t,n,r);else{var o=a.replace(new RegExp(["M(\\S+) (\\S+)","((?: L\\S+ \\S+){1,})"].join("")),(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"M".concat(t[1]," ").concat(t[2])+t[3].replace(/L\S+ \S+/g,"L".concat(t[1]," ").concat(t[2]))}));t.setAttribute("d",o);var i=e.ownerDocument.createElementNS(j,"animate");i.setAttribute("attributeName","d"),i.setAttribute("from",o),i.setAttribute("to",a),i.setAttribute("begin","".concat(n,"ms")),i.setAttribute("dur","".concat(r,"ms")),i.setAttribute("fill","freeze"),t.appendChild(i)}},Sn=function(e,t,n,r){var a,o,i=t.getAttribute("d")||"",c=(null===(a=i.match(/M/g))||void 0===a?void 0:a.length)||0;if(c!==((null===(o=i.match(/C/g))||void 0===o?void 0:o.length)||0))throw new Error("unexpected m/c counts");for(var l=c/4,s=i,u=function(a){var o=i.replace(new RegExp(["((?:","M(\\S+) (\\S+) C\\S+ \\S+, \\S+ \\S+, \\S+ \\S+ ?".repeat(l),"){","".concat(a),"})","M(\\S+) (\\S+) C\\S+ \\S+, \\S+ \\S+, \\S+ \\S+ ?".repeat(l),".*"].join("")),(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"".concat(t[1])+Object(x.a)(Array(l).keys()).map((function(e){var n=t.slice(2+2*l+2*e),r=Object(d.a)(n,2),a=r[0],o=r[1];return"M".concat(a," ").concat(o," C").concat(a," ").concat(o,", ").concat(a," ").concat(o,", ").concat(a," ").concat(o," ")})).join("").repeat(4-a)}));0===a&&t.setAttribute("d",o);var c=e.ownerDocument.createElementNS(j,"animate");c.setAttribute("attributeName","d"),c.setAttribute("from",o),c.setAttribute("to",s),c.setAttribute("begin","".concat(n+a*(r/4),"ms")),c.setAttribute("dur","".concat(r/4,"ms")),c.setAttribute("fill","freeze"),t.appendChild(c),s=o},p=3;p>=0;p-=1)u(p)},kn=0,jn=function(e,t,n,r,a){var o=t.childNodes,i=o.length;o.forEach((function(t){!function(e,t,n,r,a){var o,i=n.getAttribute("y");kn+=1;var c=e.ownerDocument.createElementNS(j,"path");c.setAttribute("id","pathForText"+kn);var l=e.ownerDocument.createElementNS(j,"animate");l.setAttribute("attributeName","d"),l.setAttribute("from","m0,".concat(i," h0")),l.setAttribute("to","m0,".concat(i," h").concat(t)),l.setAttribute("begin","".concat(r,"ms")),l.setAttribute("dur","".concat(a,"ms")),l.setAttribute("fill","freeze"),c.appendChild(l);var s=e.ownerDocument.createElementNS(j,"textPath");s.setAttribute("href","#pathForText"+kn),s.textContent=n.textContent,n.textContent=" ",null===(o=function(e,t){for(var n=e.childNodes,r=0;r<n.length;++r)if(n[r].tagName===t)return n[r];return null}(e,"defs"))||void 0===o||o.appendChild(c),n.appendChild(s)}(e,n,t,r,a/i),r+=a/i}))},On=function(e,t,n,r,a,o){"line"===n||"draw"===n?function(e,t,n,r){var a=t.childNodes;a[0].getAttribute("fill-rule")?(yn(e,a[0].childNodes[1],n,.75*r),n+=.75*r,xn(e,a[0].childNodes[0],n,.25*r)):yn(e,a[0].childNodes[0],n,r)}(e,t,a,o):"arrow"===n?function(e,t,n,r){yn(e,t.childNodes[0].childNodes[0],n,.6*r),n+=.6*r,yn(e,t.childNodes[1].childNodes[0],n,.2*r),n+=.2*r,yn(e,t.childNodes[2].childNodes[0],n,.2*r)}(e,t,a,o):"rectangle"===n||"diamond"===n?function(e,t,n,r){t.childNodes[1]?(Sn(e,t.childNodes[1],n,.75*r),n+=.75*r,xn(e,t.childNodes[0],n,.25*r)):Sn(e,t.childNodes[0],n,r)}(e,t,a,o):"ellipse"===n?function(e,t,n,r){t.childNodes[1]?(yn(e,t.childNodes[1],n,.75*r),n+=.75*r,xn(e,t.childNodes[0],n,.25*r)):yn(e,t.childNodes[0],n,r)}(e,t,a,o):"text"===n&&jn(e,t,r,a,o)},En=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r,a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:return n=e.sent,e.next=6,n.blob();case 6:return r=e.sent,e.t0=JSON,e.next=10,r.text();case 10:if(e.t1=e.sent,a=e.t0.parse.call(e.t0,e.t1),ln(a)){e.next=14;break}throw new Error;case 14:return e.next=16,an(r);case 16:if((o=e.sent)&&o.library){e.next=19;break}throw new Error;case 19:return e.abrupt("return",o.library.map((function(e){return Ut(Zt(e))})));case 22:return e.prev=22,e.t2=e.catch(0),window.alert("Unable to load library"),e.abrupt("return",[]);case 26:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t){return e.apply(this,arguments)}}(),Cn=function(){var e=Object(a.useState)(!0),t=Object(d.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)([]),i=Object(d.a)(o,2),c=i[0],l=i[1],p=Object(a.useCallback)((function(e){var t=e.map((function(e){var t=Ut(e.elements),n=hn(t,{exportBackground:!0,exportPadding:30,viewBackgroundColor:"white",shouldAddWatermark:!1}),r=function(e,t){var n=function(e,t){var n={},r=0;return e.childNodes.forEach((function(e){if("g"===e.tagName){var a=t[r].groupIds;if(a.length>=1){var o=a[0];n[o]=n[o]||[],n[o].push([e,r])}r+=1}})),n}(e,t),r=new Map,a=1e3,o=0;return e.childNodes.forEach((function(i){if("g"===i.tagName){var c=t[o],l=c.type,s=c.width,u=c.groupIds;if(!r.has(i))if(u.length>=1){var p=u[0],h=n[p],f=5e3/(h.length+1);On(e,i,l,s,a,f),a+=f,r.set(i,!0),h.forEach((function(n){var o=Object(d.a)(n,2),i=o[0],c=o[1],l=t[c],s=l.type,u=l.width;r.has(i)||(On(e,i,s,u,a,f),a+=f,r.set(i,!0))})),delete n[p]}else On(e,i,l,s,a,500),a+=500,r.set(i,!0);o+=1}})),{finishedMs:a+1e3}}(n,t);return console.log(n),{svg:n,finishedMs:r.finishedMs}}));return l(t),t}),[]);return Object(a.useEffect)((function(){Object(u.a)(s.a.mark((function e(){var t,n,a,o,i,c,l,u,h,f,b,g,m,v,w,y,x;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.location.hash.slice(1),n=new URLSearchParams(t),!(a=/([0-9]+),?([a-zA-Z0-9_-]*)/.exec(n.get("json")||""))){e.next=10;break}return o=Object(d.a)(a,3),i=o[1],c=o[2],e.next=7,wn(i,c,null);case 7:l=e.sent,u=p([l]),h=Object(d.a)(u,1),f=h[0],b=f.svg,g=f.finishedMs,"no"===n.get("autoplay")&&b.setCurrentTime(g);case 10:if(!(m=/(.*\.excalidrawlib)/.exec(n.get("library")||""))){e.next=18;break}return v=Object(d.a)(m,2),w=v[1],e.next=15,En(w);case 15:y=e.sent,x=p(y.map((function(e){return{elements:e}}))),"no"===n.get("autoplay")&&x.forEach((function(e){var t=e.svg,n=e.finishedMs;t.setCurrentTime(n)}));case 18:r(!1);case 19:case"end":return e.stop()}}),e)})))()}),[p]),{loading:n,loadedSvgList:c,loadDataList:p}},Mn=function(){var e=Cn(),t=e.loading,n=e.loadedSvgList,a=e.loadDataList;return t?Object(r.jsx)("div",{children:"Loading..."}):Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(un,{svgList:n,loadDataList:a}),!!n.length&&Object(r.jsx)(dn,{svgList:n})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(Mn,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},5:function(e,t,n){"use strict";n.d(t,"h",(function(){return o})),n.d(t,"j",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"g",(function(){return s})),n.d(t,"l",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"e",(function(){return h})),n.d(t,"f",(function(){return f})),n.d(t,"i",(function(){return b})),n.d(t,"k",(function(){return g}));var r,a,o=10,i=Math.PI/12,c={TEXT:"text",CROSSHAIR:"crosshair",GRABBING:"grabbing",POINTER:"pointer",MOVE:"move",AUTO:""};!function(e){e.INIT="SCENE_INIT",e.UPDATE="SCENE_UPDATE"}(r||(r={})),function(e){e.COPY="copy",e.PASTE="paste",e.CUT="cut",e.KEYDOWN="keydown",e.KEYUP="keyup",e.MOUSE_MOVE="mousemove",e.RESIZE="resize",e.UNLOAD="unload",e.BLUR="blur",e.DRAG_OVER="dragover",e.DROP="drop",e.GESTURE_END="gestureend",e.BEFORE_UNLOAD="beforeunload",e.GESTURE_START="gesturestart",e.GESTURE_CHANGE="gesturechange",e.POINTER_MOVE="pointermove",e.POINTER_UP="pointerup",e.STATE_CHANGE="statechange",e.WHEEL="wheel",e.TOUCH_START="touchstart",e.TOUCH_END="touchend",e.HASHCHANGE="hashchange"}(a||(a={}));var l={SHAPE_ACTIONS_MENU:"App-menu__left"},s={1:"Virgil",2:"Helvetica",3:"Cascadia"},u="Segoe UI Emoji",d=20,p=1,h="left",f="top",b={excalidraw:"application/vnd.excalidraw+json",excalidrawlib:"application/vnd.excalidrawlib+json"},g={LOCAL_STORAGE_ELEMENTS:"excalidraw",LOCAL_STORAGE_APP_STATE:"excalidraw-state",LOCAL_STORAGE_COLLAB:"excalidraw-collab",LOCAL_STORAGE_LIBRARY:"excalidraw-library"}}},[[48,32,33]]]);
//# sourceMappingURL=main.85ecbc0d.chunk.js.map